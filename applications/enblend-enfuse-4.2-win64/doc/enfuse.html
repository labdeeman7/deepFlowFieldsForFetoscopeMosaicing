<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.06">
<style type="text/css">
.c000{background-color:#FF33CC}
.c001{background-color:#FFCC33}
.c002{border-spacing:6px;border-collapse:separate;}
.c003{color:#B700F4}
.c004{color:#FF3366}
.c005{font-family:monospace}
.c006{font-family:monospace;font-style:oblique}
.c007{font-family:monospace;font-style:oblique;font-size:small}
.c008{font-family:sans-serif}
.c009{font-size:small}
.c010{font-size:xx-large}
.c011{font-style:italic}
.c012{font-style:italic;font-size:small}
.c013{font-style:oblique}
.c014{font-style:oblique;color:#FF3366}
.c015{font-style:oblique;font-size:small}
.c016{font-variant:small-caps}
.c017{font-weight:bold}
.c018{font-weight:bold;color:#6633FF}
.c019{text-align:center}
.c020{text-align:center;white-space:nowrap}
.c021{text-align:left}
.c022{text-align:left;white-space:nowrap}
.c023{text-align:right;white-space:nowrap}
.c024{text-decoration:overline}
.c025{vertical-align:middle}
.c026{vertical-align:top;text-align:center;white-space:nowrap}
.c027{vertical-align:top;text-align:left;}
.c028{vertical-align:top;text-align:left;white-space:nowrap}
.c029{width:80%;height:2}
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.toc{list-style:none;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding0 tr td{padding:0;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px; border:none;}
.dcenter{margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.adalisting{font-family: "Andale Mono", Courier, monospace;
white-space: pre;
}
body{background: white;
color: black;
font-family: Verdana, Geneva, sans-serif;
margin-left: 15%;
margin-right: 15%;
}
.chapter{background: #66FF33;
margin-left: -10%;
margin-right: -10%;
padding: 0.75em;
}
.cxxlisting{font-family: "Andale Mono", Courier, monospace;
white-space: pre;
}
.dt-list{font-weight: bold;
}
.dt-thefootnotes{font-size: smaller;
}
.footnotetext{font-size: smaller;
}
.literal{background: #CCCCCC;
padding: 0.5em;
}
.maxipage{border-bottom: thin;
border-top: thin;
margin-left: -10%;
margin-right: -10%;
}
.restrictedmaterial{border-color: #FFCC33;
border-style: solid;
border-width: thick;
padding: 0.5em;
}
.geeknote{background: #CCFF33;
padding-bottom: 0.25em;
padding-left: 0.333em;
padding-right: 0.333em;
padding-top: 0.25em;
}
.section{background: #33FF66;
margin-left: -10%;
margin-right: -10%;
padding: 0.75em;
}
.subsection{background: #33FFCC;
padding: 0.5em;
}
.subsubsection{background: #33CCFF;
padding: 0.5em;
}
.terminal{background: black;
border-color: #CCCCCC;
border-style: solid;
border-width: thick;
color: #3DF400;
font-family: "Andale Mono", Courier, monospace;
padding: 0.25em;
}
.title{font-family: Verdana, Geneva, sans-serif;
}
.titlemain{background: #33CCFF;
color: black;
font-weight: bolder;
padding: 1em;
}
.titlerest{font-weight: lighter;
padding: 0.5em;
}
</style>
<title>Combining Multiple Images 
with 
Enfuse 4.2
</title>
</head>
<body>
<!--HEVEA command line is: c:\Prog\Hugin\doc\hevea\hevea -exec xxdate.exe -O -I . -I C:/Prog/Hugin/static_vs2015/enblend-hg/doc -fix C:/Prog/Hugin/static_vs2015/enblend-hg/doc/enfuse.tex -->
<!--CUT STYLE book--><!--CUT DEF chapter 1 --><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain">Combining Multiple Images<br>
with<br>
Enfuse 4.2</h1><h3 class="titlerest">Andrew&#XA0;Mihal<sup><a id="text1" href="#note1">1</a></sup> &#XA0;&#XA0;Christoph&#XA0;Spiel</h3><h3 class="titlerest">2016-03-29<sup><a id="text2" href="#note2">2</a></sup></h3></td></tr>
</table><p><a id="sec:abstract"></a>This manual is for <span class="c008">Enfuse</span> version&#XA0;&#X27E8;4.2&#X27E9;, a tool to merge different exposures of the
same scene to produce an image that looks much like a tone-mapped image.</p><div class="flushleft">
Copyright &#XA9; 2004&#X2013;2009 <span class="c016">Andrew Mihal</span>. <br>
 Copyright &#XA9; 2009&#X2013;2016 <span class="c016">Christoph Spiel</span>.
</div><blockquote class="quotation">
Permission is granted to copy, distribute and/or modify this document under the
terms of the <span class="c016">GNU</span> Free Documentation License, Version&#XA0;1.2 or any later version
published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts
and no Back-Cover Texts. A copy of the license is included in the section entitled
&#X201C;<span class="c016">GNU</span> Free Documentation License&#X201D;.
</blockquote><!--TOC chapter id="sec1" Contents-->
<h1 class="chapter" id="sec1">Contents</h1><!--SEC END --><ul class="toc"><li class="li-toc">
<a href="#sec%3Anotation">Frontmatter A&#XA0;&#XA0;Notation</a>
</li></ul><ul class="toc"><li class="li-toc">
<a href="#sec%3Aoverview">Chapter&#XA0;1&#XA0;&#XA0;Overview</a>
</li><li class="li-toc"><a href="#sec%3Aknown-limitations">Chapter&#XA0;2&#XA0;&#XA0;Known Limitations</a>
</li><li class="li-toc"><a href="#sec%3Aphotographic-workflow">Chapter&#XA0;3&#XA0;&#XA0;Workflow<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Astandard-workflow">3.1&#XA0;&#XA0;Standard Workflow</a>
</li><li class="li-toc"><a href="#sec%3Aexternal-masks">3.2&#XA0;&#XA0;External Masks</a>
</li><li class="li-toc"><a href="#sec%3Ainteraction">3.3&#XA0;&#XA0;Interacting with <span class="c008">Enfuse</span><sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Afinding-out-details">3.3.1&#XA0;&#XA0;Finding Out Details</a>
</li><li class="li-toc"><a href="#sec%3Aconsole-messages">3.3.2&#XA0;&#XA0;Console Messages</a>
</li><li class="li-toc"><a href="#sec%3Aenvironment-variables">3.3.3&#XA0;&#XA0;Environment Variables</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Ainvocation">Chapter&#XA0;4&#XA0;&#XA0;Invocation</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Aimage-requirements">4.1&#XA0;&#XA0;Image Requirements</a>
</li><li class="li-toc"><a href="#sec%3Aoptions">4.2&#XA0;&#XA0;Command-Line Options</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Acommon-options">4.2.1&#XA0;&#XA0;Common Options<sup><span class="c008">c</span></sup></a>
</li><li class="li-toc"><a href="#sec%3Aadvanced-options">4.2.2&#XA0;&#XA0;Advanced Options<sup><span class="c008">c</span></sup></a>
</li><li class="li-toc"><a href="#sec%3Afusion-options">4.2.3&#XA0;&#XA0;Fusion Options</a>
</li><li class="li-toc"><a href="#sec%3Aexpert-options">4.2.4&#XA0;&#XA0;Expert Options</a>
</li><li class="li-toc"><a href="#sec%3Aexpert-fusion-options">4.2.5&#XA0;&#XA0;Expert Fusion Options</a>
</li><li class="li-toc"><a href="#sec%3Ainformation-options">4.2.6&#XA0;&#XA0;Information Options<sup><span class="c008">c</span></sup></a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aoption-delimiters">4.3&#XA0;&#XA0;Option Delimiters<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Aoption-delimiters-numeric-arguments">4.3.1&#XA0;&#XA0;Numeric Arguments</a>
</li><li class="li-toc"><a href="#sec%3Aoption-delimiters-filename-arguments">4.3.2&#XA0;&#XA0;Filename Arguments</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aresponse-files">4.4&#XA0;&#XA0;Response Files<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Aresponse-file-format">4.4.1&#XA0;&#XA0;Response File Format</a>
</li><li class="li-toc"><a href="#sec%3Asyntactic-comments">4.4.2&#XA0;&#XA0;Syntactic Comments</a>
</li><li class="li-toc"><a href="#sec%3Aglobbing-algorithms">4.4.3&#XA0;&#XA0;Globbing Algorithms</a>
</li><li class="li-toc"><a href="#sec%3Adefault-layer-selection">4.4.4&#XA0;&#XA0;Default Layer Selection</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Alayer-selection">4.5&#XA0;&#XA0;Layer Selection<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Alayer-selection-syntax">4.5.1&#XA0;&#XA0;Layer Selection Syntax</a>
</li><li class="li-toc"><a href="#sec%3Atools-for-multi-page-files">4.5.2&#XA0;&#XA0;Tools for Multi-Page Files</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aweighting-functions">Chapter&#XA0;5&#XA0;&#XA0;Weighting Functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Aweighting-pixels">5.1&#XA0;&#XA0;Weighting Pixels</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Aweighted-average">5.1.1&#XA0;&#XA0;Weighted Average</a>
</li><li class="li-toc"><a href="#sec%3Adisabling-averaging">5.1.2&#XA0;&#XA0;Disabling Averaging</a>
</li><li class="li-toc"><a href="#sec%3Asingle-criterion-fusing">5.1.3&#XA0;&#XA0;Single Criterion Fusing</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aexposure-weighting">5.2&#XA0;&#XA0;Exposure Weighting</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Abuilt-in-functions">5.2.1&#XA0;&#XA0;Built-In Functions</a>
</li><li class="li-toc"><a href="#sec%3Auser-defined-functions">5.2.2&#XA0;&#XA0;User-Defined Functions</a>
</li><li class="li-toc"><a href="#sec%3Auser-defined-dynlink-functions">5.2.3&#XA0;&#XA0;User-Defined Dynamic Functions</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Asaturation-weighting">5.3&#XA0;&#XA0;Saturation Weighting</a>
</li><li class="li-toc"><a href="#sec%3Alocal-contrast-weighting">5.4&#XA0;&#XA0;Local Contrast Weighting</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Astandard-deviation">5.4.1&#XA0;&#XA0;Standard Deviation</a>
</li><li class="li-toc"><a href="#sec%3Alaplacian-of-gaussian">5.4.2&#XA0;&#XA0;Laplacian of Gaussian</a>
</li><li class="li-toc"><a href="#sec%3Ablend-sdev-and-log">5.4.3&#XA0;&#XA0;Blend <span class="c016">SDev</span> and <span class="c016">LoG</span></a>
</li><li class="li-toc"><a href="#sec%3Ascaling-and-choice">5.4.4&#XA0;&#XA0;Scaling and Choice of Mode</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Alocal-entropy-weighting">5.5&#XA0;&#XA0;Local Entropy Weighting</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Acolor-spaces">Chapter&#XA0;6&#XA0;&#XA0;Color Spaces<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Amathematical-preliminaries">6.1&#XA0;&#XA0;Mathematical Preliminaries</a>
</li><li class="li-toc"><a href="#sec%3Afloating-point-images">6.2&#XA0;&#XA0;Floating-Point Images</a>
</li><li class="li-toc"><a href="#sec%3Acolor-profiles">6.3&#XA0;&#XA0;Color Profiles</a>
</li><li class="li-toc"><a href="#sec%3Ablending-color-spaces">6.4&#XA0;&#XA0;Blending Color Spaces</a>
</li><li class="li-toc"><a href="#sec%3Apractical-considerations">6.5&#XA0;&#XA0;Practical Considerations</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aunderstanding-masks">Chapter&#XA0;7&#XA0;&#XA0;Understanding Masks<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Amasks-in-input-files">7.1&#XA0;&#XA0;Masks In Input Files</a>
</li><li class="li-toc"><a href="#sec%3Aweight-mask-files">7.2&#XA0;&#XA0;Weight Mask Files</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aapplications">Chapter&#XA0;8&#XA0;&#XA0;Applications of <span class="c008">Enfuse</span></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Awhat-makes-images-fusable">8.1&#XA0;&#XA0;What Makes Images Fusable?</a>
</li><li class="li-toc"><a href="#sec%3Arepetition">8.2&#XA0;&#XA0;Repetition &#X2013; Noise Reduction</a>
</li><li class="li-toc"><a href="#sec%3Aexposure-series--dynamic-range-increase">8.3&#XA0;&#XA0;Exposure Series &#X2013; Dynamic Range Increase</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Atips-for-beginners">8.3.1&#XA0;&#XA0;Tips For Beginners</a>
</li><li class="li-toc"><a href="#sec%3Acommon-misconceptions">8.3.2&#XA0;&#XA0;Common Misconceptions</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aflash-exposure-series--directedlighting">8.4&#XA0;&#XA0;Flash Exposure Series &#X2013; Directed Lighting</a>
</li><li class="li-toc"><a href="#sec%3Apolarization-series--saturation-enhancement">8.5&#XA0;&#XA0;Polarization Series &#X2013; Saturation Enhancement</a>
</li><li class="li-toc"><a href="#sec%3Afocus-stacks--depth-of-field-increase">8.6&#XA0;&#XA0;Focus Stacks &#X2013; Depth-of-Field Increase</a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Awhy-create-focus-stacks">8.6.1&#XA0;&#XA0;Why create focus stacks?</a>
</li><li class="li-toc"><a href="#sec%3Apreparing-focus-stacks">8.6.2&#XA0;&#XA0;Preparing Focus Stacks</a>
</li><li class="li-toc"><a href="#sec%3Alocal-contrast-based-fusing">8.6.3&#XA0;&#XA0;Local Contrast Based Fusing</a>
</li><li class="li-toc"><a href="#sec%3Abasic-focus-stacking">8.6.4&#XA0;&#XA0;Basic Focus Stacking</a>
</li><li class="li-toc"><a href="#sec%3Aadvanced-focus-stacking">8.6.5&#XA0;&#XA0;Advanced Focus Stacking</a>
</li><li class="li-toc"><a href="#sec%3Atips-for-focus-stacking-experts">8.6.6&#XA0;&#XA0;Tips For Focus Stacking Experts</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Ahelpful-programs">Appendix&#XA0;A&#XA0;&#XA0;Helpful Programs<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Araw-image-conversion">A.1&#XA0;&#XA0;Raw Image Conversion</a>
</li><li class="li-toc"><a href="#sec%3Aimage-alignment-and-rendering">A.2&#XA0;&#XA0;Image Alignment and Rendering</a>
</li><li class="li-toc"><a href="#sec%3Aimage-manipulation">A.3&#XA0;&#XA0;Image Manipulation</a>
</li><li class="li-toc"><a href="#sec%3Ahigh-dynamic-range">A.4&#XA0;&#XA0;High Dynamic Range</a>
</li><li class="li-toc"><a href="#sec%3Ahelpful-libraries">A.5&#XA0;&#XA0;Libraries</a>
</li><li class="li-toc"><a href="#sec%3Ameta-data-handling">A.6&#XA0;&#XA0;Meta-Data Handling</a>
</li><li class="li-toc"><a href="#sec%3Acamera-firmware-extension">A.7&#XA0;&#XA0;Camera Firmware Extension</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Abug-reports">Appendix&#XA0;B&#XA0;&#XA0;Bug Reports<sup><span class="c008">c</span></sup></a>
<ul class="toc"><li class="li-toc">
<a href="#sec%3Ahave-you-really-found-a-bug">B.1&#XA0;&#XA0;Found a Bug?</a>
</li><li class="li-toc"><a href="#sec%3Ahow-to-report-bugs">B.2&#XA0;&#XA0;How to Report Bugs</a>
</li><li class="li-toc"><a href="#sec%3Asending-patches">B.3&#XA0;&#XA0;Sending Patches</a>
</li></ul>
</li><li class="li-toc"><a href="#sec%3Aauthors">Appendix&#XA0;C&#XA0;&#XA0;Authors<sup><span class="c008">c</span></sup></a>
</li><li class="li-toc"><a href="#sec%3Afdl">Appendix&#XA0;D&#XA0;&#XA0;<span class="c016">GNU</span> <span class="c016">FDL</span><sup><span class="c008">c</span></sup></a>
</li><li class="li-toc">Indices
<ul class="toc"><li class="li-toc">
<a href="#sec%3Asyncomm-index">Syntactic Comment Index</a>
</li><li class="li-toc"><a href="#sec%3Aprogram-index">Program/Application Index</a>
</li><li class="li-toc"><a href="#sec%3Aoption-index">Option Index</a>
</li><li class="li-toc"><a href="#sec%3Ageneral-index">General Index</a>
</li></ul>
</li></ul><p><br>
<br>
</p><blockquote class="quotation">
Chapters or sections marked with a &#X201C;<sup><span class="c008">c</span></sup>&#X201D;-sign appear in both manuals,
i.e. the <span class="c008">Enfuse</span> manual and the <span class="c008">Enblend</span> manual. The commonality extends to <em>all</em>
sub-sections of the marked one.
</blockquote>
<!--TOC section id="sec:notation" Frontmatter A&#XA0;&#XA0;Notation-->
<h2 class="section" id="sec:notation">Frontmatter A&#XA0;&#XA0;<a id="hevea_general0"></a><a id="hevea_general1"></a><a id="hevea_general2"></a>Notation</h2><!--SEC END --><p>This manual uses some typographic conventions to clarify the subject. The markup of the
ready-to-print version differs from the web markup.</p><div class="center">
<table class="c002 cellpading0"><tr><td class="hbar" colspan=3></td></tr>
<tr><td class="c020">Category</td><td class="c020">Description</td><td class="c020">Examples </td></tr>
<tr><td class="hbar" colspan=3></td></tr>
<tr><td class="c027">Acronym</td><td class="c027">Common acronym</td><td class="c028"><span class="c016">sRGB</span>, <span class="c016">OpenMP</span> </td></tr>
<tr><td class="c027">
Application</td><td class="c027"><span class="c016">GUI</span> or <span class="c016">CLI</span> application</td><td class="c028"><span class="c008">Hugin</span>, <span class="c008">Enfuse</span></td></tr>
<tr><td class="c027">
Command</td><td class="c027">Name of a binary in the running text</td><td class="c028"><span class="c017">convert</span>, <span class="c017">enfuse</span></td></tr>
<tr><td class="c027">
Common part</td><td class="c027">Chapter, section, or any other part that appears in both manuals</td><td class="c028">Response
Files<sup><span class="c008">c</span></sup></td></tr>
<tr><td class="c027">
Default</td><td class="c027">Value as compiled into the <span class="c017">enfuse</span> binary that belongs to this documentation</td><td class="c028"> &#X27E8;1&#X27E9;, &#X27E8;<span class="c011">a.tif</span>&#X27E9; </td></tr>
<tr><td class="c027">
Environment variable</td><td class="c027">Variable passed to enfuse by the operating system</td><td class="c028"><span class="c005">PATH</span>,
<span class="c005">TMPDIR</span> </td></tr>
<tr><td class="c027">
Filename</td><td class="c027">Name of a file in the filesystem</td><td class="c028"><span class="c011">a.tif</span> </td></tr>
<tr><td class="c027">
Filename extension</td><td class="c027">Name of a filename extension with or without dots</td><td class="c028"><span class="c011">.png</span>,
<span class="c011">tiff</span></td></tr>
<tr><td class="c027">
Fix me!</td><td class="c027">Section that needs extending or at least some improvement</td><td class="c028"><span class="c000">FIX</span>Explain<span class="c000">ME</span> </td></tr>
<tr><td class="c027">
Literal text</td><td class="c027">Text that (only) makes sense when typed in exactly as shown</td><td class="c028"><span class="c005">uint16</span>
</td></tr>
<tr><td class="c027">
Option</td><td class="c027">Command-line option given to enfuse</td><td class="c028"><span class="c005">--verbose</span> </td></tr>
<tr><td class="c027">
Optional part</td><td class="c027">Optional part of a syntax description in square brackets</td><td class="c028"> <span class="c005">--verbose</span>&#XA0;[=<span class="c013">LEVEL</span>] </td></tr>
<tr><td class="c027">
Placehoder</td><td class="c027">Meta-syntactic variable that stands in for the actual text</td><td class="c028"> <span class="c013">ICC-PROFILE</span> </td></tr>
<tr><td class="c027">
Proper name</td><td class="c027">Name of a person or algorithm</td><td class="c028"><span class="c016">Dijkstra</span> </td></tr>
<tr><td class="c027">
Restricted note</td><td class="c027">Annotation that applies only to a particular program, configuration,&#XA0;or
operating system</td><td class="c028"><span class="c001"><span class="c008">Enfuse</span>.</span> </td></tr>
<tr><td class="c027">
Sample</td><td class="c027">Literal text in quotes</td><td class="c028">&#X2018;<span class="c005">%</span>&#X2019; or &#X2018;<span class="c005">--help</span>&#X2019; </td></tr>
<tr><td class="c027">
Side note</td><td class="c027">Non-essential or &#X201C;geeky&#X201D; material</td><td class="c028"><span class="c015">Gory details</span> </td></tr>
<tr><td class="c027">
White space</td><td class="c027">Indispensable white space</td><td class="c028"> <span class="c005">r</span>&#X2423;<span class="c005">g</span>&#X2423;<span class="c005">b</span> </td></tr>
</table>
</div><!--TOC chapter id="sec:overview" Chapter&#XA0;1&#XA0;&#XA0;Overview-->
<h1 class="chapter" id="sec:overview">Chapter&#XA0;1&#XA0;&#XA0;<a id="hevea_general3"></a>Overview</h1><!--SEC END --><p><a id="hevea_general4"></a><a id="hevea_general5"></a><a id="hevea_general6"></a><a id="hevea_general7"></a><a id="hevea_general8"></a><a id="hevea_general9"></a><a id="hevea_general10"></a>
<span class="c008">Enfuse</span> merges overlapping images using the
<span class="c016">Mertens</span>-<span class="c016">KautzVan Reeth</span> exposure fusion
algorithm.<sup><a id="text3" href="#note3">1</a></sup> This is a quick way for example to blend differently exposed images
into a nice output image, without producing intermediate high-dynamic range (<span class="c016">HDR</span>)
images that are then tone-mapped to a viewable image. This simplified process often works much
better than tone-mapping algorithms.
</p><p><a id="hevea_general11"></a><a id="hevea_general12"></a><span class="c008">Enfuse</span> can also be used to build extended depth-of-field (<span class="c016">DoF</span>) images by blending a
focus stack.</p><p>The idea is that pixels in the input images are weighted according to qualities such as, for
example, proper exposure, good local contrast, or high saturation. These weights determine how
much a given pixel will contribute to the final image.</p><p><a id="hevea_general13"></a><a id="hevea_general14"></a><a id="hevea_general15"></a><a id="hevea_general16"></a><a id="hevea_general17"></a>A <span class="c016">Burt</span>-<span class="c016">Adelson</span> multi-resolution spline blender<sup><a id="text4" href="#note4">2</a></sup> is used
to combine the images according to the weights. The multi-resolution blending ensures that
transitions between regions where different images contribute are difficult to spot.</p><p><span class="c008">Enfuse</span> uses up to four criteria to judge the quality of a pixel:</p><dl class="list"><dt class="dt-list">

<a id="hevea_general18"></a><a id="hevea_general19"></a>Exposure</dt><dd class="dd-list">The exposure criteria favors pixels with luminance close to the middle of the range. These
pixels are considered better exposed than those with high or low luminance levels.<p><a id="hevea_general20"></a><a id="hevea_general21"></a></p></dd><dt class="dt-list">Saturation</dt><dd class="dd-list">The saturation criteria favors highly-saturated pixels. Note that saturation is only defined
for color pixels.<p><a id="hevea_general22"></a><a id="hevea_general23"></a><a id="hevea_general24"></a></p></dd><dt class="dt-list">Local Contrast</dt><dd class="dd-list">The contrast criteria favors pixels inside a high-contrast neighborhood. <span class="c008">Enfuse</span> can use
standard deviation, <span class="c016">Laplacian</span> magnitude, or a blend of both as local contrast
measure.<p><a id="hevea_general25"></a><a id="hevea_general26"></a><a id="hevea_general27"></a></p></dd><dt class="dt-list">Local Entropy</dt><dd class="dd-list">The entropy criteria prefers pixels inside a high-entropy neighborhood. In addition, <span class="c008">Enfuse</span>
allows the user to mitigate the problem of noisy images when using entropy weighting by
setting a black threshold.
</dd></dl><p>See Table&#XA0;<a href="#tab%3Adefault-weights">5.1</a> for the default weights of these criteria.</p><p>For the concept of pixel weighting, and details on the different weighting functions, see
Chapter&#XA0;<a href="#sec%3Aweighting-functions">5</a>.</p><p>Adjust how much importance is given to each criterion by setting the weight parameters on the
command line. For example, if you set
</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
--exposure-weight=1.0 --saturation-weight=0.5
</span></div></dd></dl></div><p>
<span class="c008">Enfuse</span> will favor well-exposed pixels over highly-saturated pixels when blending the source
images. The effect of these parameters on the final result will not always be clear in advance.
The quality of the result is subject to your artistic interpretation. Playing with the weights
may or may not give a more pleasing result. The authors encourage the users to experiment,
perhaps using down-sized or cropped images for speed.</p><div class="geeknote"><blockquote class="quotation"><span class="c015">
Down-sizing (also called &#X201C;down-sampling&#X201D;) with a good interpolator reduces noise, which
might not be desired to judge the image quality of the original-size image. Cropping can
offer an alternative, though.
</span></blockquote></div><p><a id="hevea_general28"></a><span class="c008">Enfuse</span> expects but does not require each input image to have an alpha channel. By setting the
alpha values of pixels to zero, users can manually remove those pixels from consideration when
blending. If an input image lacks an alpha channel, <span class="c008">Enfuse</span> will issue a warning and continue
assuming all pixels should contribute to the final output. Any alpha value other than zero is
interpreted as &#X201C;this pixel should contribute to the final image&#X201D;.</p><p>The input images are processed in the order they appear on the command line. Multi-layer
images are processed from the first layer to the last before <span class="c008">Enfuse</span> considers the next image on
the command line. Consult Section&#XA0;<a href="#sec%3Alayer-selection">4.5</a> on how to change the images&#X2019;
order within multi-layer image files.</p><p><a id="hevea_general29"></a>Find out more about <span class="c008">Enfuse</span> on its <a href="http://sourceforge.net/">SourceForge</a>
<a href="http://enblend.sourceforge.net/">web page</a>.</p><!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note3" href="#text3">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><span class="c016">Tom Mertens</span>, <span class="c016">Jan Kautz</span>, and <span class="c016">Frank van
Reeth</span>, &#X201C;Exposure Fusion&#X201D;, Proceedings of the 15<sup><span class="c011">th</span></sup> Pacific Conference on
Computer Graphics and Applications 2007, pages&#XA0;382&#X2013;390.</div>
</dd><dt class="dt-thefootnotes"><a id="note4" href="#text4">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><span class="c016">Peter J. Burt</span> and <span class="c016">Edward H. Adelson</span>, &#X201C;A Multiresolution
Spline With Application to Image Mosaics&#X201D;, <span class="c016">ACM</span> Transactions on Graphics,
Vol.&#XA0;2, No.&#XA0;4, October&#XA0;1983, pages&#XA0;217&#X2013;236.</div>
</dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec:known-limitations" Chapter&#XA0;2&#XA0;&#XA0;Known Limitations-->
<h1 class="chapter" id="sec:known-limitations">Chapter&#XA0;2&#XA0;&#XA0;<a id="hevea_general30"></a>Known Limitations</h1><!--SEC END --><p><span class="c008">Enfuse</span> has its limitations. Some of them are inherent to the programs proper others are
&#X201C;imported&#X201D; by using libraries as for example <a href="https://ukoethe.github.io/vigra/"><span class="c016">VIGRA</span></a>. Here are
some of the known ones.</p><ul class="itemize"><li class="li-itemize">
The <a id="hevea_general31"></a><span class="c016">BigTIFF</span> image format is not supported.</li><li class="li-itemize">Total size of <em>any</em> &#X2013; even intermediate &#X2013; image is limited to 2<sup>31</sup>&#XA0;pixels, this is
two giga-pixels.</li></ul><!--TOC chapter id="sec:photographic-workflow" Chapter&#XA0;3&#XA0;&#XA0;Workflow<sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:photographic-workflow">Chapter&#XA0;3&#XA0;&#XA0;<a id="hevea_general32"></a><a id="hevea_general33"></a>Photographic Workflow<sup><span class="c008">c</span></sup></h1><!--SEC END --><p><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> are parts of a chain of tools to assemble images.</p><ul class="itemize"><li class="li-itemize">
<span class="c008">Enblend</span> combines a series of pictures taken at the same location but in
different directions.</li><li class="li-itemize"><span class="c008">Enfuse</span> merges photos of the same subject at the same location and same
direction, but taken with varying exposure parameters.
</li></ul><!--TOC section id="sec:standard-workflow" 3.1&#XA0;&#XA0;Standard Workflow-->
<h2 class="section" id="sec:standard-workflow">3.1&#XA0;&#XA0;<a id="hevea_general34"></a><a id="hevea_general35"></a>Standard, All-In-One Workflow</h2><!--SEC END --><p>Figure&#XA0;<a href="#fig%3Aphotographic-workflow">3.1</a> shows where <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> sit in the tool
chain of the standard workflow.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="photographic-workflow.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 3.1: <a id="fig:photographic-workflow"></a><a id="hevea_general36"></a><a id="hevea_general37"></a><a id="hevea_program0"></a><a id="hevea_program1"></a><a id="hevea_program2"></a><a id="hevea_program3"></a><a id="hevea_program4"></a>Photographic workflow with <span class="c008">Enfuse</span> and <span class="c008">Enblend</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><dl class="list"><dt class="dt-list">

Take Images</dt><dd class="dd-list">Take <em>multiple</em> images to form a panorama, an exposure series, a focus stack, etc.&#X2026;<p>There is one exception with <span class="c008">Enfuse</span> when a single raw image is converted multiple
times to get several &#X2013; typically differently &#X201C;exposed&#X201D; &#X2013; images.</p><p><em>Exemplary Benefits:</em></p><ul class="itemize"><li class="li-itemize">
Many pictures taken from the same vantage point but showing different viewing directions.
&#X2013; Panorama</li><li class="li-itemize">Pictures of the same subject exposed with different shutter speeds. &#X2013; Exposure series</li><li class="li-itemize">Images of the same subject focused at differing distances. &#X2013; Focus stack
</li></ul><p><em>Remaining Problem:</em> The &#X201C;overlayed&#X201D; images may not fit together, that is the
overlay regions may not match exactly.</p><p><a id="hevea_general38"></a><a id="hevea_general39"></a></p></dd><dt class="dt-list">Convert Images</dt><dd class="dd-list">Convert the <a href="https://luminous-landscape.com/understanding-raw-files-explained/">raw data</a> exploiting the full dynamic range of
the camera and capitalize on a high-quality conversion.</dd><dt class="dt-list">Align Images</dt><dd class="dd-list">Align the images so as to make them match as well as possible.<p>Again there is one exception and this is when images naturally align. For example, a series
of images taken from a rock solid tripod with a cable release without touching the camera, or
images taken with a shift lens, can align without further user intervention.</p><p><a id="hevea_general40"></a><a id="hevea_general41"></a>This step submits the images to affine transformations.</p><p><a id="hevea_general42"></a>If necessary, it rectifies the lens&#X2019; distortions (e.g. barrel or pincushion), too.</p><p><a id="hevea_general43"></a><a id="hevea_general44"></a>Sometimes even luminance or color differences between pairs of overlaying images are corrected
(&#X201C;photometric alignment&#X201D;).</p><p><em>Benefit:</em> The overlay areas of images match as closely as possible given the
quality if the input images and the lens model used in the transformation.</p><p><a id="hevea_general45"></a><em>Remaining Problem:</em> The images may still not align perfectly, for example,
because of <a href="https://en.wikipedia.org/wiki/Parallax">parallax</a> errors, or blur produced by camera shake.</p></dd><dt class="dt-list">Combine Images</dt><dd class="dd-list"><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> combine the aligned images into one.<p><em>Benefit:</em> The overlay areas become imperceptible for all but the most
misaligned images.</p><p><a id="hevea_general46"></a><em>Remaining Problem:</em> Enblend and Enfuse write images with an alpha channel; for
more information on alpha channels see Chapter&#XA0;<a href="#sec%3Aunderstanding-masks">7</a>.
Furthermore, the final image rarely is rectangular.</p></dd><dt class="dt-list">Post-process</dt><dd class="dd-list">Post-process the combined image with your favorite tool. Often the user will want to crop the
image and simultaneously throw away the alpha channel.</dd><dt class="dt-list">View</dt><dd class="dd-list"></dd><dt class="dt-list">Print</dt><dd class="dd-list"></dd><dt class="dt-list">Enjoy</dt><dd class="dd-list">
</dd></dl><!--TOC section id="sec:external-masks" 3.2&#XA0;&#XA0;External Masks-->
<h2 class="section" id="sec:external-masks">3.2&#XA0;&#XA0;<a id="hevea_general47"></a><a id="hevea_general48"></a>External Masks</h2><!--SEC END --><p>In the usual workflow <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> generate the blending and fusing masks according to
the command-line options and the input images including their associated alpha-channels, and
then they immediately use these masks for multi-resolution blending or
multi-resolution fusing the output image.</p><p>Sometimes more control over the masks is wanted. To this end, both applications provide the
option pair <span class="c005">--load-masks</span> and <span class="c005">--save-masks</span>. See
Chapter&#XA0;<a href="#sec%3Ainvocation">4</a>, for detailed explanations of both options. With the help
of these options the processing can be broken up into two phases:</p><ol class="enumerate" type=1><li class="li-enumerate"><a id="hevea_option0"></a><a id="hevea_option1"></a>Save masks with <span class="c005">--save-masks</span>. Generate masks and save them into image files.<p>Avoid option&#XA0;<span class="c005">--output</span> here unless the blended or fused image at this point is wanted.</p><p><a id="hevea_option2"></a></p></li><li class="li-enumerate">Load possibly modified masks with <span class="c005">--load-masks</span> from files and then blend or fuse the
final image with the help of the loaded masks only.<p>Neither application (re-)generates any mask in this phase. The loaded masks completely
control the multi-resolution blending or multi-resolution fusing the output image.
</p></li></ol><p>In between these two steps the user may apply whatever transformation to the mask files, as long
as their geometries and offsets remain the same. Thus the &#X201C;Combine Images&#X201D; box of
Figure&#XA0;<a href="#fig%3Aphotographic-workflow">3.1</a> becomes three activities as is depicted in
Figure&#XA0;<a href="#fig%3Aexternal-mask-workflow">3.2</a>.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="external-mask-workflow.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 3.2: <a id="fig:external-mask-workflow"></a><a id="hevea_general49"></a>Workflow for externally modified masks. The &#X201C;Blend or Fuse Using Masks&#X201D; step utilizes the
multi-resolution algorithm just as for internal workflow without mask files.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>To further optimize this kind of workflow, both <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> stop after mask
generation if option&#XA0;<span class="c005">--save-masks</span> is given, but <em>no output file</em> is specified with
the <span class="c005">--output</span> option. This way the time for pyramid generation, blending, fusing, and
writing the final image to disk is saved, as well as no output image gets generated.</p><p>Note that options&#XA0;<span class="c005">--save-masks</span> and <span class="c005">--load-masks</span> cannot be used simultaneously.</p><!--TOC section id="sec:interaction" 3.3&#XA0;&#XA0;Interacting with <span class="c008">Enfuse</span><sup><span class="c008">c</span></sup>-->
<h2 class="section" id="sec:interaction">3.3&#XA0;&#XA0;<a id="hevea_general50"></a>Interacting with <span class="c008">Enfuse</span><sup><span class="c008">c</span></sup></h2><!--SEC END --><p>This section explains how to find out about the inner workings of <em>your</em> version of <span class="c008">Enfuse</span>
without looking at the source code. And it states how to interact with <span class="c008">Enfuse</span> besides passing
command-line options and image filenames.</p><!--TOC subsection id="sec:finding-out-details" 3.3.1&#XA0;&#XA0;Finding Out Details-->
<h3 class="subsection" id="sec:finding-out-details">3.3.1&#XA0;&#XA0;<a id="hevea_general51"></a>Finding Out Details About enfuse</h3><!--SEC END --><p>An <span class="c017">enfuse</span> binary can come in several configurations. The exact name of the binary may vary
and it may or may not reflect the &#X201C;kind of enfuse&#X201D;. Therefore, <span class="c017">enfuse</span> offers several options
that allow the user to query exactly&#X2026;</p><ul class="itemize"><li class="li-itemize">
what its exact version number is (see Sec.&#XA0;<a href="#sec%3Aexact-version">3.3.1</a> and
option&#XA0;<a href="#opt%3Aversion"><span class="c005">--version</span></a>),</li><li class="li-itemize">what features it does support (see Sec.&#XA0;<a href="#sec%3Acompiled-in-features">3.3.1</a> and
options&#XA0;<a href="#opt%3Aversion"><span class="c005">--version</span></a> and
<a href="#opt%3Averbose"><span class="c005">--verbose</span></a>),</li><li class="li-itemize">which image formats it can read and write without the need of conversion (see
Sec.&#XA0;<a href="#sec%3Aimage-formats">3.3.1</a> and
option&#XA0;<a href="#opt%3Ashow-image-formats"><span class="c005">--show-image-formats</span></a>),</li><li class="li-itemize">who built it, (see Sec.&#XA0;<a href="#sec%3Aname-of-builder">3.3.1</a> and
option&#XA0;<a href="#opt%3Ashow-signature"><span class="c005">--show-signature</span></a>), and finally</li><li class="li-itemize">what compiler and libraries were used to do so (see
Sec.&#XA0;<a href="#sec%3Acompiler-and-libraries">3.3.1</a> and
option&#XA0;<a href="#opt%3Ashow-software-components"><span class="c005">--show-software-components</span></a>).
</li></ul><p>The information are explained in detail in the following sections.</p><!--TOC subsubsection id="sec:exact-version" Exact Version-->
<h4 class="subsubsection" id="sec:exact-version"><a id="hevea_general52"></a><a id="hevea_general53"></a><a id="hevea_general54"></a><a id="hevea_general55"></a><a id="hevea_option3"></a>Exact Version Number</h4><!--SEC END --><p>Example&#XA0;<a href="#ex%3Aoption-version">3.3.1</a> shows a possible output of &#X2018;<span class="c005">enfuse --version</span>&#X2019;. The
version number at the beginning of the text tells about the <em>exact</em> version of the binary.
It is the number that can be compared with the version number of this document, which by the way
is &#X27E8;4.2&#X27E9;. Our slightly cranky markup (see also
<a href="#sec%3Anotation">Notation</a>) dispels copy-paste errors.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse --version <br>
 enfuse 4.2-02c1f45857b4 <br>
 &#XA0; <br>
 Copyright (C) 2004-2009 Andrew Mihal. <br>
 Copyright (C) 2009-2015 Christoph Spiel. <br>
 &#XA0; <br>
 License GPLv2+: GNU GPL version 2 or later &lt;http://www.gnu.org/licenses/gpl.html&gt; <br>
 This is free software: you are free to change and redistribute it. <br>
 There is NO WARRANTY, to the extent permitted by law. <br>
 &#XA0; <br>
 Written by Andrew Mihal, Christoph Spiel and others.
</span></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 3.3.1: <a id="ex:option-version"></a>Example output of <span class="c017">enfuse</span> when called with option&#XA0;<span class="c005">--version</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p><a id="hevea_general56"></a><a id="hevea_general57"></a><a id="hevea_general58"></a>The version indicator consist of a two (major and minor version) or three (major and minor
version plus patch-level) numbers separated by dots and an optional hexadecimal identifier.
Binaries from the &#X201C;Development Branch&#X201D; are assigned two-part version numbers, whereas a
three-part version number is reserved for the &#X201C;Stable Branch&#X201D; of development. Officially
released versions lack the hexadecimal identifier.</p><p>Examples:</p><dl class="list"><dt class="dt-list">

<span class="c005">4.1.3-0a816672d475</span></dt><dd class="dd-list">Some unreleased version from the &#X201C;Stable Branch&#X201D;, which finally will lead to version&#XA0;4.1.3.</dd><dt class="dt-list"><span class="c005">4.1.3</span></dt><dd class="dd-list">Officially released version&#XA0;4.1.3 in the &#X201C;Stable Branch&#X201D;.</dd><dt class="dt-list"><span class="c005">4.2-1e4d237daabf</span></dt><dd class="dd-list">Some unreleased version from the &#X201C;Development Branch&#X201D;, which finally will lead to
version&#XA0;4.2.</dd><dt class="dt-list"><span class="c005">4.2</span></dt><dd class="dd-list">Officially released version&#XA0;4.2 in the &#X201C;Development Branch&#X201D;.
</dd></dl><p>Matching the version codes is the only reliably way to pair a given binary with its manual page
(&#X201C;manual page for enblend&#XA0;4.2-1e4d237daabf&#X201D;) and its documentation. This document mentions
the version code for example on its
Title
and the <a href="#sec%3Aabstract">Abstract</a>.</p><p><a id="hevea_general59"></a><a id="hevea_general60"></a><a id="hevea_general61"></a>The twelve-digit hexadecimal <span class="c013">ID-CODE</span> is automatically generated by our source-code
versioning system, <a id="hevea_program5"></a><a href="https://www.mercurial-scm.org/">Mercurial</a>. Use the
<span class="c013">ID-CODE</span> to look up the version on the web in our <a href="http://hg.code.sf.net/p/enblend/code">public
source code repository</a> or, if you have cloned the project to your own workspace, with the
command
</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
hg log --verbose --rev <span class="c013">ID-CODE</span>
</span></div></dd></dl></div><!--TOC subsubsection id="sec:compiled-in-features" Compiled-In Features-->
<h4 class="subsubsection" id="sec:compiled-in-features"><a id="hevea_general62"></a><a id="hevea_general63"></a><a id="hevea_general64"></a><a id="hevea_general65"></a><a id="hevea_option4"></a><a id="hevea_option5"></a>Compiled-In Features</h4><!--SEC END --><p>Adding option&#XA0;<span class="c005">--verbose</span> to&#XA0;<span class="c005">--version</span> will reproduce the information described
in the previous section plus a list of &#X201C;extra features&#X201D;. Any unavailable feature in the
particular binary queried returns</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
Extra feature: &#X2026;: no
</span></div></dd></dl></div><p>whereas available features answer &#X201C;<span class="c005">yes</span>&#X201D; followed by a detailed report on the feature
and its connection to some library or specific hardware.
Example&#XA0;<a href="#ex%3Aoption-version-verbose">3.3.2</a> shows such a report. Remember that your binary
may include more or less of the features displayed there.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage">
<div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse --version --verbose <br>
 enfuse 4.2-95f1fed2bf2d <br>
 &#XA0; <br>
 Extra feature: dynamic linking support: yes <br>
 Extra feature: image cache: no <br>
 Extra feature: OpenMP: no <br>
 &#XA0; <br>
 Copyright (C) 2004-2009 Andrew Mihal. <br>
 Copyright (C) 2009-2015 Christoph Spiel. <br>
 &#XA0; <br>
 License GPLv2+:&#XA0;GNU GPL version 2 or later &lt;http://www.gnu.org/licenses/gpl.html&gt; <br>
 This is free software: you are free to change and redistribute it. <br>
 There is NO WARRANTY, to the extent permitted by law. <br>
 &#XA0; <br>
 Written by Andrew Mihal, Christoph Spiel and others.
</span></div></div>
<p><br>
</p></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 3.3.2: <a id="ex:option-version-verbose"></a>Example output of <span class="c017">enfuse</span> when called with options <span class="c005">--version</span>
and&#XA0;<span class="c005">--verbose</span> together.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>The &#X2018;<span class="c005">--version --verbose</span>&#X2019;&#XA0;combo is one of the first things test if <span class="c017">enfuse</span> &#X201C;suddenly&#X201D;
behaves strangely.</p><ol class="enumerate" type=1><li class="li-enumerate">
<span class="c011">&#X201C;I&#X2019;m running my <span class="c017">enfuse</span> on a multi-core system, but it does not make use of it.&#X201D;
</span><p>
Check for extra feature <span class="c016">OpenMP</span>.
</p></li><li class="li-enumerate"><span class="c011">&#X201C;My <span class="c017">enfuse</span> complains when I call it with &#X2018;<span class="c005">--gpu</span>&#X2019;!&#X201D;
</span><p>
Check for extra feature <span class="c016">OpenCL</span>.
</p></li><li class="li-enumerate"><span class="c011">&#X201C;<span class="c017">enfuse</span> is so slow!&#X201D;
</span><p>
Ensure that <em>neither</em> feature <span class="c005">mmap-view</span> <em>nor</em> <span class="c005">image-cache</span> has been
compiled in.
</p></li><li class="li-enumerate"><span class="c011">&#X201C;<span class="c017">enfuse</span> eats away too much memory! Can I tell it to unload that onto the disk?&#X201D;
</span><p>
No, there is no command-line switch for that, but you can use a version with
<span class="c005">mmap-view</span>&#XA0;feature.
</p></li><li class="li-enumerate"><span class="c011">&#X201C;My <span class="c017">enfuse</span> has </span><span class="c016">OpenMP</span><span class="c011"> enabled. Does it support dynamic adjustment of the
number of threads?&#X201D;
</span><p>
Under extra feature <span class="c016">OpenMP</span> look for &#X201C;support for dynamic adjustment of the
number of threads&#X201D;.
</p></li></ol><!--TOC subsubsection id="sec:image-formats" Image Formats-->
<h4 class="subsubsection" id="sec:image-formats"><a id="hevea_general66"></a><a id="hevea_general67"></a><a id="hevea_option6"></a>Supported Images Formats</h4><!--SEC END --><p><span class="c008">Enfuse</span> can read and write a fixed set of image formats if it was compiled to support them. For
example the <span class="c016">EXR</span>-format requires special support libraries. Use
option&#XA0;<span class="c005">--show-image-formats</span> to find out</p><ul class="itemize"><li class="li-itemize">
what image-data formats are supported,</li><li class="li-itemize">what filename extensions are recognized, and</li><li class="li-itemize">what per-channel depths have been compiled into the <span class="c017">enfuse</span> binary.
</li></ul><p>The only three image formats always supported are</p><ul class="itemize"><li class="li-itemize">
<a id="hevea_general68"></a><span class="c016">JPEG</span>,<p><a id="hevea_general69"></a></p></li><li class="li-itemize"><span class="c016">PNG</span>, and<p><a id="hevea_general70"></a></p></li><li class="li-itemize"><span class="c016">TIFF</span>.
</li></ul><p><a id="hevea_general71"></a>All others are optional. In particular the high-dynamic range (<span class="c016">HDR</span>) format
<span class="c016">OpenEXR</span> only gets compiled if several non-standard libraries are available.</p><p>The provided per-channel depths range from just one, namely &#X201C;8&#XA0;bits unsigned integral&#X201D;
(<span class="c005">uint8</span>) up to seven:</p><ul class="itemize"><li class="li-itemize">
8&#XA0;bits unsigned integral, &#X2018;<span class="c005">uint8</span>&#X2019;</li><li class="li-itemize">16&#XA0;bits unsigned or signed integral, &#X2018;<span class="c005">uint16</span>&#X2019; or &#X2018;<span class="c005">int16</span>&#X2019;</li><li class="li-itemize">32&#XA0;bits unsigned or signed integral, &#X2018;<span class="c005">uint32</span>&#X2019; or &#X2018;<span class="c005">int32</span>&#X2019;</li><li class="li-itemize">32&#XA0;bits floating-point, &#X2018;<span class="c005">float</span>&#X2019;</li><li class="li-itemize">64&#XA0;bits floating-point, &#X2018;<span class="c005">double</span>&#X2019;
</li></ul><p>Table&#XA0;<a href="#tab%3Aimage-format-and-bit-depth">3.1</a> summarizes the channel bit depths of some
prominent image formats.</p><blockquote class="table"><div class="center"><div class="center"><hr class="c029"></div>
<a id="hevea_general72"></a><a id="hevea_general73"></a><a id="hevea_general74"></a><a id="hevea_general75"></a><a id="hevea_general76"></a><a id="hevea_general77"></a><table class="c002 cellpading0"><tr><td class="hbar" colspan=8></td></tr>
<tr><td class="c020">&nbsp;</td><td class="c020">&nbsp;</td><td class="c020">&nbsp;</td><td class="c020" colspan=5>Channel Bit-Depth </td></tr>
<tr><td class="hbar" colspan=8></td></tr>
<tr><td class="c020">Format</td><td class="c020">Mask</td><td class="c020">Profile</td><td class="c020" colspan=3>Integral</td><td class="c020" colspan=2>Floating-Point </td></tr>
<tr><td class="hbar" colspan=8></td></tr>
<tr><td class="c020">&nbsp;</td><td class="c020">&nbsp;</td><td class="c020">&nbsp;</td><td class="c020"><span class="c005">uint8</span></td><td class="c020"><span class="c005">uint16</span></td><td class="c020"><span class="c005">uint32</span></td><td class="c020"><span class="c005">float</span></td><td class="c020"><span class="c005">double</span> </td></tr>
<tr><td class="hbar" colspan=8></td></tr>
<tr><td class="c022"><span class="c016">JPEG</span></td><td class="c020">&#X2212;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2212;</td><td class="c020">&#X2212;</td><td class="c020">&#X2212;</td><td class="c020">&#X2212;</td></tr>
<tr><td class="c022"> <span class="c016">PNG</span></td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2212;</td><td class="c020">&#X2212;</td><td class="c020">&#X2212;</td></tr>
<tr><td class="c022"> <span class="c016">PNM</span></td><td class="c020">?</td><td class="c020">&#X2212;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2212;</td><td class="c020">&#X2212;</td></tr>
<tr><td class="c022"> [<span class="c016">V</span>]<span class="c016">TIFF</span></td><td class="c020"> &#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td><td class="c020">&#X2022;</td></tr>
</table>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 3.1: <a id="tab:image-format-and-bit-depth"></a>Bit-depths of selected image formats. These are the maximum capabilities of the
formats themselves, not <span class="c008">Enfuse</span>&#X2019;s. The &#X201C;Mask&#X201D;-column indicates whether the format
supports an image mask (alpha-channel), see also
Chapter&#XA0;<a href="#sec%3Aunderstanding-masks">7</a>. Column&#XA0;&#X201C;Profile&#X201D; shows whether the
image format allows for <span class="c016">ICC</span>-profiles to be included; see also
Chapter&#XA0;<a href="#sec%3Acolor-spaces">6</a>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><!--TOC subsubsection id="sec:name-of-builder" Builder-->
<h4 class="subsubsection" id="sec:name-of-builder"><a id="hevea_general78"></a><a id="hevea_general79"></a><a id="hevea_general80"></a><a id="hevea_general81"></a><a id="hevea_general82"></a><a id="hevea_option7"></a>Name Of Builder</h4><!--SEC END --><p>During building each <span class="c017">enfuse</span> is automatically signed to give the users an extra level of
confidence that it was constructed by someone that they can trust to get it right. Access this
signature with &#X2018;<span class="c005">--show-signature</span>&#X2019; and <span class="c017">enfuse</span> will print something like</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
Compiled on sgctrl03 by Walter Harriman on Wed, Dec 22 2004, 16:07:22 GMT-7.
</span></div></dd></dl></div><p>where machine name, person, and date-time depend on the
build.</p><!--TOC subsubsection id="sec:compiler-and-libraries" Compiler And Libraries-->
<h4 class="subsubsection" id="sec:compiler-and-libraries"><a id="hevea_general83"></a><a id="hevea_general84"></a><a id="hevea_general85"></a><a id="hevea_general86"></a><a id="hevea_option8"></a>Compiler And Libraries Used To Build</h4><!--SEC END --><p>Sometimes <span class="c017">enfuse</span> refuses to start or runs into trouble because the libraries supplied to it
do not match the ones it was compiled with. Option&#XA0;<span class="c005">--show-software-components</span> can be helpful to diagnose the problem in such cases, because it shows
the version information of <span class="c008">Enfuse</span>&#X2019;s most important libraries as they have identified themselves
during compile-time.</p><p><a id="hevea_general87"></a>Furthermore the report reveals the compiler used to build <span class="c017">enfuse</span> along with the most
important compiler extensions like, for example, <span class="c016">OpenMP</span>.
Example&#XA0;<a href="#ex%3Ashow-software-components">3.3.3</a> shows such a report.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse --show-software-components <br>
 Compiler <br>
 &#XA0;&#XA0;g++ 4.9.1 <br>
 &#XA0;&#XA0;implementing OpenMP standard of 2013-7 <br>
 &#XA0;&#XA0;implementing Cilk version 2.0 <br>
 &#XA0;&#XA0;&#XA0;&#XA0;without support of "_Cilk_for" keyword <br>
 &#XA0; <br>
 Libraries <br>
 &#XA0;&#XA0;GSL:&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;1.15 <br>
 &#XA0;&#XA0;Little CMS:&#XA0;2.7.0 <br>
 &#XA0;&#XA0;Vigra:&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;1.10.0
</span></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 3.3.3: <a id="ex:show-software-components"></a>Output of <span class="c017">enfuse</span> when asked to reveal the compiler that was used to build it
along with the libraries it was linked against.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><!--TOC subsection id="sec:console-messages" 3.3.2&#XA0;&#XA0;Console Messages-->
<h3 class="subsection" id="sec:console-messages">3.3.2&#XA0;&#XA0;<a id="hevea_general88"></a><a id="hevea_general89"></a>Console Messages</h3><!--SEC END --><p><span class="c008">Enfuse</span> is meant to read multiple images, &#X201C;montage&#X201D; them together, and finally write a single
output image. So, any console messages either serve the entertainment desire of the user or
indicate problems.</p><p><a id="hevea_general90"></a>When <span class="c017">enfuse</span> is instructed to only show information about its configuration (see
Section&#XA0;<a href="#sec%3Ainformation-options">4.2.6</a>) the text goes to Standard&#XA0;Output. <span class="c017">enfuse</span>
sends error and warning messages to Standard&#XA0;Error. The messages follow a fixed format.</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse: </span>[<span class="c005"><span class="c013">CATEGORY</span>:</span>]<span class="c006"> MESSAGE
</span></div></dd></dl></div><p>where <span class="c013">CATEGORY</span> is</p><dl class="list"><dt class="dt-list">

<a id="hevea_general91"></a><span class="c005">error:</span></dt><dd class="dd-list"> A serious problem that sooner or later will lead to a program stop. The result
will definitely not be what the user wants &#X2013; including no output image at all, as <span class="c017">enfuse</span>
deletes corrupted or incomplete output images.<p>Most messages drop category name&#XA0;&#X2018;<span class="c005">error</span>&#X2019; and plainly write <span class="c013">MESSAGE</span>:</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enblend: input image "1.tif" does not have an alpha channel
</span></div></dd></dl></div><p><a id="hevea_general92"></a><a id="hevea_general93"></a>If an &#X2018;<span class="c005">error</span>&#X2019; actually leads to a premature termination of <span class="c017">enfuse</span>, it returns code&#XA0;1
to the operating system. On successful termination the return code is 0.</p><p><a id="hevea_general94"></a></p></dd><dt class="dt-list"><span class="c005">warning:</span></dt><dd class="dd-list"> A problem that forces <span class="c017">enfuse</span> to take an alternate execution path or drop some
assumptions about the input.<p><a id="hevea_general95"></a></p></dd><dt class="dt-list"><span class="c005">info:</span></dt><dd class="dd-list"> No problem, just a &#X201C;nice-to-know&#X201D; information for the user.<p><a id="hevea_general96"></a></p></dd><dt class="dt-list"><span class="c005">note:</span></dt><dd class="dd-list"> Not a standalone <span class="c013">CATEGORY</span>, but an additional explanation that sometimes
trails messages in one of the above categories. Errors, warnings and infos tell the causes,
notes inform about the actions taken by <span class="c017">enfuse</span>. Here is an example, where a <span class="c005">warning</span>
gets augmented by a <span class="c005">note</span>:<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enblend: warning: input images too small for coarse mask <br>
 enblend: note: switching to fine mask
</span></div></dd></dl></div><p><a id="hevea_general97"></a></p></dd><dt class="dt-list"><span class="c005">timing:</span></dt><dd class="dd-list"> A measurement of the execution duration and thus a sub-category of
<span class="c005">info</span>.
</dd></dl><p>Sadly, not all messages can be sorted in the category scheme.</p><dl class="list"><dt class="dt-list">

<a id="hevea_general98"></a>Debug Messages:</dt><dd class="dd-list"> Though debug messages generally come devoid of a specific form the more
civilized of them start each line with a plus sign&#XA0;&#X2018;<span class="c005">+</span>&#X2019;. Example:<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
+ checkpoint: leaving channel width alone
</span></div></dd></dl></div><p><a id="hevea_general99"></a></p></dd><dt class="dt-list">Foreign Sources:</dt><dd class="dd-list"> <span class="c017">enfuse</span> depends on various foreign software components that issue
their own messages. We try to catch them and press them in our category scheme, but some of
them invariably slip through. The most prominent members of this rogue fraction are the
notices of <a href="https://ukoethe.github.io/vigra/"><span class="c016">VIGRA</span></a> as e.g.<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse: an exception occurred <br>
 enfuse: Precondition violation! <br>
 &#X2026;</span></div></dd></dl></div><p>and <a href="http://www.remotesensing.org/libtiff/">LibTIFF</a>:</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
TIFFReadDirectory: Warning, img0001.tif: wrong data type 1 for "RichTIFFIPTC"; tag ignored.
</span></div></dd></dl></div><p><a id="hevea_general100"></a></p></dd><dt class="dt-list">&#X201C;Should-Never-Happen&#X201D;:</dt><dd class="dd-list"> An internal consistency check fails or a cautious routine
detects a problem with its parameters and racks up the digital equivalent of a nervous
breakdown. Sometimes these messages end in the word&#XA0;&#X2018;<span class="c005">Aborted</span>&#X2019;.<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
terminate called after throwing an instance of &#X2019;&#X2026;&#X2019; <br>
 what(): &#X2026;<br>
 Aborted
</span></div></dd></dl></div><p>If the installation of <span class="c017">enfuse</span> is correct, this type of message may warrant a bug report as
explained in Appendix&#XA0;<a href="#sec%3Abug-reports">B</a>.
</p></dd></dl><p>In very unfortunate circumstances <span class="c008">Enfuse</span> quits because of a problem, but does not show any
message. The output file then either does not exist or it is broken. One known reason are
out-of-memory situations, where the process needs additional memory, but cannot allocate it and
while terminating needs even more memory so that the operating system wipes it out completely
wherever it then happens to be in its execution path.</p><!--TOC subsection id="sec:environment-variables" 3.3.3&#XA0;&#XA0;Environment Variables-->
<h3 class="subsection" id="sec:environment-variables">3.3.3&#XA0;&#XA0;<a id="hevea_general101"></a><a id="hevea_general102"></a><a id="hevea_general103"></a>Environment Variables</h3><!--SEC END --><p>A small set of environment variables influences the execution of <span class="c017">enfuse</span>. All of them depend on
<span class="c017">enfuse</span> having been compiled with certain features. The hint &#X201C;(direct)&#X201D; indicates genuine
variables in <span class="c017">enfuse</span>, whereas &#X201C;(implicit)&#X201D; denotes variables that control libraries that are
linked with <span class="c017">enfuse</span>.</p><dl class="list"><dt class="dt-list">

<a id="hevea_general104"></a>


<a id="hevea_general105"></a><a id="hevea_general106"></a><span class="c005">CILK_NWORKERS</span>&#XA0;&#XA0;(implicit)&#XA0;&#XA0;<span class="c001"><span class="c016">Cilk</span>-enabled versions only.</span></dt><dd class="dd-list">This environment variable works for <a href="https://www.cilkplus.org/">CilkPlus</a> as
<span class="c005">OMP_NUM_THREADS</span> (see below) does for <span class="c016">OpenMP</span>. It can be helpful for load
balancing.<p><a id="hevea_general107"></a><a id="hevea_general108"></a><a id="hevea_general109"></a></p></dd><dt class="dt-list"><span class="c005">OMP_DYNAMIC</span>&#XA0;&#XA0;(implicit)&#XA0;&#XA0;<span class="c001"><span class="c016">OpenMP</span>-enabled versions only.</span></dt><dd class="dd-list">Control whether the <a href="http://openmp.org/wp/"><span class="c016">OpenMP</span></a> sub-system should parallelize nested
parallel regions. This environment variable will only have an effect is the <span class="c016">OpenMP</span>
sub-system is capable of dynamic adjustment of the number of threads (see explanations in
Section&#XA0;<a href="#sec%3Acompiled-in-features">3.3.1</a>).<div class="geeknote"><blockquote class="quotation"><span class="c015">
The important hot spots in the source code override the value of
<span class="c005">OMP_DYNAMIC</span>.
</span></blockquote></div><p><a id="hevea_general110"></a><a id="hevea_general111"></a><a id="hevea_general112"></a></p></dd><dt class="dt-list"><span class="c005">OMP_NUM_THREADS</span>&#XA0;&#XA0;(implicit)&#XA0;&#XA0;<span class="c001"><span class="c016">OpenMP</span>-enabled versions only.</span></dt><dd class="dd-list">Control &#X2013; which typically means: reduce &#X2013; the number of threads under supervision of the
<a href="http://openmp.org/wp/"><span class="c016">OpenMP</span></a> sub-system. By default <span class="c017">enfuse</span> uses as many
<span class="c016">OpenMP</span>-threads as there are <span class="c016">CPU</span>s. Use this variable for example to
free some <span class="c016">CPU</span>s for other processes than <span class="c017">enfuse</span>.<p><a id="hevea_general113"></a><a id="hevea_general114"></a></p></dd><dt class="dt-list"><span class="c005">TMPDIR</span>&#XA0;&#XA0;(direct)&#XA0;&#XA0;<span class="c001">&#X2018;<span class="c005">mmap_view</span>&#X2019;-branch only.</span></dt><dd class="dd-list"><span class="c005">TMPDIR</span> determines the directory and thus the drive where <span class="c017">enfuse</span> stores all
intermediate images. The best choice follows the same rules as for a swap-drive: prefer the
fastest disk with the least load.
</dd></dl><!--TOC chapter id="sec:invocation" Chapter&#XA0;4&#XA0;&#XA0;Invocation-->
<h1 class="chapter" id="sec:invocation">Chapter&#XA0;4&#XA0;&#XA0;<a id="hevea_general115"></a><a id="hevea_general116"></a>Invocation</h1><!--SEC END --><!--CUT DEF section  --><p>Fuse the sequence of images <span class="c013">INPUT</span>&#X2026; into a single <span class="c013">IMAGE</span>.</p><p><br>
</p><p><span class="c005">enfuse</span> [<span class="c013">OPTIONS</span>] [<span class="c005">--output=</span><span class="c013">IMAGE</span>]
<span class="c013">INPUT</span>&#X2026;</p><p><br>
</p><p><a id="hevea_general117"></a><a id="hevea_general118"></a><a id="hevea_general119"></a><a id="hevea_general120"></a><span class="c013">INPUT</span> images are either specified literally or via so-called response files
(see Section&#XA0;<a href="#sec%3Aresponse-files">4.4</a>). The latter are an alternative to specifying image
filenames on the command line. If omitted, the name of the output <span class="c013">IMAGE</span> defaults to
&#X27E8;<span class="c011">a.tif</span>&#X27E9;.</p><!--TOC section id="sec:image-requirements" 4.1&#XA0;&#XA0;Image Requirements-->
<h2 class="section" id="sec:image-requirements">4.1&#XA0;&#XA0;<a id="hevea_general121"></a><a id="hevea_general122"></a>Input Image Requirements</h2><!--SEC END --><p>All input images for <span class="c008">Enfuse</span> must comply with the following requirements.</p><ul class="itemize"><li class="li-itemize">
The images overlap.</li><li class="li-itemize">The images agree on their number of bits-per-channel, i.e., their &#X201C;depth&#X201D;:
<ul class="itemize"><li class="li-itemize">
<span class="c005">uint8</span>,
</li><li class="li-itemize"><span class="c005">uint16</span>,
</li><li class="li-itemize"><span class="c005">float</span>,
</li><li class="li-itemize">etc.
</li></ul><p>See option&#XA0;<span class="c005">--depth</span> below for an explanation of different (output) depths.</p></li><li class="li-itemize"><span class="c008">Enfuse</span> understands the images&#X2019; filename extensions as well as their file formats.<p>You can check the supported extensions and formats by calling <span class="c008">Enfuse</span> with
option&#XA0;<span class="c005">--show-image-formats</span>.
</p></li></ul><p>Moreover, there are some good practices, which are not enforced by the application, but almost
certainly deliver superior results.</p><ul class="itemize"><li class="li-itemize">
Either all files lack an <span class="c016">ICC</span> profile, or all images are supplied with the
<em>same</em> <span class="c016">ICC</span> profile.</li><li class="li-itemize">If the images&#X2019; meta-data contains resolution information (&#X201C;<span class="c016">DPI</span>&#X201D;), it is the same
for all pictures.
</li></ul><!--TOC section id="sec:options" 4.2&#XA0;&#XA0;Command-Line Options-->
<h2 class="section" id="sec:options">4.2&#XA0;&#XA0;<a id="hevea_general123"></a>Command-Line Options</h2><!--SEC END --><p>In this section we group the options as the command-line help
</p><div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse --help
</span></div></div><p>
does and sort them alphabetically within their groups. For an alphabetic list of <em>all</em>
options consult the <a href="#sec%3Aoption-index">Option Index</a>.</p><p><span class="c017">enfuse</span> accepts arguments to any option in uppercase as well as in lowercase letters. For
example, &#X2018;<span class="c005">deflate</span>&#X2019;, &#X2018;<span class="c005">Deflate</span>&#X2019; and &#X2018;<span class="c005">DEFLATE</span>&#X2019; as arguments to the
<span class="c005">--compression</span>&#XA0;option described below all instruct <span class="c017">enfuse</span> to use the
<span class="c016">Deflate</span> compression scheme. This manual denotes all arguments in lowercase for
consistency.</p><!--TOC subsection id="sec:common-options" 4.2.1&#XA0;&#XA0;Common Options<sup><span class="c008">c</span></sup>-->
<h3 class="subsection" id="sec:common-options">4.2.1&#XA0;&#XA0;<a id="hevea_general124"></a><a id="hevea_general125"></a>Common Options<sup><span class="c008">c</span></sup></h3><!--SEC END --><p>Common options control some overall features of <span class="c008">Enfuse</span>. They are called &#X201C;common&#X201D; because they
are used most often. However, in fact, <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> do have these options in common.</p><dl class="list"><dt class="dt-list">

<a id="opt:compression"></a><a id="hevea_option9"></a><a id="hevea_general126"></a><a id="hevea_general127"></a><span class="c005">--compression=<span class="c013">COMPRESSION</span></span></dt><dd class="dd-list">Write a compressed output file. The default is not to compress the output image.<p>Depending on the output file format, <span class="c008">Enfuse</span> accepts different values for
<span class="c013">COMPRESSION</span>.</p><dl class="list"><dt class="dt-list">

<a id="hevea_general128"></a><a id="hevea_general129"></a><span class="c016">JPEG</span> format.</dt><dd class="dd-list">The compression either is a literal integer or a keyword-option combination.<dl class="list"><dt class="dt-list">

<a id="hevea_general130"></a><span class="c006">LEVEL</span></dt><dd class="dd-list">Set <span class="c016">JPEG</span> quality&#XA0;<span class="c013">LEVEL</span>, where <span class="c013">LEVEL</span> is an integer that
ranges from 0&#X2013;100.</dd><dt class="dt-list"><span class="c005">jpeg</span>[<span class="c005">:<span class="c013">LEVEL</span></span>]</dt><dd class="dd-list">Same as above; without the optional argument just switch on standard <span class="c016">JPEG</span>
compression.<p><a id="hevea_general131"></a><a id="hevea_general132"></a></p></dd><dt class="dt-list"><span class="c005">jpeg-arith</span>[<span class="c005">:<span class="c013">LEVEL</span></span>]</dt><dd class="dd-list">Switch on arithmetic <span class="c016">JPEG</span> compression. With optional argument set the
arithmetic compression&#XA0;<span class="c013">LEVEL</span>, where <span class="c013">LEVEL</span> is an integer that ranges
from 0&#X2013;100.
</dd></dl></dd><dt class="dt-list"><span class="c016">TIF</span> format.</dt><dd class="dd-list">Here, <span class="c013">COMPRESSION</span> is one of the keywords:<dl class="list"><dt class="dt-list">

<span class="c005">none</span></dt><dd class="dd-list">Do not compress. This is the default.<p><a id="hevea_general133"></a><a id="hevea_general134"></a></p></dd><dt class="dt-list"><span class="c005">deflate</span></dt><dd class="dd-list">Use the <span class="c016">Deflate</span> compression scheme also called
<span class="c016">ZIP</span>-in-<span class="c016">TIFF</span>. <span class="c016">Deflate</span> is a lossless data compression
algorithm that uses a combination of the <span class="c016">LZ77</span> algorithm and <span class="c016">Huffman</span>
coding.<p><a id="hevea_general135"></a></p></dd><dt class="dt-list"><span class="c005">jpeg</span>[<span class="c005">:<span class="c013">LEVEL</span></span>]</dt><dd class="dd-list">Use <span class="c016">JPEG</span> compression. With optional argument set the
compression&#XA0;<span class="c013">LEVEL</span>, where <span class="c013">LEVEL</span> is an integer that ranges from 0&#X2013;100.<p><a id="hevea_general136"></a><a id="hevea_general137"></a></p></dd><dt class="dt-list"><span class="c005">lzw</span></dt><dd class="dd-list">Use <span class="c016">Lempel</span>-<span class="c016">Ziv</span>-<span class="c016">Welch</span> (<span class="c016">LZW</span>) adaptive
compression scheme. <span class="c016">LZW</span> compression is lossless.<p><a id="hevea_general138"></a><a id="hevea_general139"></a></p></dd><dt class="dt-list"><span class="c005">packbits</span></dt><dd class="dd-list">Use <span class="c016">PackBits</span> compression scheme. <span class="c016">PackBits</span> is a particular
variant of run-length compression; it is lossless.
</dd></dl></dd><dt class="dt-list">Any other format.</dt><dd class="dd-list">Other formats do not accept a <span class="c013">COMPRESSION</span> setting. However, the underlying
<a href="https://ukoethe.github.io/vigra/"><span class="c016">VIGRA</span></a> library automatically compresses <span class="c011">png</span>-files
with the <span class="c016">Deflate</span> method. (<span class="c016">VIGRA</span> is the image manipulation library
upon which <span class="c008">Enfuse</span> is based.)
</dd></dl><p><a id="opt:levels"></a><a id="hevea_option10"></a><a id="hevea_option11"></a><a id="hevea_general140"></a><a id="hevea_general141"></a></p></dd><dt class="dt-list"><span class="c005">-l <span class="c013">LEVELS</span> <br>
--levels=<span class="c013">LEVELS</span></span></dt><dd class="dd-list">Use at most this many <span class="c013">LEVELS</span> for pyramid<sup><a id="text5" href="#note5">1</a></sup> blending if <span class="c013">LEVELS</span>
is positive, or reduce the maximum number of levels used by &#X2212;<span class="c013">LEVELS</span> if
<span class="c013">LEVELS</span> is negative; &#X2018;<span class="c005">auto</span>&#X2019; or &#X2018;<span class="c005">automatic</span>&#X2019; restore the default, which
is to use the maximum possible number of levels for each overlapping region.<p>The number of levels used in a pyramid controls the balance between local and global image
features (contrast, saturation,&#XA0;&#X2026;) in the blended region. Fewer levels emphasize local
features and suppress global ones. The more levels a pyramid has, the more global features
will be taken into account.</p><div class="geeknote"><blockquote class="quotation"><span class="c009"><span class="c013">
As a guideline, remember that each new level works on a linear scale twice as large as the
previous one. So, the zeroth layer, the original image, obviously defines the image at
single-pixel scale, the first level works at two-pixel scale, and generally, the </span><span class="c011">n</span></span><sup><span class="c012">th</span></sup><span class="c009"><span class="c013"> level contains image data at </span>2</span><sup><span class="c012">n</span></sup><span class="c009"><span class="c013">-pixel scale. This is the reason why an image of
</span>width &#XD7; height<span class="c013">&#XA0;pixels cannot be deconstructed into a pyramid of more
than
</span></span><table class="display dcenter"><tr class="c025"><td class="dcell"><span class="c009">&#XA0;&#XA0;&#XA0;&#XA0;&#X230A;&#XA0;log</span><sub><span class="c009">2</span></sub><span class="c009">(min(width,&#XA0;height))&#XA0;&#X230B;&#XA0;&#XA0;levels.
</span></td></tr>
</table><p><span class="c015">If too few levels are used, &#X201C;halos&#X201D; around regions of strong local feature variation can
show up. On the other hand, if too many levels are used, the image might contain too much
global features. Usually, the latter is not a problem, but is highly desired. This is the
reason, why the default is to use as many levels as is possible given the size of the
overlap regions. <span class="c008">Enfuse</span> may still use a smaller number of levels if the geometry of the
overlap region demands.
</span></p></blockquote></div><p>Positive values of <span class="c013">LEVELS</span> limit the maximum number of pyramid levels. Depending on
the size and geometry of the overlap regions this may or may not influence any pyramid.
Negative values of <span class="c013">LEVELS</span> reduce the number of pyramid levels below the maximum no
matter what the actual maximum is and thus always influence all pyramids. Use &#X2018;<span class="c005">auto</span>&#X2019;
or &#X2018;<span class="c005">automatic</span>&#X2019; as <span class="c013">LEVELS</span> to restore the automatic calculation of the maximum
number of levels.</p><p>The valid range of the absolute value of <span class="c013">LEVELS</span> is &#X27E8;1&#X27E9;
to &#X27E8;29&#X27E9;.</p><p><a id="opt:output"></a><a id="hevea_option12"></a><a id="hevea_option13"></a><a id="hevea_general143"></a><a id="hevea_general144"></a><a id="hevea_general145"></a><a id="hevea_general146"></a><a id="hevea_general147"></a></p></dd><dt class="dt-list"><span class="c005">-o <span class="c013">FILE</span> <br>
--output=<span class="c013">FILE</span></span></dt><dd class="dd-list">Place fused output image in <span class="c013">FILE</span>. If &#X2018;<span class="c005">--output</span>&#X2019; is omitted, <span class="c008">Enfuse</span>
writes the resulting image to &#X27E8;<span class="c011">a.tif</span>&#X27E9;.<p><a id="opt:verbose"></a><a id="hevea_option14"></a><a id="hevea_option15"></a><a id="hevea_general148"></a><a id="hevea_general149"></a></p></dd><dt class="dt-list"><span class="c005">-v </span>[<span class="c006">LEVEL</span>]<span class="c005"> <br>
--verbose</span>[<span class="c005">=<span class="c013">LEVEL</span></span>]</dt><dd class="dd-list">Without an argument, increase the verbosity of progress reporting. Giving more
<span class="c005">--verbose</span>&#XA0;options will make <span class="c008">Enfuse</span> more verbose; see
Section&#XA0;<a href="#sec%3Afinding-out-details">3.3.1</a> for an exemplary output. Directly set a
verbosity level with a non-negative integral&#XA0;<span class="c013">LEVEL</span>.
Table&#XA0;<a href="#tab%3Averbosity-levels">4.1</a> shows the messages available at a particular
<span class="c013">LEVEL</span>.<blockquote class="table"><div class="center"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c020">Level</td><td class="c020">Messages </td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c026">0</td><td class="c027">only warnings and errors </td></tr>
<tr><td class="c026"> 1</td><td class="c027">reading and writing of images </td></tr>
<tr><td class="c026"> 2</td><td class="c027">mask generation, pyramid, and blending </td></tr>
<tr><td class="c026"> 3</td><td class="c027">reading of response files, color conversions </td></tr>
<tr><td class="c026"> 4</td><td class="c027">image sizes, bounding boxes and intersection sizes </td></tr>
<tr><td class="c026"> 5</td><td class="c027"><span class="c001"><span class="c008">Enblend</span> only.</span> detailed
information on the optimizer runs </td></tr>
<tr><td class="c026"> 6</td><td class="c027">estimations of required memory in selected processing steps </td></tr>
</table><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.1: <a id="tab:verbosity-levels"></a>Verbosity levels of enfuse; each
level includes all messages of the lower levels.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>The default verbosity level of <span class="c008">Enfuse</span> is
&#X27E8;1&#X27E9;.
</p></dd></dl><!--TOC subsection id="sec:advanced-options" 4.2.2&#XA0;&#XA0;Advanced Options<sup><span class="c008">c</span></sup>-->
<h3 class="subsection" id="sec:advanced-options">4.2.2&#XA0;&#XA0;<a id="hevea_general150"></a><a id="hevea_general151"></a>Advanced Options<sup><span class="c008">c</span></sup></h3><!--SEC END --><p>Advanced options control e.g. the channel depth, color model, and the cropping of the output
image.</p><dl class="list"><dt class="dt-list">

<a id="opt:blend-colorspace"></a><a id="hevea_option16"></a><a id="hevea_general152"></a><a id="hevea_general153"></a><a id="hevea_general154"></a><span class="c005">--blend-colorspace=<span class="c013">COLORSPACE</span></span></dt><dd class="dd-list">Force blending in selected <span class="c013">COLORSPACE</span>. Given well matched images this option should
not change the output image much. However, if <span class="c008">Enfuse</span> must blend vastly different colors (as
e.g. anti-colors) the resulting image heavily depends on the <span class="c013">COLORSPACE</span>.<p>Usually, <span class="c008">Enfuse</span> chooses defaults depending on the input images:</p><ul class="itemize"><li class="li-itemize">
<a id="hevea_general155"></a><a id="hevea_general156"></a><a id="hevea_general157"></a>For grayscale or color input images <em>with</em> <span class="c016">ICC</span>&#XA0;profiles the default is to use
<span class="c016">CIELUV</span>&#XA0;colorspace.<p><a id="hevea_general158"></a><a id="hevea_general159"></a></p></li><li class="li-itemize">Images <em>without</em> color profiles and floating-point images are blended in the trivial
luminance interval (grayscale) or <span class="c016">RGB</span>-color cube by default.
</li></ul><p>On the order of fast to slow computation, <span class="c008">Enfuse</span> supports the following blend colorspaces.</p><dl class="list"><dt class="dt-list">

<span class="c005">identity</span> <br>
<span class="c005">id</span> <br>
<span class="c005">unit</span></dt><dd class="dd-list">Compute blended colors in a na&#XEF;ve way sidestepping any dedicated colorspace.
<ul class="itemize"><li class="li-itemize">
<a id="hevea_general160"></a>Use trivial, 1-dimensional luminance interval (see
Eqn.&#XA0;<a href="#equ%3Atrivial-luminance-blend">6.1</a>) for grayscale images and<p><a id="hevea_general161"></a><a id="hevea_general162"></a></p></li><li class="li-itemize">for color images utilize 3-dimensional <span class="c016">RGB</span>-cube (see
Eqn.&#XA0;<a href="#equ%3Atrivial-rgb-blend">6.6</a>) spanned by the input <span class="c016">ICC</span>&#XA0;profile
or <span class="c016">sRGB</span> if no profiles are present. In the latter case, consider passing
option&#XA0;<a href="#opt%3Afallback-profile"><span class="c005">--fallback-profile</span></a> to force a
different profile than <span class="c016">sRGB</span> upon all input images.
</li></ul><p><a id="hevea_general163"></a><a id="hevea_general164"></a></p></dd><dt class="dt-list"><span class="c005">lab</span> <br>
<span class="c005">cielab</span> <br>
<span class="c005">lstar</span> <br>
<span class="c005">l-star</span></dt><dd class="dd-list">Blend pixels in the <span class="c016">CIEL*a*b*</span> colorspace.<p><a id="hevea_general165"></a><a id="hevea_general166"></a></p></dd><dt class="dt-list"><span class="c005">luv</span> <br>
<span class="c005">cieluv</span></dt><dd class="dd-list">Blend pixels in the <span class="c016">CIEL*u*v*</span> colorspace.<p><a id="hevea_general167"></a><a id="hevea_general168"></a></p></dd><dt class="dt-list"><span class="c005">ciecam</span> <br>
<span class="c005">ciecam02</span> <br>
<span class="c005">jch</span></dt><dd class="dd-list">Blend pixels in the <span class="c016">CIECAM02</span> colorspace.
</dd></dl><p><a id="opt-ciecam"></a><a id="hevea_option17"></a><a id="hevea_option18"></a></p></dd><dt class="dt-list"><span class="c005">-c <br>
--ciecam</span></dt><dd class="dd-list">Deprecated. Use &#X2018;<span class="c005">--blend-colorspace=ciecam</span>&#X2019; instead. To emulate the negated
option&#XA0;<span class="c005">--no-ciecam</span><a id="hevea_option19"></a> use <span class="c005">--blend-colorspace=identity</span>.<p><a id="opt:depth"></a><a id="hevea_option20"></a><a id="hevea_option21"></a><a id="hevea_general169"></a><a id="hevea_general170"></a><a id="hevea_general171"></a></p></dd><dt class="dt-list"><span class="c005">-d <span class="c013">DEPTH</span> <br>
--depth=<span class="c013">DEPTH</span></span></dt><dd class="dd-list">Force the number of bits per channel and the numeric format of the output image, this is, the
<span class="c013">DEPTH</span>. The number of bits per channel is also known as &#X201C;channel width&#X201D; or
&#X201C;channel depth&#X201D;.<p><a id="hevea_general172"></a><span class="c008">Enfuse</span> always uses a smart way to change the channel depth to assure highest image quality at
the expense of memory, whether requantization is implicit because of the output format or
explicit through option&#XA0;<span class="c005">--depth</span>.</p><ul class="itemize"><li class="li-itemize">
If the output-channel depth is larger than the input-channel depth of the input images, the
input images&#X2019; channels are widened to the output channel depth immediately after loading,
that is, as soon as possible. <span class="c008">Enfuse</span> then performs all blending operations at the
output-channel depth, thereby preserving minute color details which can appear in the
blending areas.</li><li class="li-itemize">If the output-channel depth is smaller than the input-channel depth of the input images, the
output image&#X2019;s channels are narrowed only right before it is written to the output
<span class="c013">FILE</span>, that is, as late as possible. Thus the data benefits from the wider input
channels for the longest time.
</li></ul><p>All <span class="c013">DEPTH</span> specifications are valid in lowercase as well as uppercase letters. For
integer format, use</p><dl class="list"><dt class="dt-list">

<span class="c005">8</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">uint8</span></dt><dd class="dd-list">Unsigned 8&#XA0;bit; range: 0&#X2026;255</dd><dt class="dt-list"><span class="c005">int16</span></dt><dd class="dd-list">Signed 16&#XA0;bit; range: &#X2212;32768&#X2026;32767</dd><dt class="dt-list"><span class="c005">16</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">uint16</span></dt><dd class="dd-list">Unsigned 16&#XA0;bit; range: 0&#X2026;65535</dd><dt class="dt-list"><span class="c005">int32</span></dt><dd class="dd-list">Signed 32&#XA0;bit; range: &#X2212;2147483648&#X2026;2147483647</dd><dt class="dt-list"><span class="c005">32</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">uint32</span></dt><dd class="dd-list">Unsigned 32&#XA0;bit; range: 0&#X2026;4294967295
</dd></dl><p>For floating-point format, use</p><dl class="list"><dt class="dt-list">

<a id="hevea_general173"></a><a id="hevea_general174"></a><span class="c005">r32</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">real32</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">float</span></dt><dd class="dd-list"><span class="c016">IEEE754</span> single precision floating-point, 32&#XA0;bit wide, 24&#XA0;bit significant;<ul class="itemize"><li class="li-itemize">
Minimum normalized value: 1.2&#XB7; 10<sup>&#X2212;38</sup>
</li><li class="li-itemize">Epsilon: 1.2&#XB7; 10<sup>&#X2212;7</sup>
</li><li class="li-itemize">Maximum finite value: 3.4&#XB7; 10<sup>38</sup>
</li></ul><p><a id="hevea_general175"></a><a id="hevea_general176"></a></p></dd><dt class="dt-list"><span class="c005">r64</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">real64</span></dt><dd class="dd-list"></dd><dt class="dt-list"><span class="c005">double</span></dt><dd class="dd-list"><span class="c016">IEEE754</span> double precision floating-point, 64&#XA0;bit wide, 53&#XA0;bit significant;<ul class="itemize"><li class="li-itemize">
Minimum normalized value: 2.2&#XB7; 10<sup>&#X2212;308</sup>
</li><li class="li-itemize">Epsilon: 2.2&#XB7; 10<sup>&#X2212;16</sup>
</li><li class="li-itemize">Maximum finite value: 1.8&#XB7; 10<sup>308</sup>
</li></ul></dd></dl><p>If the requested <span class="c013">DEPTH</span> is not supported by the output file format, <span class="c008">Enfuse</span> warns and
chooses the <span class="c013">DEPTH</span> that matches best.</p><p><a id="hevea_general177"></a></p><div class="restrictedmaterial"><span class="c001">Versions with <span class="c016">OpenEXR</span> read/write support only.</span><blockquote class="quotation">
The <span class="c016">OpenEXR</span> data format is treated as <span class="c016">IEEE754</span>&#XA0;float
internally. Externally, on disk, <span class="c016">OpenEXR</span> data is represented by &#X201C;half&#X201D;
precision floating-point numbers.<p><a id="hevea_general178"></a><a id="hevea_general179"></a><a href="http://www.openexr.com/about.html#features"><span class="c016">OpenEXR</span></a> half precision floating-point, 16&#XA0;bit wide,
10&#XA0;bit significant;</p><ul class="itemize"><li class="li-itemize">
Minimum normalized value: 9.3&#XB7; 10<sup>&#X2212;10</sup>
</li><li class="li-itemize">Epsilon: 2.0&#XB7; 10<sup>&#X2212;3</sup>
</li><li class="li-itemize">Maximum finite value: 4.3&#XB7; 10<sup>9</sup>
</li></ul></blockquote></div><p><a id="opt:f"></a><a id="hevea_option22"></a><a id="hevea_general180"></a><a id="hevea_general181"></a></p></dd><dt class="dt-list"><span class="c005">-f <span class="c013">WIDTH</span>x<span class="c013">HEIGHT</span></span>[<span class="c005">+x<span class="c013">XOFFSET</span>+y<span class="c013">YOFFSET</span></span>]</dt><dd class="dd-list">Ensure that the minimum &#X201C;canvas&#X201D; size of the output image is at least
<span class="c013">WIDTH</span>&#XD7;<span class="c013">HEIGHT</span>. Optionally specify the <span class="c013">XOFFSET</span> and
<span class="c013">YOFFSET</span> of the canvas, too.<p><a id="hevea_program6"></a>This option only is useful when the input images are cropped <span class="c016">TIFF</span> files, such as
those produced by <span class="c017">nona</span>.</p><p>Note that option&#XA0;<span class="c005">-f</span> neither rescales the output image, nor shrinks the canvas size
below the minimum size occupied by the union of all input images.</p><p><a id="opt:g"></a><a id="hevea_option23"></a><a id="hevea_general182"></a><a id="hevea_general183"></a><a id="hevea_general184"></a></p></dd><dt class="dt-list"><span class="c005">-g</span></dt><dd class="dd-list">
Save alpha channel as &#X201C;associated&#X201D;. See the
<a href="http://www.awaresystems.be/imaging/tiff/tifftags/extrasamples.html"><span class="c016">TIFF</span> documentation</a> for an explanation.<p><a id="hevea_program7"></a><a id="hevea_program8"></a><span class="c008">The Gimp</span> before version&#XA0;2.0 and <span class="c008">CinePaint</span> (see
Appendix&#XA0;<a href="#sec%3Ahelpful-programs">A</a>) exhibit unusual behavior when loading images
with unassociated alpha channels. Use option&#XA0;<span class="c005">-g</span> to work around this problem. With
this flag <span class="c008">Enfuse</span> will create the output image with the &#X201C;associated alpha tag&#X201D; set, even
though the image is really unassociated alpha.</p><p><a id="opt:wrap"></a><a id="hevea_option24"></a><a id="hevea_option25"></a><a id="hevea_general185"></a></p></dd><dt class="dt-list"><span class="c005">-w </span>[<span class="c006">MODE</span>]<span class="c005"> <br>
--wrap</span>[<span class="c005">=<span class="c013">MODE</span></span>]</dt><dd class="dd-list">Blend around the boundaries of the panorama, or &#X201C;wrap around&#X201D;.<p>As this option significantly increases memory usage and computation time only use it, if the
panorama will be</p><ul class="itemize"><li class="li-itemize">
consulted for any kind measurement, this is, all boundaries must match as accurately as
possible, or</li><li class="li-itemize">printed out and the boundaries glued together, or<p><a id="hevea_general186"></a><a id="hevea_general187"></a></p></li><li class="li-itemize">fed into a virtual reality&#XA0;(<span class="c016">VR</span>) generator, which creates a seamless environment.
</li></ul><p>Otherwise, always avoid this option!</p><p>With this option <span class="c008">Enfuse</span> treats the set of input images (panorama) of width&#XA0;<span class="c011">w</span> and height&#XA0;<span class="c011">h</span>
as an infinite data structure, where each pixel&#XA0;<span class="c011">P</span>(<span class="c011">x</span>, <span class="c011">y</span>) of the input images represents the
set of pixels&#XA0;<span class="c011">S</span><sub><span class="c011">P</span></sub>(<span class="c011">x</span>, <span class="c011">y</span>).</p><div class="geeknote"><blockquote class="quotation"><span class="c009">
</span><a id="hevea_general188"></a><a id="hevea_general189"></a><span class="c015">Solid-state physicists will be reminded of the
</span><a href="https://en.wikipedia.org/wiki/Born-von_Karman_boundary_condition"><span class="c009"><span class="c016">Born</span><span class="c013">-</span><span class="c016">von&#XA0;K&#XE1;rm&#XE1;n</span><span class="c013"> boundary
condition</span></span></a><span class="c015">.
</span></blockquote></div><p><span class="c013">MODE</span> takes the following values:</p><dl class="list"><dt class="dt-list">

<span class="c005">none <br>
open</span></dt><dd class="dd-list">This is a &#X201C;no-op&#X201D;; it has the same effect as not giving &#X2018;<span class="c005">--wrap</span>&#X2019; at all. The set
of input images is considered open at its boundaries.</dd><dt class="dt-list"><span class="c005">horizontal</span></dt><dd class="dd-list">Wrap around horizontally:
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">S</span><sub><span class="c011">P</span></sub>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;=&#XA0;{<span class="c011">P</span>(<span class="c011">x</span>&#XA0;+&#XA0;<span class="c011">m</span>&#XA0;<span class="c011">w</span>,&#XA0;<span class="c011">y</span>):&#XA0;<span class="c011">m</span>&#XA0;&#X2208;&#XA0;<span class="c011">Z</span>}.
</td></tr>
</table><p><a id="hevea_general190"></a><a id="hevea_general191"></a>This is useful for 360<sup>&#X2218;</sup> horizontal panoramas as it eliminates the left and
right borders.</p></dd><dt class="dt-list"><span class="c005">vertical</span></dt><dd class="dd-list">Wrap around vertically:
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">S</span><sub><span class="c011">P</span></sub>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;=&#XA0;{<span class="c011">P</span>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>&#XA0;+&#XA0;<span class="c011">n</span>&#XA0;<span class="c011">h</span>):&#XA0;<span class="c011">n</span>&#XA0;&#X2208;&#XA0;<span class="c011">Z</span>}.
</td></tr>
</table><p><a id="hevea_general192"></a><a id="hevea_general193"></a>This is useful for 360<sup>&#X2218;</sup> vertical panoramas as it eliminates the top and
bottom borders.</p></dd><dt class="dt-list"><span class="c005">both <br>
horizontal+vertical
<br>
vertical+horizontal</span></dt><dd class="dd-list">Wrap around both horizontally and vertically:
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">S</span><sub><span class="c011">P</span></sub>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;=&#XA0;{<span class="c011">P</span>(<span class="c011">x</span>&#XA0;+&#XA0;<span class="c011">m</span>&#XA0;<span class="c011">w</span>,&#XA0;<span class="c011">y</span>&#XA0;+&#XA0;<span class="c011">n</span>&#XA0;<span class="c011">h</span>):&#XA0;<span class="c011">m</span>,&#XA0;<span class="c011">n</span>&#XA0;&#X2208;&#XA0;<span class="c011">Z</span>}.
</td></tr>
</table><p>In this mode, both left and right borders, as well as top and bottom borders, are
eliminated.
</p></dd></dl><p>Specifying &#X2018;<span class="c005">--wrap</span>&#X2019; without <span class="c013">MODE</span> selects horizontal
wrapping.
</p></dd></dl><!--TOC subsection id="sec:fusion-options" 4.2.3&#XA0;&#XA0;Fusion Options-->
<h3 class="subsection" id="sec:fusion-options">4.2.3&#XA0;&#XA0;<a id="hevea_general194"></a><a id="hevea_general195"></a>Fusion Options</h3><!--SEC END --><p>Fusion options define the proportion to which each input image&#X2019;s pixel contributes to the output
image.</p><dl class="list"><dt class="dt-list">

<a id="opt:contrast-weight"></a><a id="hevea_option26"></a><a id="hevea_general196"></a><a id="hevea_general197"></a><a id="hevea_general198"></a><span class="c005">--contrast-weight=<span class="c013">WEIGHT</span></span></dt><dd class="dd-list">Sets the relative <span class="c013">WEIGHT</span> of high local-contrast pixels.<p>Valid range: &#X27E8;0&#X27E9; &#X2264; <span class="c013">WEIGHT</span> &#X2264;
&#X27E8;1&#X27E9;, default: &#X27E8;0.0&#X27E9;.</p><p>See Section&#XA0;<a href="#sec%3Alocal-contrast-weighting">5.4</a> and <a href="#sec%3Aexpert-options">4.2.4</a>,
option&#XA0;<a href="#opt%3Acontrast-window-size"><span class="c005">--contrast-window-size</span></a>.</p><p><a id="opt:entropy-weight"></a><a id="hevea_option27"></a><a id="hevea_general199"></a><a id="hevea_general200"></a></p></dd><dt class="dt-list"><span class="c005">--entropy-weight=<span class="c013">WEIGHT</span></span></dt><dd class="dd-list">Sets the relative <span class="c013">WEIGHT</span> of high local entropy pixels.<p>Valid range: &#X27E8;0&#X27E9; &#X2264; <span class="c013">WEIGHT</span> &#X2264;
&#X27E8;1&#X27E9;, default: &#X27E8;0.0&#X27E9;.</p><p>See Section&#XA0;<a href="#sec%3Aexpert-options">4.2.4</a> and <a href="#sec%3Alocal-entropy-weighting">5.5</a>,
options&#XA0;<a href="#opt%3Aentropy-window-size"><span class="c005">--entropy-window-size</span></a> and
<a href="#opt%3Aentropy-cutoff"><span class="c005">--entropy-cutoff</span></a>.</p><p><a id="opt:exposure-optimum"></a><a id="hevea_option28"></a><a id="hevea_general201"></a><a id="hevea_general202"></a></p></dd><dt class="dt-list"><span class="c005">--exposure-optimum=<span class="c013">OPTIMUM</span></span></dt><dd class="dd-list">Determine at what normalized exposure value the <span class="c013">OPTIMUM</span> exposure of the input images
is. This is, set the position of the maximum of the exposure weight curve. Use this option
to fine-tune exposure weighting.<p>Valid range: &#X27E8;0&#X27E9; &#X2264; <span class="c013">OPTIMUM</span> &#X2264;
&#X27E8;1&#X27E9;, default: &#X27E8;0.5&#X27E9;.</p><p><a id="opt:exposure-weight"></a><a id="hevea_option29"></a><a id="hevea_general203"></a><a id="hevea_general204"></a></p></dd><dt class="dt-list"><span class="c005">--exposure-weight=<span class="c013">WEIGHT</span></span></dt><dd class="dd-list">Set the relative <span class="c013">WEIGHT</span> of the &#X201C;well-exposedness&#X201D; criterion as defined by the
chosen exposure weight function (see option&#XA0;<a href="#opt%3Aexposure-weight-function"><span class="c005">--exposure-weight-function</span></a>
below). Increasing this weight relative to the others will make well-exposed pixels
contribute more to the final output.<p>Valid range: &#X27E8;0&#X27E9; &#X2264;
<span class="c013">WEIGHT</span> &#X2264; &#X27E8;1&#X27E9;, default:
&#X27E8;1.0&#X27E9;.</p><p>See Section&#XA0;<a href="#sec%3Aexposure-weighting">5.2</a>.</p><p><a id="opt:exposure-width"></a><a id="hevea_option30"></a><a id="hevea_general205"></a><a id="hevea_general206"></a><a id="hevea_general207"></a></p></dd><dt class="dt-list"><span class="c005">--exposure-width=<span class="c013">WIDTH</span></span></dt><dd class="dd-list">Set the characteristic <span class="c013">WIDTH</span> (<span class="c016">FWHM</span>) of the exposure weight function. Low
numbers give less weight to pixels that are far from the user-defined optimum
(option&#XA0;<a href="#opt%3Aexposure-optimum"><span class="c005">--exposure-optimum</span></a>) and vice versa. Use
this option to fine-tune exposure weighting (See Section&#XA0;<a href="#sec%3Aexposure-weighting">5.2</a>).<p>Valid range: <span class="c013">WIDTH</span> &gt; &#X27E8;0&#X27E9;, default:
&#X27E8;0.2&#X27E9;.</p><p><a id="opt:hard-mask"></a><a id="hevea_option31"></a><a id="hevea_general208"></a><a id="hevea_general209"></a></p></dd><dt class="dt-list"><span class="c005">--hard-mask</span></dt><dd class="dd-list">Force hard blend masks on the finest scale. This is the opposite flag of
option&#XA0;<a href="#opt%3Asoft-mask"><span class="c005">--soft-mask</span></a>.<p>This blending mode avoids averaging of fine details (only) at the expense of increasing the
noise. However it considerably improves the sharpness of focus stacks. Blending with hard
masks has only proven useful with focus stacks.</p><p>See also Section&#XA0;<a href="#sec%3Afusion-options">4.2.3</a> and
options&#XA0;<a href="#opt%3Acontrast-weight"><span class="c005">--contrast-weight</span></a> as well as
<a href="#opt%3Acontrast-window-size"><span class="c005">--contrast-window-size</span></a> above.</p><p><a id="opt:saturation-weight"></a><a id="hevea_option32"></a><a id="hevea_general210"></a><a id="hevea_general211"></a></p></dd><dt class="dt-list"><span class="c005">--saturation-weight=<span class="c013">WEIGHT</span></span></dt><dd class="dd-list">Set the relative <span class="c013">WEIGHT</span> of high-saturation pixels. Increasing this weight makes
pixels with high saturation contribute more to the final output.<p>Valid range: &#X27E8;0&#X27E9; &#X2264; <span class="c013">WEIGHT</span> &#X2264;
&#X27E8;1&#X27E9;, default: &#X27E8;0.2&#X27E9;.</p><p>Saturation weighting is only defined for color images; see
Section&#XA0;<a href="#sec%3Asaturation-weighting">5.3</a>.</p><p><a id="opt:soft-mask"></a><a id="hevea_option33"></a><a id="hevea_general212"></a><a id="hevea_general213"></a></p></dd><dt class="dt-list"><span class="c005">--soft-mask</span></dt><dd class="dd-list">Consider all masks when fusing. This is the default.
</dd></dl><!--TOC subsection id="sec:expert-options" 4.2.4&#XA0;&#XA0;Expert Options-->
<h3 class="subsection" id="sec:expert-options">4.2.4&#XA0;&#XA0;<a id="hevea_general214"></a><a id="hevea_general215"></a>Expert Options</h3><!--SEC END --><p>Control inner workings of <span class="c008">Enfuse</span> and the reading/writing of weight masks.
</p><dl class="list"><dt class="dt-list">

<a id="opt:fallback-profile"></a><a id="hevea_option34"></a><a id="hevea_general216"></a><a id="hevea_general217"></a><a id="hevea_general218"></a><a id="hevea_general219"></a><span class="c005">--fallback-profile=<span class="c013">PROFILE-FILENAME</span></span></dt><dd class="dd-list">Use the <span class="c016">ICC</span> profile in <span class="c013">PROFILE-FILENAME</span> instead of the default
<span class="c016">sRGB</span>. This option only is effective if the input images come <em>without</em> color
profiles <em>and</em> blending is not performed in the trivial luminance interval or
<span class="c016">RGB</span>-cube.<p>Compare option&#XA0;<a href="#opt%3Ablend-colorspace"><span class="c005">--blend-colorspace</span></a> and
Chapter&#XA0;<a href="#sec%3Acolor-profiles">6.3</a> on color profiles.</p><p><a id="opt:layer-selector"></a><a id="hevea_option35"></a><a id="hevea_general220"></a></p></dd><dt class="dt-list"><span class="c005">--layer-selector=<span class="c013">ALGORITHM</span></span></dt><dd class="dd-list">Override the standard layer selector algorithm&#XA0;&#X2018;&#X27E8;<span class="c005">all-layers</span>&#X27E9;&#X2019;.<p><span class="c008">Enfuse</span> offers the following algorithms:</p><dl class="list"><dt class="dt-list">

<a id="hevea_general221"></a><span class="c005">all-layers</span></dt><dd class="dd-list">Select all layers in all images.<p><a id="hevea_general222"></a></p></dd><dt class="dt-list"><span class="c005">first-layer</span></dt><dd class="dd-list">Select only first layer in each multi-layer image. For single-layer images this is the same
as &#X2018;<span class="c005">all-layers</span>&#X2019;.<p><a id="hevea_general223"></a>
</p></dd><dt class="dt-list"><span class="c005">last-layer</span></dt><dd class="dd-list">Select only last layer in each multi-layer image. For single-layer images this is the same
as &#X2018;<span class="c005">all-layers</span>&#X2019;.<p><a id="hevea_general224"></a>
</p></dd><dt class="dt-list"><span class="c005">largest-layer</span></dt><dd class="dd-list">Select largest layer in each multi-layer image, where the &#X201C;largeness&#X201D;, this is the size is
defined by the product of the layer width and its height. The channel width of the layer is
ignored. For single-layer images this is the same as &#X2018;<span class="c005">all-layers</span>&#X2019;.<p><a id="hevea_general225"></a>
</p></dd><dt class="dt-list"><span class="c005">no-layer</span></dt><dd class="dd-list">Do not select any layer in any image.<p>This algorithm is useful to temporarily exclude some images in response files.
</p></dd></dl><p><a id="opt:load-masks"></a><a id="hevea_option36"></a><a id="hevea_general226"></a><a id="hevea_general227"></a></p></dd><dt class="dt-list"><span class="c005">--load-masks&#XA0;</span>(1<sup><span class="c011">st</span></sup>&#XA0;form)<span class="c005">
<br>
--load-masks=<span class="c013">SOFT-MASK-TEMPLATE</span>&#XA0;</span>(2<sup><span class="c011">nd</span></sup>&#XA0;form)<span class="c005">
<br>
--load-masks=<span class="c013">SOFT-MASK-TEMPLATE</span>:<span class="c013">HARD-MASK-TEMPLATE</span>&#XA0;</span>(3<sup><span class="c011">rd</span></sup>&#XA0;form)</dt><dd class="dd-list">Load masks from images instead of computing them.<p>The masks must be grayscale images. All image formats understood by <span class="c008">Enfuse</span> (see
option&#XA0;<a href="#opt%3Ashow-image-formats"><span class="c005">--show-image-formats</span></a>) are viable mask
file formats, though those with floating-point pixels for example <span class="c016">TIFF</span> or
<span class="c016">VIFF</span> are suited best.</p><p><a id="hevea_general228"></a><a id="hevea_general229"></a>
1<sup><span class="c011">st</span></sup>&#XA0;form: Load all soft-weight masks from files that were previously saved with
option&#XA0;<a href="#opt%3Asave-masks"><span class="c005">--save-masks</span></a>. <span class="c013">HARD-MASK-TEMPLATE</span>
is effective only when loading hard masks (see
option&#XA0;<a href="#opt%3Ahard-mask"><span class="c005">--hard-mask</span></a>). The respective defaults are
&#X27E8;<span class="c005">softmask-%n.tif</span>&#X27E9; and
&#X27E8;<span class="c005">hardmask-%n.tif</span>&#X27E9;.</p><p>In the 2<sup><span class="c011">nd</span></sup>&#XA0;form <span class="c013">SOFT-MASK-TEMPLATE</span> defines the names of
the soft-mask files.</p><p>In the 3<sup><span class="c011">rd</span></sup>&#XA0;form <span class="c013">HARD-MASK-TEMPLATE</span> additionally defines the
names of the hard-mask files. See
option&#XA0;<a href="#opt%3Asave-masks"><span class="c005">--save-masks</span></a> below for the description of
mask templates.
</p><p>Options&#XA0;<span class="c005">--load-masks</span> and&#XA0;<span class="c005">--save-masks</span> are mutually exclusive.
</p><p><a id="opt:parameter"></a><a id="hevea_option37"></a></p></dd><dt class="dt-list"><span class="c005">--parameter=<span class="c013">KEY</span></span>[<span class="c005">=<span class="c013">VALUE</span></span>][<span class="c005">:&#X2026;</span>]</dt><dd class="dd-list">Set a <span class="c013">KEY</span>-<span class="c013">VALUE</span> pair, where <span class="c013">VALUE</span> is optional. This option is
cumulative. Separate multiple pairs with the usual numeric delimiters.<p>This option has the negated form <a id="hevea_option38"></a>&#X2018;<span class="c005">--no-parameter</span>&#X2019;, which takes one or more <span class="c013">KEY</span>s and removes them from the list
of defined parameters. The special key&#XA0;&#X2018;<span class="c005">*</span>&#X2019; deletes all parameters at once.</p><p>Parameters allow the developers to change the internal workings of <span class="c008">Enfuse</span> without the need to
recompile or relink.</p><p><br>
</p><div class="flushright">
<a id="hevea_general230"></a>Daniel Jackson: <span class="c011">I just hope we won&#X2019;t regret giving them those gate addresses.</span><p><a id="hevea_general231"></a>Jack O&#X2019;Neill: <span class="c011">I don&#X2019;t think we will, first one being a black hole and all. They get progressively
darker after that.</span>
</p></div><p><br>
</p><p><a id="opt:save-masks"></a><a id="hevea_option39"></a><a id="hevea_general232"></a><a id="hevea_general233"></a>
</p></dd><dt class="dt-list"><span class="c005">--save-masks&#XA0;</span>(1<sup><span class="c011">st</span></sup>&#XA0;form)<span class="c005">
<br>
--save-masks=<span class="c013">SOFT-MASK-TEMPLATE</span>&#XA0;</span>(2<sup><span class="c011">nd</span></sup>&#XA0;form)<span class="c005">
<br>
--save-masks=<span class="c013">SOFT-MASK-TEMPLATE</span>:<span class="c013">HARD-MASK-TEMPLATE</span>&#XA0;</span>(3<sup><span class="c011">rd</span></sup>&#XA0;form)</dt><dd class="dd-list">Save the generated weight masks to image files.<p><a id="hevea_general234"></a><a id="hevea_general235"></a>
1<sup><span class="c011">st</span></sup>&#XA0;form: Save all soft-weight masks in files. If
option&#XA0;<a href="#opt%3Ahard-mask"><span class="c005">--hard-mask</span></a> is effective also save the hard
masks. The defaults are &#X27E8;<span class="c005">softmask-%n.tif</span>&#X27E9; and
&#X27E8;<span class="c005">hardmask-%n.tif</span>&#X27E9;.</p><p>In the 2<sup><span class="c011">nd</span></sup>&#XA0;form <span class="c013">SOFT-MASK-TEMPLATE</span> defines the names of
the soft-mask files.</p><p>In the 3<sup><span class="c011">rd</span></sup>&#XA0;form <span class="c013">HARD-MASK-TEMPLATE</span> additionally defines the
names of the hard-mask files.
</p><p><a id="hevea_general236"></a><a id="hevea_general237"></a><span class="c008">Enfuse</span> will stop after saving all masks unless
option&#XA0;<a href="#opt%3Aoutput"><span class="c005">--output</span></a> is given, too. With both options given,
this is, &#X2018;<span class="c005">--save-masks</span>&#X2019; and &#X2018;<span class="c005">--output</span>&#X2019;, <span class="c008">Enfuse</span> saves all masks and then
proceeds to fuse the output image.</p><p>Both <span class="c013">SOFT-MASK-TEMPLATE</span> and <span class="c013">HARD-MASK-TEMPLATE</span>
define templates that are expanded for each mask file. In a template a percent sign
(&#X2018;<span class="c005">%</span>&#X2019;) introduces a variable part. All other characters are copied literally.
Lowercase letters refer to the name of the respective input file, whereas uppercase ones
refer to the name of the output file. Table&#XA0;<a href="#tab%3Amask-template-characters">4.2</a>
lists all variables.</p><p>A fancy mask filename template could look like
</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
%D/mask-%02n-%f.tif
</span></div></dd></dl></div><p>
It puts the mask files into the same directory as the output file (&#X2018;<span class="c005">%D</span>&#X2019;), generates
a two-digit index (&#X2018;<span class="c005">%02n</span>&#X2019;) to keep the mask files nicely sorted, and decorates the
mask filename with the name of the associated input file (&#X2018;<span class="c005">%f</span>&#X2019;) for easy
recognition.</p><p><a id="hevea_general238"></a><a id="hevea_general239"></a>The masks carry the totaled images&#X2019; weights. They consist of single-channel, this is
grayscale, floating-point data and thus preferably are saved in floating-point form. <span class="c008">Enfuse</span>
defaults to floating-point&#XA0;<span class="c016">TIFF</span>.</p><p>Options&#XA0;<span class="c005">--load-masks</span> and&#XA0;<span class="c005">--save-masks</span> are mutually exclusive.
</p></dd></dl><blockquote class="table"><div class="center"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c020">Format</td><td class="c020">Interpretation </td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c026"><a id="hevea_general240"></a><span class="c005">%%</span></td><td class="c027"> Produces a literal &#X2018;<span class="c005">%</span>&#X2019;-sign. </td></tr>
<tr><td class="c026"> <a id="hevea_general241"></a><span class="c005">%i</span></td><td class="c027">Expands to the index of the mask
file starting at zero. &#X2018;<span class="c005">%i</span>&#X2019; allows for setting a pad character or a width
specification:<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
% <span class="c013">PAD WIDTH</span> i
</span></div></dd></dl></div><p><span class="c013">PAD</span> is either &#X2018;<span class="c005">0</span>&#X2019; or any punctuation character; the default pad character
is &#X2018;<span class="c005">0</span>&#X2019;. <span class="c013">WIDTH</span> is an integer specifying the minimum width of the number.
The default is the smallest width given the number of input images, this is 1 for
2&#X2013;9&#XA0;images, 2 for 10&#X2013;99&#XA0;images, 3 for 100&#X2013;999&#XA0;images, and so on.</p><p>Examples: &#X2018;<span class="c005">%i</span>&#X2019;, &#X2018;<span class="c005">%02i</span>&#X2019;, or &#X2018;<span class="c005">%_4i</span>&#X2019;. </p></td></tr>
<tr><td class="c026"> <a id="hevea_general242"></a><span class="c005">%n</span></td><td class="c027">Expands to the number of the mask
file starting at one. Otherwise it behaves identically to &#X2018;<span class="c005">%i</span>&#X2019;, including pad
character and width specification. </td></tr>
<tr><td class="c026"> <a id="hevea_general243"></a><span class="c005">%p</span></td><td class="c027">This is the full name (path,
filename, and extension) of the input file associated with the mask.<p>Example: If the input file is called <span class="c011">/home/luser/snap/img.jpg</span>, &#X2018;<span class="c005">%p</span>&#X2019;
expands to <span class="c011">/home/luser/snap/img.jpg</span>, or shorter: &#X2018;<span class="c005">%p</span>&#X2019; &#X21A6;
<span class="c011">/home/luser/snap/img.jpg</span>. </p></td></tr>
<tr><td class="c026"> <a id="hevea_general244"></a><span class="c005">%P</span></td><td class="c027">This is the full name of the
output file. </td></tr>
<tr><td class="c026"> <a id="hevea_general245"></a><span class="c005">%d</span></td><td class="c027">Is replaced with the directory
part of the associated input file.<p>Example (cont.): &#X2018;<span class="c005">%d</span>&#X2019; &#X21A6; <span class="c011">/home/luser/snap</span>. </p></td></tr>
<tr><td class="c026"> <a id="hevea_general246"></a><span class="c005">%D</span></td><td class="c027">Is replaced with the directory
part of the output file. </td></tr>
<tr><td class="c026"> <a id="hevea_general247"></a><span class="c005">%b</span></td><td class="c027">Is replaced with the non-directory
part (often called &#X201C;basename&#X201D;) of the associated input file.<p>Example (cont.): &#X2018;<span class="c005">%b</span>&#X2019; &#X21A6; <span class="c011">img.jpg</span>. </p></td></tr>
<tr><td class="c026"> <a id="hevea_general248"></a><span class="c005">%B</span></td><td class="c027">Is replaced with the non-directory
part of the output file. </td></tr>
<tr><td class="c026"> <a id="hevea_general249"></a><span class="c005">%f</span></td><td class="c027">Is replaced with the filename
without path and extension of the associated input file.<p>Example (cont.): &#X2018;<span class="c005">%f</span>&#X2019; &#X21A6; <span class="c011">img</span>. </p></td></tr>
<tr><td class="c026"> <a id="hevea_general250"></a><span class="c005">%F</span></td><td class="c027">Is replaced with the filename
without path and extension of the output file. </td></tr>
<tr><td class="c026"> <a id="hevea_general251"></a><span class="c005">%e</span></td><td class="c027">Is replaced with the extension
(including the leading dot) of the associated input file.<p>Example (cont.): &#X2018;<span class="c005">%e</span>&#X2019; &#X21A6; <span class="c011">.jpg</span>. </p></td></tr>
<tr><td class="c026"> <a id="hevea_general252"></a><span class="c005">%E</span></td><td class="c027">Is replaced with the extension of
the output file.
</td></tr>
</table><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.2: <a id="tab:mask-template-characters"></a><a id="hevea_general253"></a>Special format characters to control the generation of mask filenames. Uppercase letters
refer to the output filename and lowercase ones to the input files.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><!--TOC subsection id="sec:expert-fusion-options" 4.2.5&#XA0;&#XA0;Expert Fusion Options-->
<h3 class="subsection" id="sec:expert-fusion-options">4.2.5&#XA0;&#XA0;<a id="hevea_general254"></a><a id="hevea_general255"></a>Expert Fusion Options</h3><!--SEC END --><p>Expert fusion options control details of contrast-weight algorithms and they set ultimate
cutoffs for entropy and exposure fusion.</p><dl class="list"><dt class="dt-list">

<a id="opt:contrast-edge-scale"></a><a id="hevea_option40"></a><a id="hevea_general256"></a><a id="hevea_general257"></a><span class="c005">--contrast-edge-scale=<span class="c013">EDGE-SCALE</span></span>[<span class="c005">:<span class="c013">LCE-SCALE</span>:<span class="c013">LCE-FACTOR</span></span>]</dt><dd class="dd-list">A non-zero value for <span class="c013">EDGE-SCALE</span> switches on the
<span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span> (<span class="c016">LoG</span>) edge detection
algorithm. <span class="c013">EDGE-SCALE</span> is the radius of the <span class="c016">Gaussian</span> used in the search
for edges. Default: &#X27E8;0.0&#X27E9;&#XA0;pixels.<p><a id="hevea_general258"></a><a id="hevea_general259"></a><a id="hevea_general260"></a>A positive <span class="c013">LCE-SCALE</span> turns on local contrast enhancement (<span class="c016">LCE</span>) before the
<span class="c016">LoG</span> edge detection. <span class="c013">LCE-SCALE</span> is the radius of the <span class="c016">Gaussian</span>
used in the enhancement step, <span class="c013">LCE-FACTOR</span> is the weight factor (&#X201C;strength&#X201D;).
<span class="c008">Enfuse</span> calculates the <span class="c013">enhanced</span> values of the <span class="c013">original</span> ones with</p><div class="adalisting">enhanced :=
    (1 + LCE-FACTOR) * original -
    LCE-FACTOR * GaussianSmooth(original,
                                LCE-SCALE).</div><p><span class="c013">LCE-SCALE</span> defaults to &#X27E8;0.0&#X27E9;&#XA0;pixels and <span class="c013">LCE-FACTOR</span>
defaults to &#X27E8;0.0&#X27E9;. Append &#X2018;<span class="c005">%</span>&#X2019; to <span class="c013">LCE-SCALE</span> to
specify the radius as a percentage of <span class="c013">EDGE-SCALE</span>. Append &#X2018;<span class="c005">%</span>&#X2019; to
<span class="c013">LCE-FACTOR</span> to specify the weight as a percentage.</p><p><a id="opt:contrast-min-curvature"></a><a id="hevea_option41"></a><a id="hevea_general261"></a></p></dd><dt class="dt-list"><span class="c005">--contrast-min-curvature=<span class="c013">CURVATURE</span></span></dt><dd class="dd-list">Define the minimum <span class="c013">CURVATURE</span> for the <span class="c016">LoG</span> edge detection. Default:
&#X27E8;0&#X27E9;. Append a &#X2018;<span class="c005">%</span>&#X2019; to specify the minimum curvature
relative to maximum pixel value in the source image (for example 255 or&#XA0;65535).<p>A positive value makes <span class="c008">Enfuse</span> use the local contrast data (controlled with
option&#XA0;<a href="#opt%3Acontrast-window-size"><span class="c005">--contrast-window-size</span></a>) for
curvatures less than <span class="c013">CURVATURE</span> and <span class="c016">LoG</span> data for values above it.</p><p>A negative value truncates all curvatures less than &#X2212;<span class="c013">CURVATURE</span> to zero. Values
above <span class="c013">CURVATURE</span> are left unchanged. This effectively suppresses weak edges.</p><p><a id="opt:contrast-window-size"></a><a id="hevea_option42"></a><a id="hevea_general262"></a><a id="hevea_general263"></a></p></dd><dt class="dt-list"><span class="c005">--contrast-window-size=<span class="c013">SIZE</span></span></dt><dd class="dd-list">Set the window <span class="c013">SIZE</span> for local contrast analysis. The window will be a square of
<span class="c013">SIZE</span> &#XD7; <span class="c013">SIZE</span>&#XA0;pixels. If given an even <span class="c013">SIZE</span>, <span class="c008">Enfuse</span> will
automatically use the next odd number.<p>For contrast analysis <span class="c013">SIZE</span> values larger than 5&#XA0;pixels might result in a blurry
composite image. Values of 3 and&#XA0;5&#XA0;pixels have given good results on focus stacks.</p><p>Valid range: <span class="c013">SIZE</span> &#X2265; &#X27E8;3&#X27E9;, default:
&#X27E8;5&#X27E9;&#XA0;pixels.</p><p>See also Section&#XA0;<a href="#sec%3Afusion-options">4.2.3</a>, options
<a href="#opt%3Acontrast-weight"><span class="c005">--contrast-weight</span></a> and
<a href="#opt%3Ahard-mask"><span class="c005">--hard-mask</span></a>.</p><p><a id="opt:entropy-cutoff"></a><a id="hevea_option43"></a><a id="hevea_general264"></a><a id="hevea_general265"></a></p></dd><dt class="dt-list"><span class="c005">--entropy-cutoff=<span class="c013">LOWER-CUTOFF</span></span>[<span class="c005">:<span class="c013">UPPER-CUTOFF</span></span>]</dt><dd class="dd-list">Define a cutoff function&#XA0;<span class="c011">Y</span>&#X2032; for the normalized luminance&#XA0;<span class="c011">Y</span> by <span class="c013">LOWER-CUTOFF</span> and
<span class="c013">UPPER-CUTOFF</span>, which gets applied (only) before the local-entropy calculation.
<span class="c013">LOWER-CUTOFF</span> is the value below which pixels are mapped to pure black when calculating
the local entropy of the pixel&#X2019;s surroundings. Optionally also define the <span class="c013">UPPER-CUTOFF</span>
value above which pixels are mapped to pure white.<table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:luminance-entropy-cutoff"></a>
<span class="c011">Y</span>&#X2032;&#XA0;=&#XA0;</td><td class="dcell">&#X23A7;<br>
&#X23AA;<br>
&#X23A8;<br>
&#X23AA;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c022">&#XA0;&#XA0;&#XA0;&#XA0;0</td><td class="c022">&#XA0;&#XA0;&#XA0;for <span class="c011">Y</span>&#XA0;&#X2264;&#XA0;<span class="c013">LOWER-CUTOFF</span>,&#XA0;</td></tr>
<tr><td class="c022">&#XA0;&#XA0;&#XA0;&#XA0;1</td><td class="c022">&#XA0;&#XA0;&#XA0;for <span class="c011">Y</span>&#XA0;&#X2265;&#XA0;<span class="c013">UPPER-CUTOFF</span> and&#XA0;</td></tr>
<tr><td class="c022">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span></td><td class="c022">&#XA0;&#XA0;&#XA0;otherwise.
</td></tr>
</table></td><td class="dcell">
</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(4.1)</td></tr>
</table><p>Also see Section&#XA0;<a href="#sec%3Alocal-entropy-weighting">5.5</a> for an explanation of local
entropy. Figure&#XA0;<a href="#fig%3Aentropy-cutoff">4.1</a> shows an example for the luminance mapping.</p><p>Note that the entropy cutoff does not apply directly to the local-entropy&#XA0;<span class="c011">H</span> of a pixel or
its weight&#XA0;<span class="c011">w</span><sub><span class="c011">H</span></sub>, but the luminance image that get fed into the local-entropy weight
calculation. However, assigning <em>constant</em> values to extreme shadows or highlights
in general decreases their local entropy, thereby reducing the pixels&#X2019; weights.</p><p>For color images <span class="c013">LOWER-CUTOFF</span> and <span class="c013">UPPER-CUTOFF</span> are applied separately and
independently to each channel.</p><p>Append a &#X2018;<span class="c005">%</span>&#X2019;-sign to specify the cutoff relative to maximum pixel value in the source
image (for example 255 or&#XA0;65535). Negative <span class="c013">UPPER-CUTOFF</span> values indicate the maximum
minus the absolute <span class="c013">UPPER-CUTOFF</span> value; the same holds for negative percentages.</p><p>Defaults: &#X27E8;0%&#X27E9; for <span class="c013">LOWER-CUTOFF</span> and
&#X27E8;100%&#X27E9; for <span class="c013">UPPER-CUTOFF</span>, that is, all pixels&#X2019; values are
taken into account.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="entropy-cutoff.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 4.1: <a id="fig:entropy-cutoff"></a>Modified lightness&#XA0;<span class="c011">Y</span>&#X2032;, Eqn.&#XA0;<a href="#equ%3Aluminance-entropy-cutoff">4.1</a>, for
<span class="c013">LOWER-CUTOFF</span> = 5% and <span class="c013">UPPER-CUTOFF</span> = 90%, which are rather
extreme values.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><div class="geeknote"><blockquote class="quotation"><span class="c009"><span class="c013">
Note that a high LOWER-CUTOFF value lightens the resulting image, as dark and
presumably noisy pixels are averaged with <em>equal</em> weights. With LOWER-CUTOFF</span> =
0<span class="c013">, the default, on the other hand, &#X201C;noise&#X201D; might be interpreted as high entropy and the
noisy pixels get a high weight, which in turn renders the resulting image darker.
Analogously, a low UPPER-CUTOFF darkens the output image.
</span></span></blockquote></div><p><a id="opt:entropy-window-size"></a><a id="hevea_option44"></a><a id="hevea_general266"></a><a id="hevea_general267"></a></p></dd><dt class="dt-list"><span class="c005">--entropy-window-size=<span class="c013">SIZE</span></span></dt><dd class="dd-list">Window <span class="c013">SIZE</span> for local entropy analysis. The window will be a square of
<span class="c013">SIZE</span> &#XD7; <span class="c013">SIZE</span>&#XA0;pixels.<p>In the entropy calculation <span class="c013">SIZE</span> values of 3 to&#XA0;7 yield an acceptable compromise of
the locality of the information and the significance of the local entropy value itself.</p><p>Valid range: <span class="c013">SIZE</span> &#X2265; &#X27E8;3&#X27E9;, default:
&#X27E8;3&#X27E9;&#XA0;pixels.</p><p>If given an even <span class="c013">SIZE</span> <span class="c008">Enfuse</span> will automatically use the next-larger odd number.</p><p><a id="opt:exposure-cutoff"></a><a id="hevea_option45"></a><a id="hevea_general268"></a><a id="hevea_general269"></a></p></dd><dt class="dt-list"><span class="c005">--exposure-cutoff=<span class="c013">LOWER-CUTOFF</span></span>[<span class="c005">:<span class="c013">UPPER-CUTOFF</span></span>[<span class="c005">:<span class="c013">LOWER-PROJECTOR</span>:<span class="c013">UPPER-PROJECTOR</span></span>]]</dt><dd class="dd-list">Define an exposure-cutoff function by the luminances <span class="c013">LOWER-CUTOFF</span> and <span class="c013">UPPER-CUTOFF</span>.
Pixels below the lower or above the upper cutoff get a weight of exactly zero irrespective of
the active exposure-weight function.<p>For color images the values of <span class="c013">LOWER-CUTOFF</span> and <span class="c013">UPPER-CUTOFF</span> refer to the
gray-scale projection as selected with <span class="c013">LOWER-PROJECTOR</span> and <span class="c013">UPPER-PROJECTOR</span>. This is
similar to option&#XA0;<span class="c005">--gray-projector</span>.</p><p>Append a &#X2018;<span class="c005">%</span>&#X2019;-sign to specify the cutoff relative to maximum pixel value in the source
image (for example 255 or&#XA0;65535). Negative <span class="c013">UPPER-CUTOFF</span> values indicate the maximum
minus the absolute <span class="c013">UPPER-CUTOFF</span> value; the same holds for negative percentages.</p><div class="geeknote"><blockquote class="quotation"><span class="c015">
The impact of this option is similar, but not identical to transforming <em>all</em> input
images with </span><a href="https://www.imagemagick.org/script/index.php"><span class="c015">ImageMagick&#X2019;s</span></a><a id="hevea_program9"></a><span class="c013"><span style="font-weight:bold;font-size:small">
convert</span><a id="hevea_program10"></a><span class="c009"> (see Appendix&#XA0;</span></span><a href="#sec%3Ahelpful-programs"><span class="c015">A</span></a><span class="c015">) prior
to fusing with the commands demonstrated in
Example&#XA0;</span><a href="#ex%3Aimagemagick-convert-cutoff"><span class="c015">4.2.4</span></a><span class="c015">.</span><blockquote class="exemplar"><div class="center"><hr class="c029"></div><span class="c009">
</span><div class="terminal"><div class="flushleft"><span class="c007">
$ convert IMAGE \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;\( +clone -threshold LOWER-CUTOFF \) \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;-compose copy_opacity -composite \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;MASKED-IMAGE
</span></div></div><p><span class="c009"><br>
</span></p><div class="terminal"><div class="flushleft"><span class="c007">
$ convert IMAGE \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;\( \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;\( IMAGE -threshold LOWER-CUTOFF \) \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;\( IMAGE -threshold UPPER-CUTOFF -negate \) \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;-compose multiply -composite \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;\) \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;-compose copy_opacity -composite \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;MASKED-IMAGE
</span></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027"><span class="c013"><span class="c009">Example 4.2.4: </span><a id="ex:imagemagick-convert-cutoff"></a><span class="c009">Using <span class="c008">ImageMagick</span> for exposure cutoff operations. The first
example only applies a lower cutoff, whereas the second one applies both a
lower and an upper cutoff to the images.</span></span></td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p><span class="c015">Transforming some or all input images as shown in the example gives the user more
flexibility because the thresholds can be chosen for each image individually.
</span></p></blockquote></div><p>The option allows to specify projection operators as in
option&#XA0;<span class="c005">--gray-projector</span> for the
<span class="c013">LOWER-CUTOFF</span> and <span class="c013">UPPER-CUTOFF</span> thresholds.</p><p>This option can be helpful if the user wants to exclude underexposed or overexposed pixels
from the fusing process in <em>all</em> of the input images. The values of
<span class="c013">LOWER-CUTOFF</span> and <span class="c013">UPPER-CUTOFF</span> as well as the gray-scale projector
determine which pixels are considered &#X201C;underexposed&#X201D; or &#X201C;overexposed&#X201D;. As any change of
the exposure-weight curve this option changes the brightness of the resulting image:
increasing <span class="c013">LOWER-CUTOFF</span> lightens the final image and lowering <span class="c013">UPPER-CUTOFF</span>
darkens it.</p><p>Defaults: &#X27E8;0%&#X27E9; for <span class="c013">LOWER-CUTOFF</span> and
&#X27E8;100%&#X27E9; for <span class="c013">UPPER-CUTOFF</span>, that is, all pixels&#X2019; values are
weighted according to the &#X201C;uncut&#X201D; exposure-weight curve.</p><p>Figure&#XA0;<a href="#fig%3Aexposure-cutoff">4.2</a> shows an example.</p><p>The gray-scale projectors <span class="c013">LOWER-PROJECTOR</span> and <span class="c013">UPPER-PROJECTOR</span> default to
&#X2018;&#X27E8;<span class="c005">anti-value</span>&#X27E9;&#X2019; and
&#X2018;&#X27E8;<span class="c005">value</span>&#X27E9;&#X2019;, which are usually the best choices
for effective cutoff operations on the respective ends.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="exposure-cutoff.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 4.2: <a id="fig:exposure-cutoff"></a>Exposure weight&#XA0;<span class="c011">w</span><sub><span class="c011">Y</span></sub> after an exposure-cutoff of <span class="c013">LOWER-CUTOFF</span> = 5% and
<span class="c013">UPPER-CUTOFF</span> = 97% was applied to a <span class="c016">Gaussian</span> with the
<span class="c013">optimum</span> = 0.5 and <span class="c013">width</span> = 0.2.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>Note that the application of the respective cutoffs is completely independent of the actual
shape of the exposure weight function.</p><p>If a set of images stubbornly refuses to &#X201C;react&#X201D; to this option, look at their histograms to
verify the cutoff actually falls into populated ranges of the histograms. In the absence of
an image manipulation program like <a href="http://www.gimp.org/"><span class="c008">The Gimp</span></a><a id="hevea_program11"></a>,
<a href="https://www.imagemagick.org/script/index.php">ImageMagick&#X2019;s</a><a id="hevea_program12"></a> can be used to generate
<a href="https://www.imagemagick.org/Usage/files/#histogram">histograms</a>, like, for example,</p><div class="terminal"><div class="flushleft"><span class="c005">
$ convert -define histogram:unique-colors=false \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;IMAGE histogram:- | \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;display
</span></div></div><p>The syntax of this option is flexible enough to combine ease of use and precision, as
Table&#XA0;<a href="#tab%3Aflexible-exposure-cutoff">4.3</a> demonstrates.</p><blockquote class="table"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage">
<table class="c002 cellpading0"><tr><td class="hbar" colspan=3></td></tr>
<tr><td class="c020">Task</td><td class="c020">Cutoff Setting</td><td class="c020">Effect </td></tr>
<tr><td class="hbar" colspan=3></td></tr>
<tr><td class="c027">Suppress some noise.</td><td class="c028"><span class="c005">--exposure-cutoff=5%</span></td><td class="c027">The percentage makes the cutoff
specification channel-width agnostic. </td></tr>
<tr><td class="c027">
Shave off pure white pixels.</td><td class="c028"><span class="c005">--exposure-cutoff=0:-1</span></td><td class="c027">This cutoff
specification only works for integral pixels, but it will set the weight of the very
brightest pixels to zero. </td></tr>
<tr><td class="c027">
Shave off bright white pixels.</td><td class="c028"><span class="c005">--exposure-cutoff=0:-1%</span></td><td class="c027">Here we exclude the
brightest 1% of pixels form the exposure fusion no matter whether the image is encoded
with integers or floating-point numbers. </td></tr>
<tr><td class="c027">
Suppress some noise and shave off pure white pixels.</td><td class="c028"><span class="c005">--exposure-cutoff=5%:-1</span></td><td class="c027">Combine the effects of lower and upper cutoff, while mixing relative and absolute
specifications.
</td></tr>
</table>
<p><br>
</p></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.3: <a id="tab:flexible-exposure-cutoff"></a>Some possible exposure-cutoff settings and their effects on the exposure weights.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p><a id="opt:exposure-weight-function"></a><a id="hevea_option46"></a><a id="hevea_general270"></a><a id="hevea_general271"></a></p></dd><dt class="dt-list"><span class="c005">--exposure-weight-function=<span class="c013">WEIGHT-FUNCTION</span>&#XA0;</span>(1<sup><span class="c011">st</span></sup>&#XA0;form)<span class="c005">
<br>
--exposure-weight-function=<span class="c013">SHARED-OBJECT</span>:<span class="c013">SYMBOL</span></span>[<span class="c005">:<span class="c013">ARGUMENT</span></span>[<span class="c005">:&#X2026;</span>]]<span class="c005">&#XA0;</span>(2<sup><span class="c011">nd</span></sup>&#XA0;form)</dt><dd class="dd-list">1<sup><span class="c011">st</span></sup>&#XA0;form: override the default exposure weight function
(&#X27E8;<span class="c005">gaussian</span>&#X27E9;) and instead use one of the weight-functions in
Table&#XA0;<a href="#tab%3Aexposure-weight-functions">4.4</a>.<p><a id="hevea_general272"></a><a id="hevea_general273"></a></p><div class="restrictedmaterial"><span class="c001">Versions with dynamic-linking support only.</span><blockquote class="quotation">
2<sup><span class="c011">nd</span></sup>&#XA0;form: dynamically load <span class="c013">SHARED-OBJECT</span> and use
<span class="c013">SYMBOL</span> as user-defined exposure weight function. Optionally pass the user-defined
function <span class="c013">ARGUMENT</span>s.<p><a id="hevea_general274"></a><a id="hevea_general275"></a></p><div class="geeknote"><blockquote class="quotation"><span class="c015">
Depending on the operating system environment, a &#X201C;shared object&#X201D; is sometimes also called
a &#X201C;dynamic library&#X201D;.
</span></blockquote></div></blockquote></div><p><a id="hevea_general276"></a></p><p>In Table&#XA0;<a href="#tab%3Aexposure-weight-functions">4.4</a> the variable&#XA0;<span class="c011">w</span><sub><span class="c011">exp</span></sub> denotes the
exposure weight and <span class="c011">z</span> represents the normalized luminance&#XA0;<span class="c011">Y</span> linearly transformed by the
exposure optimum&#XA0;<span class="c011">Y</span><sub><span class="c011">opt</span></sub> (option&#XA0;<span class="c005">--exposure-optimum</span>) and <span class="c013">width</span>
(option&#XA0;<span class="c005">--exposure-width</span>) according to the linear transform
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:linear-luminance-transform"></a>
<span class="c011">z</span>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">Y</span>&#XA0;&#X2212;&#XA0;<span class="c011">Y</span><sub><span class="c011">opt</span></sub></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019"><span class="c011">width</span></td></tr>
</table></td><td class="dcell">.
&#XA0;&#XA0;&#XA0;&#XA0;(4.2)</td></tr>
</table><p><a id="hevea_general277"></a><a id="hevea_general278"></a><a id="hevea_general279"></a><a id="hevea_general280"></a>Internally <span class="c008">Enfuse</span> uses a rescaled <span class="c013">width</span> that gives all weight functions the same full
width at half of the maximum (<span class="c016">FWHM</span>), also see Figure&#XA0;<a href="#fig%3Aexposure-weights">5.6</a>.
This means for the user that changing the exposure function neither changes the optimum
exposure nor the width.</p><blockquote class="table"><div class="center"><hr class="c029"></div>
<dl class="list"><dt class="dt-list">

<a id="hevea_general281"></a><a id="hevea_general282"></a><span class="c005">gauss <br>
gaussian</span></dt><dd class="dd-list">The original exposure weight function of <span class="c008">Enfuse</span> and the only one up to version&#XA0;4.1.
<table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:weight:gauss"></a>
<span class="c011">w</span><sub><span class="c011">exp</span></sub>&#XA0;=&#XA0;exp</td><td class="dcell">&#X239B;<br>
&#X239D;</td><td class="dcell">&#X2212;<span class="c011">z</span><sup>2</sup>&#XA0;/&#XA0;2</td><td class="dcell">&#X239E;<br>
&#X23A0;</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(4.3)</td></tr>
</table><p><a id="hevea_general283"></a><a id="hevea_general284"></a></p></dd><dt class="dt-list"><span class="c005">lorentz <br>
lorentzian</span></dt><dd class="dd-list">Lorentz curve.
<table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:weight:lorentz"></a>
<span class="c011">w</span><sub><span class="c011">exp</span></sub>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">1&#XA0;+&#XA0;<span class="c011">z</span><sup>2</sup>&#XA0;/&#XA0;2</td></tr>
</table></td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(4.4)</td></tr>
</table><p><a id="hevea_general285"></a><a id="hevea_general286"></a></p></dd><dt class="dt-list"><span class="c005">halfsine <br>
half-sine</span></dt><dd class="dd-list">Upper half-wave of a sine; exactly zero outside.
<table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:weight:halfsine"></a>
<span class="c011">w</span><sub><span class="c011">exp</span></sub>&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;cos(<span class="c011">z</span>)</td><td class="c022">if &#XA0;|<span class="c011">z</span>|&#XA0;&#X2264;&#XA0;&#X3C0;/2&#XA0;</td></tr>
<tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;0</td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(4.5)</td></tr>
</table><p><a id="hevea_general287"></a><a id="hevea_general288"></a></p></dd><dt class="dt-list"><span class="c005">fullsine <br>
full-sine</span></dt><dd class="dd-list">Full sine-wave shifted upwards by one to give all positive weights; exactly zero outside.
<table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:weight:fullsine"></a>
<span class="c011">w</span><sub><span class="c011">exp</span></sub>&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;(1&#XA0;+&#XA0;cos(<span class="c011">z</span>))&#XA0;/&#XA0;2</td><td class="c022">if &#XA0;|<span class="c011">z</span>|&#XA0;&#X2264;&#XA0;&#X3C0;&#XA0;</td></tr>
<tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;0</td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">&#XA0;</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(4.6)</td></tr>
</table><p><a id="hevea_general289"></a><a id="hevea_general290"></a></p></dd><dt class="dt-list"><span class="c005">bisquare <br>
bi-square</span></dt><dd class="dd-list">Quartic function.
<table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:weight:bisquare"></a>
<span class="c011">w</span><sub><span class="c011">exp</span></sub>&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;1&#XA0;&#X2212;&#XA0;<span class="c011">z</span><sup>4</sup></td><td class="c022">if &#XA0;|<span class="c011">z</span>|&#XA0;&#X2264;&#XA0;1&#XA0;</td></tr>
<tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;0</td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">
</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(4.7)</td></tr>
</table>
</dd></dl><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.4: <a id="tab:exposure-weight-functions"></a><a id="hevea_general291"></a>Predefined exposure weight functions. For a graphical comparison see
Figure&#XA0;<a href="#fig%3Aexposure-weights">5.6</a>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>For a detailed explanation of all the weight functions
Section&#XA0;<a href="#sec%3Aexposure-weighting">5.2</a>.</p><p>If this option is given more than once, the last instance wins.</p><p><a id="opt:gray-projector"></a><a id="hevea_option47"></a><a id="hevea_general292"></a><a id="hevea_general293"></a></p></dd><dt class="dt-list"><span class="c005">--gray-projector=<span class="c013">PROJECTOR</span></span></dt><dd class="dd-list">Use gray projector&#XA0;<span class="c013">PROJECTOR</span> for conversion of <span class="c016">RGB</span> images to grayscale:
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>)&#XA0;&#X2192;&#XA0;<span class="c011">Y</span>.
</td></tr>
</table><p>In this version of <span class="c008">Enfuse</span>, the option is effective for exposure weighting and local contrast
weighting and <span class="c013">PROJECTOR</span> defaults to &#X2018;&#X27E8;<span class="c005">average</span>&#X27E9;&#X2019;.</p><p>Valid values for <span class="c013">PROJECTOR</span> are:</p><dl class="list"><dt class="dt-list">

<a id="hevea_general294"></a><a id="hevea_general295"></a><span class="c005">anti-value</span></dt><dd class="dd-list">Do the opposite of the &#X2018;<span class="c005">value</span>&#X2019; projector: take the minimum of all color channels.
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span>&#XA0;=&#XA0;min(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>)
</td></tr>
</table>
This projector can be useful when exposure weighing while employing a lower cutoff (see
option&#XA0;<span class="c005">--exposure-cutoff</span>) to reduce the noise in the fused image.<p><a id="hevea_general296"></a><a id="hevea_general297"></a></p></dd><dt class="dt-list"><span class="c005">average</span></dt><dd class="dd-list">Average red, green, and blue channel with equal weights. This is the default, and it often
is a good projector for gamma = 1 data.
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">R</span>&#XA0;+&#XA0;<span class="c011">G</span>&#XA0;+&#XA0;<span class="c011">B</span></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">3</td></tr>
</table></td></tr>
</table><p><a id="hevea_general298"></a><a id="hevea_general299"></a></p></dd><dt class="dt-list"><span class="c005">channel-mixer:<span class="c013">RED-WEIGHT</span>:<span class="c013">GREEN-WEIGHT</span>:<span class="c013">BLUE-WEIGHT</span></span></dt><dd class="dd-list">Weight the channels as given.
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c023">&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span></td><td class="c020">&#XA0;</td><td class="c020">=</td><td class="c020">&#XA0;</td><td class="c022"><span class="c013">RED-WEIGHT</span></td><td class="c020">&#XA0;</td><td class="c020">&#XD7;</td><td class="c020">&#XA0;</td><td class="c020"><span class="c011">R</span></td><td class="c020">+&#XA0;</td></tr>
<tr><td class="c023">&nbsp;</td><td class="c020">&#XA0;</td><td class="c020">&nbsp;</td><td class="c020">&#XA0;</td><td class="c022"><span class="c013">GREEN-WEIGHT</span></td><td class="c020">&#XA0;</td><td class="c020">&#XD7;</td><td class="c020">&#XA0;</td><td class="c020"><span class="c011">G</span></td><td class="c020">+&#XA0;</td></tr>
<tr><td class="c023">&nbsp;</td><td class="c020">&#XA0;</td><td class="c020">&nbsp;</td><td class="c020">&#XA0;</td><td class="c022"><span class="c013">BLUE-WEIGHT</span></td><td class="c020">&#XA0;</td><td class="c020">&#XD7;</td><td class="c020">&#XA0;</td><td class="c020"><span class="c011">B</span></td><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;</td></tr>
</table></td></tr>
</table><p>The weights are automatically normalized to one, so</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
--gray-projector=channel-mixer:0.25:0.5:0.25 <br>
 --gray-projector=channel-mixer:1:2:1 <br>
 --gray-projector=channel-mixer:25:50:25
</span></div></dd></dl></div><p>all define the same mixer configuration.</p><p>The three weights <span class="c013">RED-WEIGHT</span>, <span class="c013">GREEN-WEIGHT</span>, and
<span class="c013">BLUE-WEIGHT</span> define the relative weight of the respective color channel. The
sum of all weights is normalized to one.</p><p><a id="hevea_general300"></a><a id="hevea_general301"></a><a id="hevea_general302"></a><a id="hevea_general303"></a></p></dd><dt class="dt-list"><span class="c005">l-star</span></dt><dd class="dd-list">Use the L-channel of the L*a*b*-conversion of the image as its grayscale representation.
This is a useful projector for gamma = 1 data. It reveals minute contrast
variations even in the shadows and the highlights. This projector is computationally
expensive. Compare with &#X2018;<span class="c005">pl-star</span>&#X2019;, which is intended for gamma-corrected images.<p>See <a href="https://en.wikipedia.org/wiki/Lab_color_space">Wikipedia</a> for a detailed description of the
<span class="c016">Lab</span>&#XA0;color space.</p><p><a id="hevea_general304"></a><a id="hevea_general305"></a></p></dd><dt class="dt-list"><span class="c005">lightness</span></dt><dd class="dd-list">Compute the lightness of each <span class="c016">RGB</span> pixel as in an
Hue-Saturation-Lightness (<span class="c016">HSL</span>) conversion of the image.
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">max(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>)&#XA0;+&#XA0;min(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>)</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">2</td></tr>
</table></td></tr>
</table><p><a id="hevea_general306"></a><a id="hevea_general307"></a></p></dd><dt class="dt-list"><span class="c005">luminance</span></dt><dd class="dd-list">Use the weighted average of the <span class="c016">RGB</span> pixel&#X2019;s channels as defined by <span class="c016">CIE</span>
(&#X201C;Commission Internationale de l&#X2019;&#XC9;clairage&#X201D;) and the <span class="c016">JPEG</span> standard.
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span>&#XA0;=&#XA0;0.30&#XA0;&#XD7;&#XA0;<span class="c011">R</span>&#XA0;+&#XA0;0.59&#XA0;&#XD7;&#XA0;<span class="c011">G</span>&#XA0;+&#XA0;0.11&#XA0;&#XD7;&#XA0;<span class="c011">B</span>
</td></tr>
</table><p><a id="hevea_general308"></a><a id="hevea_general309"></a><a id="hevea_general310"></a></p></dd><dt class="dt-list"><span class="c005">pl-star</span></dt><dd class="dd-list">Use the L-channel of the L*a*b*-conversion of the image as its grayscale representation.
This is a useful projector for gamma-corrected data. It reveals minute contrast variations
even in the shadows and the highlights. This projector is computationally expensive.
Compare with &#X2018;<span class="c005">l-star</span>&#X2019;, which is intended for gamma = 1 images.<p>See <a href="https://en.wikipedia.org/wiki/Lab_color_space">Wikipedia</a> for a detailed description of the
<span class="c016">Lab</span>&#XA0;color space.</p><p><a id="hevea_general311"></a><a id="hevea_general312"></a></p></dd><dt class="dt-list"><span class="c005">value</span></dt><dd class="dd-list">Take the Value-channel of the Hue-Saturation-Value (<span class="c016">HSV</span>) conversion of the image.
<table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">Y</span>&#XA0;=&#XA0;max(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>)
</td></tr>
</table>
</dd></dl></dd></dl><!--TOC subsection id="sec:information-options" 4.2.6&#XA0;&#XA0;Information Options<sup><span class="c008">c</span></sup>-->
<h3 class="subsection" id="sec:information-options">4.2.6&#XA0;&#XA0;<a id="hevea_general313"></a><a id="hevea_general314"></a>Information Options<sup><span class="c008">c</span></sup></h3><!--SEC END --><dl class="list"><dt class="dt-list">

<a id="opt:help"></a><a id="hevea_option48"></a><a id="hevea_option49"></a><a id="hevea_general315"></a><span class="c005">-h <br>
--help</span></dt><dd class="dd-list">Print information on the command-line syntax and all available options, giving a boiled-down
version of this manual.<p><a id="opt:show-globbing-algorithms"></a><a id="hevea_option50"></a><a id="hevea_general316"></a><a id="hevea_general317"></a></p></dd><dt class="dt-list"><span class="c005">--show-globbing-algorithms</span></dt><dd class="dd-list">Show all globbing algorithms.<p>Depending on the build-time configuration and the operating system the binary may support
different globbing algorithms. See Section&#XA0;<a href="#sec%3Aglobbing-algorithms">4.4.3</a>.</p><p><a id="opt:show-image-formats"></a><a id="hevea_option51"></a><a id="hevea_general318"></a><a id="hevea_general319"></a></p></dd><dt class="dt-list"><span class="c005">--show-image-formats</span></dt><dd class="dd-list">Show all recognized image formats, their filename extensions and the supported per-channel
depths.<p>Depending on the build-time configuration and the operating system, the binary supports
different image formats, typically: <span class="c016">BMP</span>, <span class="c016">EXR</span>, <span class="c016">GIF</span>,
<span class="c016">HDR</span>, <span class="c016">JPEG</span>, <span class="c016">PNG</span>, <span class="c016">PNM</span>, SUN, <span class="c016">TIFF</span>,
and&#XA0;<span class="c016">VIFF</span> and recognizes different image-filename extensions, again typically:
<span class="c011">bmp</span>, <span class="c011">exr</span>, <span class="c011">gif</span>, <span class="c011">hdr</span>, <span class="c011">jpeg</span>,
<span class="c011">jpg</span>, <span class="c011">pbm</span>, <span class="c011">pgm</span>, <span class="c011">png</span>, <span class="c011">pnm</span>,
<span class="c011">ppm</span>, <span class="c011">ras</span>, <span class="c011">tif</span>, <span class="c011">tiff</span>, and&#XA0;<span class="c011">xv</span>.</p><p>The maximum number of different per-channel depths any <span class="c017">enfuse</span> provides is seven:
</p><ul class="itemize"><li class="li-itemize">
8&#XA0;bits unsigned integral, &#X2018;<span class="c005">uint8</span>&#X2019;
</li><li class="li-itemize">16&#XA0;bits unsigned or signed integral, &#X2018;<span class="c005">uint16</span>&#X2019; or &#X2018;<span class="c005">int16</span>&#X2019;
</li><li class="li-itemize">32&#XA0;bits unsigned or signed integral, &#X2018;<span class="c005">uint32</span>&#X2019; or &#X2018;<span class="c005">int32</span>&#X2019;
</li><li class="li-itemize">32&#XA0;bits floating-point, &#X2018;<span class="c005">float</span>&#X2019;
</li><li class="li-itemize">64&#XA0;bits floating-point, &#X2018;<span class="c005">double</span>&#X2019;
</li></ul><p><a id="opt:show-signature"></a><a id="hevea_option52"></a><a id="hevea_general320"></a></p></dd><dt class="dt-list"><span class="c005">--show-signature</span></dt><dd class="dd-list">Show the user name of the person who compiled the binary, when the binary was compiled, and on
which machine this was done.<p>This information can be helpful to ensure the binary was created by a trustworthy builder.</p><p><a id="opt:show-software-components"></a><a id="hevea_option53"></a><a id="hevea_general321"></a><a id="hevea_general322"></a><a id="hevea_general323"></a><a id="hevea_general324"></a></p></dd><dt class="dt-list"><span class="c005">--show-software-components</span></dt><dd class="dd-list">Show the name and version of the compiler that built <span class="c008">Enfuse</span> followed by the versions of all
important libraries against which <span class="c008">Enfuse</span> was compiled and linked.<p>Technically, the version information is taken from header files, thus it is independent of the
dynamic-library environment the binary runs within. The library versions printed here can
help to reveal version mismatches with respect to the actual dynamic libraries available to
the binary.</p><p><a id="opt:version"></a><a id="hevea_option54"></a><a id="hevea_option55"></a><a id="hevea_general325"></a><a id="hevea_general326"></a><a id="hevea_general327"></a></p></dd><dt class="dt-list"><span class="c005">-V <br>
--version</span></dt><dd class="dd-list">Output information on the binary&#X2019;s version.<p>Team this option with <a href="#opt%3Averbose"><span class="c005">--verbose</span></a> to show configuration
details, like the extra features that may have been compiled in. For details consult
Section&#XA0;<a href="#sec%3Aexact-version">3.3.1</a>.
</p></dd></dl><!--BEGIN NOTES section-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note5" href="#text5">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">As <a id="hevea_general142"></a><span class="c016">Dr.&#XA0;Daniel
Jackson</span> correctly <a href="http://stargate.wikia.com/wiki/The_Tomb">noted</a>, actually, it is not a pyramid:
&#X201C;Ziggaurat, it&#X2019;s a <a href="https://en.wikipedia.org/wiki/Ziggaurat">Ziggaurat</a>.&#X201D;</div>
</dd></dl>
<!--END NOTES-->
<!--TOC section id="sec:option-delimiters" 4.3&#XA0;&#XA0;Option Delimiters<sup><span class="c008">c</span></sup>-->
<h2 class="section" id="sec:option-delimiters">4.3&#XA0;&#XA0;<a id="hevea_general328"></a><a id="hevea_general329"></a><a id="hevea_general330"></a>Option Delimiters<sup><span class="c008">c</span></sup></h2><!--SEC END --><p><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> allow the arguments supplied to the programs&#X2019; options to be separated by
different separators. The online documentation and this manual, however, exclusively use the
colon&#XA0;&#X2018;<span class="c005">:</span>&#X2019; in every syntax definition and in all examples.</p><!--TOC subsection id="sec:option-delimiters-numeric-arguments" 4.3.1&#XA0;&#XA0;Numeric Arguments-->
<h3 class="subsection" id="sec:option-delimiters-numeric-arguments">4.3.1&#XA0;&#XA0;<a id="hevea_general331"></a>Numeric Arguments</h3><!--SEC END --><p>Valid delimiters are the semicolon&#XA0;&#X2018;<span class="c005">;</span>&#X2019;, the colon&#XA0;&#X2018;<span class="c005">:</span>&#X2019;, and the slash&#XA0;&#X2018;<span class="c005">/</span>&#X2019;.
All delimiters may be mixed within any option that takes numeric arguments.</p><p>Examples using some <span class="c008">Enfuse</span> options:</p><dl class="list"><dt class="dt-list">

<span class="c005">--contrast-edge-scale=0.667:6.67:3.5</span></dt><dd class="dd-list">Separate all arguments with colons.</dd><dt class="dt-list"><span class="c005">--contrast-edge-scale=0.667;6.67;3.5</span></dt><dd class="dd-list">Use semi-colons.</dd><dt class="dt-list"><span class="c005">--contrast-edge-scale=0.667;6.67/3.5</span></dt><dd class="dd-list">Mix semicolon and slash in weird ways.</dd><dt class="dt-list"><span class="c005">--entropy-cutoff=3%/99%</span></dt><dd class="dd-list">All delimiters also work in conjunction with percentages.</dd><dt class="dt-list"><span class="c005">--gray-projector=channel-mixer:3/6/1</span></dt><dd class="dd-list">Separate arguments with a colon and two slashes.</dd><dt class="dt-list"><span class="c005">--gray-projector=channel-mixer/30;60:10</span></dt><dd class="dd-list">Go wild and <span class="c008">Enfuse</span> will understand.
</dd></dl><!--TOC subsection id="sec:option-delimiters-filename-arguments" 4.3.2&#XA0;&#XA0;Filename Arguments-->
<h3 class="subsection" id="sec:option-delimiters-filename-arguments">4.3.2&#XA0;&#XA0;<a id="hevea_general332"></a>Filename Arguments</h3><!--SEC END --><p>Here, the accepted delimiters are comma&#XA0;&#X2018;<span class="c005">,</span>&#X2019;, semicolon&#XA0;&#X2018;<span class="c005">;</span>&#X2019;, and colon&#XA0;&#X2018;<span class="c005">:</span>&#X2019;.
Again, all delimiters may be mixed within any option that has filename arguments.</p><p>Examples:</p><dl class="list"><dt class="dt-list">

<span class="c005">--save-masks=soft-mask-%03i.tif:hard-mask-03%i.tif</span></dt><dd class="dd-list">Separate all arguments with colons.</dd><dt class="dt-list"><span class="c005">--save-masks=%d/soft-%n.tif,%d/hard-%n.tif</span></dt><dd class="dd-list">Use a comma.
</dd></dl><!--TOC section id="sec:response-files" 4.4&#XA0;&#XA0;Response Files<sup><span class="c008">c</span></sup>-->
<h2 class="section" id="sec:response-files">4.4&#XA0;&#XA0;<a id="hevea_general333"></a><a id="hevea_general334"></a>Response Files<sup><span class="c008">c</span></sup></h2><!--SEC END --><p>A response file contains names of images or other response filenames.
<a id="hevea_general335"></a><a id="hevea_general336"></a>
Introduce response file names at the command line or in a response file with an
&#X27E8;<span class="c005">@</span>&#X27E9;&#XA0;character.</p><p><a id="hevea_general337"></a><a id="hevea_general338"></a><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> process the list <span class="c013">INPUT</span> strictly from left to right, expanding
response files in depth-first order. Multi-layer files are processed from first layer to the
last. The following examples only show <span class="c008">Enblend</span>, but <span class="c008">Enfuse</span> works
exactly the same.</p><dl class="list"><dt class="dt-list">

Solely image filenames.</dt><dd class="dd-list">Example:<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enblend image-1.tif image-2.tif image-3.tif
</span></div></dd></dl></div><p>The ultimate order in which the images are processed is: <span class="c011">image-1.tif</span>,
<span class="c011">image-2.tif</span>, <span class="c011">image-3.tif</span>.</p></dd><dt class="dt-list">Single response file.</dt><dd class="dd-list">Example:<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enblend @ list
</span></div></dd></dl></div><p>where file&#XA0;<span class="c011">list</span> contains</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
img1.exr <br>
 img2.exr <br>
 img3.exr <br>
 img4.exr <br>
 </span></div></dd></dl></div><p>Ultimate order: <span class="c011">img1.exr</span>, <span class="c011">img2.exr</span>, <span class="c011">img3.exr</span>,
<span class="c011">img4.exr</span>.</p></dd><dt class="dt-list">Mixed literal names and response files.</dt><dd class="dd-list">Example:<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enblend @ master.list image-09.png image-10.png
</span></div></dd></dl></div><p>where file&#XA0;<span class="c011">master.list</span> comprises of</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
image-01.png <br>
 @ first.list <br>
 image-04.png <br>
 @ second.list <br>
 image-08.png <br>
 </span></div></dd></dl></div><p><span class="c011">first.list</span> is</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
image-02.png <br>
 image-03.png <br>
 </span></div></dd></dl></div><p>and <span class="c011">second.list</span> contains</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
image-05.png <br>
 image-06.png <br>
 image-07.png <br>
 </span></div></dd></dl></div><p>Ultimate order: <span class="c011">image-01.png</span>, <span class="c011">image-02.png</span>, <span class="c011">image-03.png</span>,
<span class="c011">image-04.png</span>, <span class="c011">image-05.png</span>, <span class="c011">image-06.png</span>,
<span class="c011">image-07.png</span>, <span class="c011">image-08.png</span>, <span class="c011">image-09.png</span>,
<span class="c011">image-10.png</span>,
</p></dd></dl><!--TOC subsection id="sec:response-file-format" 4.4.1&#XA0;&#XA0;Response File Format-->
<h3 class="subsection" id="sec:response-file-format">4.4.1&#XA0;&#XA0;<a id="hevea_general339"></a><a id="hevea_general340"></a>Response File Format</h3><!--SEC END --><p><a id="hevea_general341"></a><a id="hevea_general342"></a>Response files contain one filename per line. Blank lines or lines beginning with a
&#X27E8;<span class="c005">#</span>&#X27E9;&#XA0;sign are ignored; the latter can serve as comments.
Filenames that begin with a &#X27E8;<span class="c005">@</span>&#X27E9;&#XA0;character denote other
response files. Table&#XA0;<a href="#tab%3Aresponse-file-format">4.5</a> states a formal grammar of response
files in <a href="https://en.wikipedia.org/wiki/Ebnf"><span class="c016">EBNF</span></a>.</p><blockquote class="table"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="c022"> <span class="c013">response-file</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">line</span>* </td></tr>
<tr><td class="c022"> <span class="c013">line</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022">(<span class="c013">comment</span> | <span class="c013">file-spec</span>) [&#X2018;<span class="c005">\r</span>&#X2019;] &#X2018;<span class="c005">\n</span>&#X2019; </td></tr>
<tr><td class="c022"> <span class="c013">comment</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">space</span>* &#X2018;<span class="c005">#</span>&#X2019; <span class="c013">text</span> </td></tr>
<tr><td class="c022"> <span class="c013">file-spec</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">space</span>* &#X2018;<span class="c005">@ </span>&#X2019; <span class="c013">filename space</span>* </td></tr>
<tr><td class="c022"> <span class="c013">space</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022">&#X2018;<span class="c005">&#X2423;</span>&#X2019; | &#X2018;<span class="c005">\t</span>&#X2019; </td></tr>
</table><p>where <span class="c013">text</span> is an arbitrary string and <span class="c013">filename</span> is any filename.</p><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.5: <a id="tab:response-file-format"></a><a id="hevea_general343"></a><a id="hevea_general344"></a><span class="c016">EBNF</span> definition of the grammar of response files.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>In a response file relative filenames are used relative the response file itself, not relative
to the current-working directory of the application.</p><p>The above grammar might surprise the user in the some ways.</p><dl class="list"><dt class="dt-list">

White-space trimmed at both line ends</dt><dd class="dd-list">For convenience, white-space at the beginning and at the end of each line is ignored.
However, this implies that response files cannot represent filenames that start or end with
white-space, as there is no quoting syntax. Filenames with embedded white-space cause no
problems, though.</dd><dt class="dt-list">Only whole-line comments</dt><dd class="dd-list">Comments in response files always occupy a complete line. There are no &#X201C;line-ending
comments&#X201D;. Thus, in<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
# exposure series <br>
 img-0.33ev.tif # "middle" EV <br>
 img-1.33ev.tif <br>
 img+0.67ev.tif <br>
 </span></div></dd></dl></div><p>only the first line contains a comment, whereas the second line includes none. Rather, it
refers to a file called</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
img-0.33ev.tif # "middle" EV
</span></div></dd></dl></div></dd><dt class="dt-list">Image filenames cannot start with &#X27E8;<span class="c005">@</span>&#X27E9;</dt><dd class="dd-list">A &#X27E8;<span class="c005">@</span>&#X27E9;&#XA0;sign invariably introduces a response file, even
if the filename&#X2019;s extension hints towards an image.
</dd></dl><p><a id="hevea_general345"></a>If <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> do not recognize a response file, they will skip the file and issue a
warning. To force a file being recognized as a response file add one of the following syntactic
comments to the <em>first</em> line of the file.</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
response-file: true</span><a id="hevea_syncomm0"></a><span class="c005"> <br>
 enblend-response-file: true</span><a id="hevea_syncomm1"></a><span class="c005"> <br>
 enfuse-response-file: true</span><a id="hevea_syncomm2"></a><span class="c005"> <br>
</span></div></dd></dl></div><p>Finally, Example&#XA0;<a href="#ex%3Aresponse-file">4.4.5</a> shows a complete response file.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
#&#XA0;4\pi panorama! <br>
  <br>
 #&#XA0;These pictures were taken with the panorama head. <br>
 @&#XA0;round-shots.list <br>
  <br>
 #&#XA0;Freehand sky shot. <br>
 zenith.tif <br>
  <br>
 #&#XA0;"Legs, will you go away?" images. <br>
 nadir-2.tif <br>
 nadir-5.tif <br>
 nadir.tif <br>
 </span></div></dd></dl></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 4.4.5: <a id="ex:response-file"></a>Example of a complete response file.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><!--TOC subsection id="sec:syntactic-comments" 4.4.2&#XA0;&#XA0;Syntactic Comments-->
<h3 class="subsection" id="sec:syntactic-comments">4.4.2&#XA0;&#XA0;<a id="hevea_general346"></a><a id="hevea_general347"></a>Syntactic Comments</h3><!--SEC END --><p>Comments that follow the format described in
Table&#XA0;<a href="#tab%3Aresponse-file-syntactic-comment">4.6</a> are treated as instructions how to
interpret the rest of the response file. A syntactic comment is effective immediately and its
effect persists to the end of the response file, unless another syntactic comment undoes it.</p><blockquote class="table"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="c022"> <span class="c013">syntactic-comment</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">space</span>* &#X2018;<span class="c005">#</span>&#X2019;
<span class="c013">space</span>* <span class="c013">key
space</span>* &#X2018;<span class="c005">:</span>&#X2019;
<span class="c013">space</span>* <span class="c013">value</span> </td></tr>
<tr><td class="c022">
<span class="c013">key</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022">(&#X2018;<span class="c005">A</span>&#X2019;&#X2026;&#X2018;<span class="c005">Z</span>&#X2019; | &#X2018;<span class="c005">a</span>&#X2019;&#X2026;&#X2018;<span class="c005">z</span>&#X2019; | &#X2018;<span class="c005">-</span>&#X2019;)+ </td></tr>
</table><p>where <span class="c013">value</span> is an arbitrary string.</p><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.6: <a id="tab:response-file-syntactic-comment"></a><a id="hevea_general348"></a><a id="hevea_general349"></a><span class="c016">EBNF</span> definition of the grammar of syntactic comments in response files.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>Unknown syntactic comments are silently ignored.</p><p>A special index for <a href="#sec%3Asyncomm-index">syntactic comments</a> lists them in
alphabetic order.</p><!--TOC subsection id="sec:globbing-algorithms" 4.4.3&#XA0;&#XA0;Globbing Algorithms-->
<h3 class="subsection" id="sec:globbing-algorithms">4.4.3&#XA0;&#XA0;<a id="hevea_general350"></a><a id="hevea_general351"></a>Globbing Algorithms</h3><!--SEC END --><p>The three equivalent syntactic keys</p><ul class="itemize"><li class="li-itemize">
<span class="c005">glob</span>,<a id="hevea_syncomm3"></a></li><li class="li-itemize"><span class="c005">globbing</span>,<a id="hevea_syncomm4"></a> or</li><li class="li-itemize"><span class="c005">filename-globbing</span><a id="hevea_syncomm5"></a>
</li></ul><p>control the algorithm that <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> use to glob filenames in response
files.</p><p><a id="hevea_general352"></a><a id="hevea_general353"></a>All versions of <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> support at least two algorithms: <span class="c005">literal</span>, which is
the default, and <span class="c005">wildcard</span>. See Table&#XA0;<a href="#tab%3Aglobbing-algorithms">4.7</a> for a list of
all possible globbing algorithms. To find out about the algorithms in your version of <span class="c008">Enfuse</span> or
<span class="c008">Enblend</span> use option&#XA0;<span class="c005">--show-globbing-algorithms</span>.</p><blockquote class="table"><div class="center"><hr class="c029"></div>
<div class="minipage">
<dl class="list"><dt class="dt-list">

<a id="hevea_general354"></a><span class="c005">literal</span></dt><dd class="dd-list">Do not glob. Interpret all filenames in response files as literals. This is the default.<p>Please remember that white-space at both ends of a line in a response file <em>always</em>
gets discarded.</p><p><a id="hevea_general355"></a><a id="hevea_general356"></a></p></dd><dt class="dt-list"><span class="c005">wildcard</span></dt><dd class="dd-list">Glob using the wildcard characters&#XA0;&#X2018;<span class="c005">?</span>&#X2019;, &#X2018;<span class="c005">*</span>&#X2019;, &#X2018;<span class="c005">[</span>&#X2019;, and &#X2018;<span class="c005">]</span>&#X2019;.<p>The <span class="c016">Win32</span> implementation only globs the filename part of a path, whereas all
other implementations perform wildcard expansion in <em>all</em> path components. Also see
<a href="http://man7.org/linux/man-pages/man7/glob.7.html">glob(7)</a>.</p><p><a id="hevea_general357"></a>
</p></dd><dt class="dt-list"><span class="c005">none</span></dt><dd class="dd-list">Alias for <span class="c005">literal</span>.<p><a id="hevea_general358"></a>
</p></dd><dt class="dt-list"><span class="c005">shell</span></dt><dd class="dd-list">The <span class="c005">shell</span> globbing algorithm works as <span class="c005">literal</span> does. In addition, it
interprets the wildcard characters&#XA0;&#X2018;<span class="c005">{</span>&#X2019;, &#X2018;<span class="c005">@</span>&#X2019;, and &#X2018;<span class="c005">~</span>&#X2019;.
This makes the expansion process behave more like common <span class="c016">UN*X</span>
shells.<p><a id="hevea_general359"></a>
</p></dd><dt class="dt-list"><span class="c005">sh</span></dt><dd class="dd-list">Alias for <span class="c005">shell</span>.
</dd></dl>
</div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.7: <a id="tab:globbing-algorithms"></a><a id="hevea_general360"></a><a id="hevea_general361"></a>Globbing algorithms for the use in response files.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>Example&#XA0;<a href="#ex%3Aglobbing-algorithm">4.4.6</a> gives an example of how to control filename-globbing in
a response file.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
#&#XA0;Horizontal panorama <br>
 #&#XA0;15 images <br>
  <br>
 #&#XA0;filename-globbing: wildcard <br>
  <br>
 image_000[0-9].tif <br>
 image_001[0-4].tif <br>
 </span></div></dd></dl></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 4.4.6: <a id="ex:globbing-algorithm"></a>Control filename-globbing in a response file with a syntactic comment.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><!--TOC subsection id="sec:default-layer-selection" 4.4.4&#XA0;&#XA0;Default Layer Selection-->
<h3 class="subsection" id="sec:default-layer-selection">4.4.4&#XA0;&#XA0;<a id="hevea_general362"></a><a id="hevea_general363"></a>Default Layer Selection</h3><!--SEC END --><p>The key&#XA0;<span class="c005">layer-selector</span><a id="hevea_syncomm6"></a> provides the same functionality as does the
command-line option&#XA0;<span class="c005">--layer-selector</span>, but on a per response-file basis. See
Section&#XA0;<a href="#sec%3Acommon-options">4.2.1</a>.</p><p>This syntactic comment affects the layer selection of all images listed after it including those
in included response files until another <span class="c005">layer-selector</span> overrides it.</p><!--TOC section id="sec:layer-selection" 4.5&#XA0;&#XA0;Layer Selection<sup><span class="c008">c</span></sup>-->
<h2 class="section" id="sec:layer-selection">4.5&#XA0;&#XA0;<a id="hevea_general364"></a>Layer Selection<sup><span class="c008">c</span></sup></h2><!--SEC END --><p>Some image formats, like for example <span class="c016">TIFF</span>, allow for storing more than one image in a
single file, where all the contained images can have different sizes, number of channels,
resolutions, compression schemes, etc. The file there acts as a container for an <em>ordered</em>
set of images.</p><p><a id="hevea_general365"></a><a id="hevea_general366"></a><a id="hevea_general367"></a><a id="hevea_general368"></a><a id="hevea_general369"></a>In the <span class="c016">TIFF</span>-documentation these are known as &#X201C;multi-page&#X201D; files and because the
image data in a <span class="c016">TIFF</span>-file is associated with a &#X201C;directory&#X201D;, the files sometimes are
also called &#X201C;multi-directory&#X201D; files. In this manual, multiple images in a file are called
&#X201C;layers&#X201D;.</p><p>The main advantage of multi-layer files over a set of single-layer ones is a cleaner work area
with less image-files and thus an easier handling of the intermediate products which get created
when generating a panorama or fused image, and in particularly with regard to panoramas of fused
images.</p><p>The difficulty in working with layers is their lack of a possibly mnemonic naming scheme. They
do not have telling names like <span class="c011">taoth-vaclarush</span> or <span class="c011">valos-cor</span>, but only
numbers.</p><!--TOC subsection id="sec:layer-selection-syntax" 4.5.1&#XA0;&#XA0;Layer Selection Syntax-->
<h3 class="subsection" id="sec:layer-selection-syntax">4.5.1&#XA0;&#XA0;<a id="hevea_general370"></a><a id="hevea_general371"></a>Layer Selection Syntax</h3><!--SEC END --><p>To give the user the same flexibility in specifying and ordering images as with single-layer
images, both <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> offer a special syntax to select layers in multi-page files
by appending a <span class="c013">layer-specification</span> to the image file name.
Table&#XA0;<a href="#tab%3Alayer-selection-grammar">4.8</a> defines the grammar of
<span class="c013">layer-specification</span>s.</p><p>Selecting a tuple of layers with a <span class="c013">layer-specification</span> overrides the active layer
selection algorithm. See also
option&#XA0;<a href="#opt%3Alayer-selector"><span class="c005">--layer-selector</span></a> and
Section&#XA0;<a href="#sec%3Aresponse-files">4.4</a>. Layer selection works at the command-line as well as
in Response Files; see Section&#XA0;<a href="#sec%3Aresponse-files">4.4</a>.</p><blockquote class="table"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="c022"> <span class="c013">layer-specification</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"> &#X2018;<span class="c005">[</span>&#X2019; <span class="c013">selection-tuple</span> &#X2018;<span class="c005">]</span>&#X2019; </td></tr>
<tr><td class="c022"> <span class="c013">selection-tuple</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">selection</span> [ &#X2018;<span class="c005">:</span>&#X2019; <span class="c013">selection</span> ] </td></tr>
<tr><td class="c022"> <span class="c013">selection</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022">{ <span class="c013">singleton</span> | <span class="c013">range</span> } </td></tr>
<tr><td class="c022"> <span class="c013">range</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022">[ &#X2018;<span class="c005">reverse</span>&#X2019; ]
[ <span class="c013">range-bound</span> ] &#X2018;<span class="c005">..</span>&#X2019; [ <span class="c013">range-bound</span> ] </td></tr>
<tr><td class="c022"> <span class="c013">range-bound</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">singleton</span> | &#X2018;<span class="c005">_</span>&#X2019; </td></tr>
<tr><td class="c022"> <span class="c013">singleton</span></td><td class="c020">&#XA0;&#XA0;::=&#XA0;&#XA0;</td><td class="c022"><span class="c013">index</span> | &#X2018;<span class="c005">-</span>&#X2019; <span class="c013">index</span> </td></tr>
</table><p>where <span class="c013">index</span> is an integral layer index starting at one.</p><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 4.8: <a id="tab:layer-selection-grammar"></a><a id="hevea_general372"></a><span class="c016">EBNF</span> definition of the grammar of layer specifications. In addition to the
<span class="c013">selection</span> separator&#XA0;&#X2018;<span class="c005">:</span>&#X2019; shown all usual numeric-option delimiters
(&#X2018;&#X27E8;<span class="c005">;:/</span>&#X27E9;&#X2019;) apply. The keyword for <span class="c013">range</span>
reversal, &#X2018;&#X27E8;<span class="c005">reverse</span>&#X27E9;&#X2019;, can be abbreviated to any length
and is treated case-insensitively.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>The simplest <span class="c013">layer-specification</span> are the layer-<span class="c013">index</span>es. The first layer
gets index&#XA0;1, the second layer&#XA0;2, and so on. Zero never is a valid index! For convenience
indexing backwards<sup><a id="text6" href="#note6">2</a></sup> is also possible. This means by prefixing an index with a
minus-sign&#XA0;(&#X2018;<span class="c005">-</span>&#X2019;) counting will start with the last layer of the <em>associated</em>
multi-page image, such that the last layer always has index&#XA0;<span class="c005">-1</span>, the next to last
index&#XA0;<span class="c005">-2</span> and so on. Out-of-range indexes are silently ignored whether forward or
backward.</p><p>The single layer of a single-layer file always can be accessed either with index&#XA0;&#X2018;<span class="c005">1</span>&#X2019; or
&#X2018;<span class="c005">-1</span>&#X2019;.</p><p>Select a contiguous <span class="c013">range</span> of indexes with the range
operator&#XA0;&#X2018;&#X27E8;<span class="c005">..</span>&#X27E9;&#X2019;, where the <span class="c013">range-bound</span>s are
forward or backward indices. Leaving out a bound or substituting the open-range
indicator&#XA0;&#X2018;&#X27E8;<span class="c005">_</span>&#X27E9;&#X2019; means a maximal range into the
respective direction.</p><p>Layer specifications ignore white space, but usual shells do not. This means that at the
command-line</p><div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse --output=out.tif --verbose multi-layer.tif[2:]
</span></div></div><p>works, whereas spaced-out out phrase &#X2018;<span class="c005">multi-layer.tif [2 : ]</span>&#X2019; must be quoted</p><div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse --output=out.tif --verbose &#X2019;multi-layer.tif[2 : ]&#X2019;
</span></div></div><p>Quoting will also be required if <span class="c008">Enfuse</span>&#X2019;s delimiters have special meanings to the shell.</p><p><br>
</p><p>Examples for an image with 8&#XA0;layers.</p><dl class="list"><dt class="dt-list">

<span class="c005">[]</span></dt><dd class="dd-list"> The empty selection selects nothing and in that way works like the
layer-selector &#X2018;<span class="c005">no-layer</span>&#X2019;.</dd><dt class="dt-list"><span class="c005">[2 : 4 : 5]</span></dt><dd class="dd-list"> Select only layers&#XA0;2, 4, and&#XA0;5 in this order.</dd><dt class="dt-list"><span class="c005">[2 : -4 : -3]</span></dt><dd class="dd-list"> Like before, but with some backwards-counting indices.</dd><dt class="dt-list"><span class="c005">[1 .. 4]</span></dt><dd class="dd-list"> Layers 1&#XA0;to 4, this is 1, 2, 3, and&#XA0;4 in
this order.</dd><dt class="dt-list"><span class="c005">[_ .. 4]</span></dt><dd class="dd-list">
Same as above in open-range notation.</dd><dt class="dt-list"><span class="c005">[.. 4]</span></dt><dd class="dd-list"> Same as above in abbreviated, open-range
notation.</dd><dt class="dt-list"><span class="c005">[-2 .. _]</span></dt><dd class="dd-list">
The last two layers, which are&#XA0;7 and&#XA0;8 in our running example.</dd><dt class="dt-list"><span class="c005">[_ .. _]</span></dt><dd class="dd-list">
All layers in their natural order.</dd><dt class="dt-list"><span class="c005">[..]</span></dt><dd class="dd-list"> All layers in their natural order selected with
the abbreviated notation.</dd><dt class="dt-list"><span class="c005">[reverse
_ .. _]</span></dt><dd class="dd-list">
All layers in reverse order. This yields 8, 7, 6, 5, 4, 3, 2, and&#XA0;1.</dd><dt class="dt-list"><span class="c005">[rev ..]</span></dt><dd class="dd-list"> All layers in reversed order as before
selected with the abbreviated notation.</dd><dt class="dt-list"><span class="c005">[r -3 ..]</span></dt><dd class="dd-list"> The last three layers in reverse order,
this is 8, 7 and&#XA0;6 in our running example.
</dd></dl><div class="geeknote"><blockquote class="quotation"><span class="c015">
Shell expansion will not work anymore with a file name terminated by a layer specification
expression (or anything else), because to the shell it is not a file name anymore. Work
around with, for example,</span><div class="terminal"><div class="flushleft"><span class="c007">
$ enfuse &#X2018;for x in image-??.tif; do echo $x[2]; done&#X2018;
</span></div></div><p><span class="c015">or</span></p><div class="terminal"><div class="flushleft"><span class="c007">
$ enfuse $(ls -1 image-??.tif | sed -e &#X2019;s/$/[2]/&#X2019;)
</span></div></div><p><span class="c015">The order of the indices determines the order of the layers, this is, the images. An index
can occur multiple times, which causes layer to be considered <em>again</em>. Consequently,
this will lead to an error with <span class="c008">Enblend</span>, but may be desired with
<span class="c008">Enfuse</span> in <span class="c005">soft-mask</span>&#XA0;mode to give the image more weight by mentioning it
more than once.
</span></p></blockquote></div><!--TOC subsection id="sec:tools-for-multi-page-files" 4.5.2&#XA0;&#XA0;Tools for Multi-Page Files-->
<h3 class="subsection" id="sec:tools-for-multi-page-files">4.5.2&#XA0;&#XA0;<a id="hevea_general374"></a>Tools for Multi-Page Files</h3><!--SEC END --><p>Here are some tools that are particularly useful when working with multi-page files. For more
helpful utilities check out Appendix&#XA0;<a href="#sec%3Ahelpful-programs">A</a>.</p><ul class="itemize"><li class="li-itemize">
<a id="hevea_program13"></a><span class="c008">Hugin</span>&#X2019;s stitcher, <a id="hevea_program14"></a><span class="c017">nona</span>
produces multi-page <span class="c016">TIFF</span>&#XA0;file, when called with the &#X2018;<span class="c005">-m
TIFF_multilayer</span>&#X2019;-option.</li><li class="li-itemize">The utility <a id="hevea_program15"></a><span class="c017">tiffcp</span> of the
<span class="c016">TIFF</span>-<a href="http://www.remotesensing.org/libtiff/">LibTIFF tool suite</a> merges several
<span class="c016">TIFF</span>-images into a single multi-page file.</li><li class="li-itemize">The sister program <a id="hevea_program16"></a><span class="c017">tiffsplit</span> splits a
multi-page file into a set of single-page <span class="c016">TIFF</span>-images.</li><li class="li-itemize">Another utility of the same origin, <a id="hevea_program17"></a><span class="c017">tiffinfo</span>, is
very helpful when inquiring the contents of single- or multi-page file <span class="c016">TIFF</span>-files.<p><a id="hevea_general375"></a>
</p></li><li class="li-itemize">All tools of the <a href="https://www.imagemagick.org/script/index.php"><span class="c008">ImageMagick</span></a>-suite, like, for example,
<a id="hevea_program18"></a><span class="c017">convert</span> and <a id="hevea_program19"></a><span class="c017">display</span> use a
<a href="https://www.imagemagick.org/script/command-line-processing.php#input">similar syntax</a> as <span class="c008">Enfuse</span> to select layers
(which in <span class="c008">ImageMagick</span> parlance are called &#X201C;frames&#X201D;) in multi-page files.
Please note that <span class="c008">ImageMagick</span> tools start indexing at zero, whereas we start at
one.</li><li class="li-itemize"><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> by default apply the &#X2018;&#X27E8;<span class="c005">all-layers</span>&#X27E9;&#X2019; selector (see
option&#XA0;<a href="#opt%3Alayer-selector"><span class="c005">--layer-selector</span></a>) to each of the input
images.
</li></ul><p>Please bear in mind that some image-processing tools &#X2013; none of the above though &#X2013; do
<em>not</em> handle multi-page files correctly, where the most unfruitful ones only take care of
the first layer and <em>silently</em> ignore any further layers.</p><!--BEGIN NOTES section-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note6" href="#text6">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a id="hevea_general373"></a><span class="c016">Samantha
Carter</span>: &#X201C;There has to be a way to reverse the process. The answer has to be here.&#X201D;</div>
</dd></dl>
<!--END NOTES-->
<!--CUT END -->
<!--TOC chapter id="sec:weighting-functions" Chapter&#XA0;5&#XA0;&#XA0;Weighting Functions-->
<h1 class="chapter" id="sec:weighting-functions">Chapter&#XA0;5&#XA0;&#XA0;<a id="hevea_general376"></a><a id="hevea_general377"></a>Weighting Functions</h1><!--SEC END --><p>As has been noted in the introductory <a href="#sec%3Aoverview">Overview</a>, <span class="c008">Enfuse</span> supports
four different types of weighting. The following sections describe the concept of weighting and
all weighting functions in detail.</p><!--TOC section id="sec:weighting-pixels" 5.1&#XA0;&#XA0;Weighting Pixels-->
<h2 class="section" id="sec:weighting-pixels">5.1&#XA0;&#XA0;<a id="hevea_general378"></a>Weighting Pixels</h2><!--SEC END --><p>Image fusion maps each pixel&#XA0;<span class="c011">P</span>(<span class="c011">i</span>, <span class="c011">x</span>, <span class="c011">y</span>) of every input image&#XA0;<span class="c011">i</span> to a single pixel&#XA0;<span class="c011">Q</span>(<span class="c011">x</span>, <span class="c011">y</span>)
in the output image:
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">P</span>(<span class="c011">i</span>,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;&#X2192;&#XA0;<span class="c011">Q</span>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>),
</td></tr>
</table><p>
where <span class="c011">x</span> runs from&#XA0;1 to the width of the images, <span class="c011">y</span> from&#XA0;1 to the height, and <span class="c011">i</span>
from&#XA0;1 to the number&#XA0;<span class="c011">n</span> of input images.</p><table class="display dcenter"><tr class="c025"><td class="dcell">
<a id="equ:weight"></a>
<span class="c011">w</span>(<span class="c011">P</span>(1,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>))&#XA0;<span class="c011">P</span>(1,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;+&#XA0;&#X2026;&#XA0;+&#XA0;<span class="c011">w</span>(<span class="c011">P</span>(<span class="c011">n</span>,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>))&#XA0;<span class="c011">P</span>(<span class="c011">n</span>,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)
&#X2192;
<span class="c011">Q</span>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>),
&#XA0;&#XA0;&#XA0;&#XA0;(5.1)</td></tr>
</table><p>
where</p><ul class="itemize"><li class="li-itemize">
each <span class="c011">w</span> is non-negative to yield a physical intensity and</li><li class="li-itemize">the sum of all <span class="c011">w</span> is 1 to leave the total intensity unchanged.
</li></ul><p>The pixel weights&#XA0;<span class="c011">w</span> themselves are weighted sums with the same constraints</p><table class="display dcenter"><tr class="c025"><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;

</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c023">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">w</span>(<span class="c011">P</span>)&#XA0;=&#XA0;&#XA0;</td><td class="c022">&#XA0;<span class="c011">w</span><sub><span class="c011">exp</span></sub>&#XA0;&#XA0;&#XA0;<span class="c011">f</span><sub><span class="c011">exp</span></sub>(<span class="c011">P</span>)&#XA0;+&#XA0;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td></tr>
<tr><td class="c023">&nbsp;</td><td class="c022">&#XA0;<span class="c011">w</span><sub><span class="c011">sat</span></sub>&#XA0;&#XA0;&#XA0;<span class="c011">f</span><sub><span class="c011">sat</span></sub>(<span class="c011">P</span>)&#XA0;+&#XA0;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td></tr>
<tr><td class="c023">&nbsp;</td><td class="c022">&#XA0;<span class="c011">w</span><sub><span class="c011">cont</span></sub>&#XA0;&#XA0;&#XA0;<span class="c011">f</span><sub><span class="c011">cont</span></sub>(<span class="c011">P</span>,&#XA0;<span class="c011">r</span><sub><span class="c011">cont</span></sub>)&#XA0;+&#XA0;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td></tr>
<tr><td class="c023">&nbsp;</td><td class="c022">&#XA0;<span class="c011">w</span><sub><span class="c011">ent</span></sub>&#XA0;&#XA0;&#XA0;<span class="c011">f</span><sub><span class="c011">ent</span></sub>(<span class="c011">P</span>,&#XA0;<span class="c011">r</span><sub><span class="c011">ent</span></sub>).
</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td></tr>
</table></td></tr>
</table><p>Here we have abbreviated <span class="c011">P</span>(<span class="c011">i</span>, <span class="c011">x</span>, <span class="c011">y</span>) to <span class="c011">P</span> for simplicity. The user defines the
constants&#XA0;<span class="c011">w</span><sub><span class="c011">exp</span></sub>, <span class="c011">w</span><sub><span class="c011">sat</span></sub>, <span class="c011">w</span><sub><span class="c011">cont</span></sub>, and <span class="c011">w</span><sub><span class="c011">ent</span></sub>
with the options&#XA0;<span class="c005">--exposure-weight</span>, <span class="c005">--saturation-weight</span>,
<span class="c005">--contrast-weight</span>, and <span class="c005">--entropy-weight</span> respectively. The
functions&#XA0;<span class="c011">f</span><sub><span class="c011">exp</span></sub>, <span class="c011">f</span><sub><span class="c011">sat</span></sub>, <span class="c011">f</span><sub><span class="c011">cont</span></sub>, and <span class="c011">f</span><sub><span class="c011">ent</span></sub>
along with the window sizes&#XA0;<span class="c011">r</span><sub><span class="c011">cont</span></sub> and <span class="c011">r</span><sub><span class="c011">ent</span></sub> are explained in the next
sections.</p><!--TOC subsection id="sec:weighted-average" 5.1.1&#XA0;&#XA0;Weighted Average-->
<h3 class="subsection" id="sec:weighted-average">5.1.1&#XA0;&#XA0;<a id="hevea_general379"></a><a id="hevea_general380"></a>Weighted Average</h3><!--SEC END --><p>By default, <span class="c008">Enfuse</span> uses a weighted average, where <em>each</em> pixel contributes as much as its
weight demands. Of course the weights can be extreme, favoring only a few pixels or even only
one pixel in the input stack. Extremes are not typical, however.</p><p>Equal weights are another extreme that turns (<a href="#equ%3Aweight">5.1</a>) into an arithmetic average.
This is why we sometimes speak of the &#X201C;averaging property&#X201D; of this weighting algorithm, like
smoothing out noise.</p><!--TOC subsection id="sec:disabling-averaging" 5.1.2&#XA0;&#XA0;Disabling Averaging-->
<h3 class="subsection" id="sec:disabling-averaging">5.1.2&#XA0;&#XA0;<a id="hevea_general381"></a><a id="hevea_general382"></a><a id="hevea_option56"></a>Disabling Averaging: Option&#XA0;&#X2018;<span class="c005">--hard-mask</span>&#X2019;</h3><!--SEC END --><p>The weighted average computation as described above has proven to be widely successful with the
exception of one special case: focus stacking, where the averaging noticeably softens the final
image.</p><p>Use &#X2018;<span class="c005">--hard-mask</span>&#X2019; to switch <span class="c008">Enfuse</span> into a different weighting mode, where the pixel with
the highest weight wins, this is, gets weight&#XA0;one, and all other pixels get the weight of zero.
With option&#XA0;<span class="c005">--hard-mask</span> (<a href="#equ%3Aweight">5.1</a>) becomes
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><span class="c011">P</span>(<span class="c011">i</span>,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;&#X2192;&#XA0;<span class="c011">Q</span>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>),
</td></tr>
</table><p>
where
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">w</span>(<span class="c011">P</span>(<span class="c011">i</span>,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>))&#XA0;&#X2265;&#XA0;<span class="c011">w</span>(<span class="c011">P</span>(<span class="c011">j</span>,&#XA0;<span class="c011">x</span>,&#XA0;<span class="c011">y</span>))&#XA0;&#XA0;&#XA0;&#XA0;for all&#XA0;&#XA0;&#XA0;1&#XA0;&#X2264;&#XA0;<span class="c011">j</span>&#XA0;&#X2264;&#XA0;<span class="c011">n</span>.
</td></tr>
</table><p>
Note that this &#X201C;averaging&#X201D; scheme lacks the nice noise-reduction property of the
weighted average&#XA0;(<a href="#equ%3Aweight">5.1</a>), because only a single input pixel contributes to the
output.</p><!--TOC subsection id="sec:single-criterion-fusing" 5.1.3&#XA0;&#XA0;Single Criterion Fusing-->
<h3 class="subsection" id="sec:single-criterion-fusing">5.1.3&#XA0;&#XA0;<a id="hevea_general383"></a><a id="hevea_general384"></a>Single Criterion Fusing</h3><!--SEC END --><p><span class="c008">Enfuse</span> allows the user to weight each pixel of an input image by up to four different criteria
(see e.g. Chapter&#XA0;<a href="#sec%3Aoverview">1</a>). However, it does not force the user to do so.
For some applications and more often simply to gain further insight into the weighting and
fusing process, looking at only a single criterion is the preferred way to work.</p><p><a id="hevea_general385"></a><a id="hevea_general386"></a>The version of <span class="c008">Enfuse</span> for which this documentation was prepared, uses the default weights as
stated in Table&#XA0;<a href="#tab%3Adefault-weights">5.1</a>. Notice that by default <em>more than one</em>
weight is larger than zero, which means they are <em>active</em>.</p><blockquote class="table"><div class="center"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c020">Criterion</td><td class="c020">Default Weight </td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c022">Exposure</td><td class="c020">&#X27E8;1.0&#X27E9; </td></tr>
<tr><td class="c022"> Saturation</td><td class="c020">&#X27E8;0.2&#X27E9; </td></tr>
<tr><td class="c022"> Local Contrast</td><td class="c020">&#X27E8;0.0&#X27E9; </td></tr>
<tr><td class="c022"> Local Entropy</td><td class="c020">&#X27E8;0.0&#X27E9;
</td></tr>
</table><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 5.1: <a id="tab:default-weights"></a><a id="hevea_general387"></a><a id="hevea_general388"></a><span class="c008">Enfuse</span>&#X2019;s default weights as compiled into enfuse.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>To disable a particular criterion set its weight to zero as for example</p><div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--exposure-weight=1 --saturation-weight=0 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--contrast-weight=0 --entropy-weight=0 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;image_[1-3].png
</span></div></div><p>instructs <span class="c008">Enfuse</span> to consider only the exposure weight. Combine this with
option&#XA0;<span class="c005">--save-masks</span> and it will become clearer how <span class="c008">Enfuse</span> computes the exposure weight
for the set of images.</p><p><a id="hevea_general389"></a><a id="hevea_general390"></a>Another problem that can be inspected by fusing with just a single active criterion and saving
the masks is if the weights of one criterion completely overpower all others.</p><!--TOC section id="sec:exposure-weighting" 5.2&#XA0;&#XA0;Exposure Weighting-->
<h2 class="section" id="sec:exposure-weighting">5.2&#XA0;&#XA0;<a id="hevea_general391"></a><a id="hevea_general392"></a>Exposure Weighting</h2><!--SEC END --><p><a id="hevea_option57"></a>Exposure weighting prefers pixels with a luminance&#XA0;<span class="c011">Y</span> close to the user-chosen optimum value
(option&#XA0;<span class="c005">--exposure-optimum</span>, default: &#X27E8;0.5&#X27E9;) of the
normalized, real-valued luminance interval&#XA0;(0, 1).</p><p><a id="hevea_general393"></a><a id="hevea_general394"></a><a id="hevea_option58"></a><span class="c016">RGB</span>-pixels get converted to luminance before using the grayscale projector given by
&#X2018;<span class="c005">--gray-projector</span>&#X2019;, which defaults to <span class="c005">average</span>. Grayscale pixels simply are
identified with luminance.</p><p><a id="hevea_general395"></a><a id="hevea_general396"></a>In the normalized luminance interval 0.0 represents pure black and 1.0 represents pure white
independently of the data type of the input image. This is, for a <span class="c016">JPEG</span> image the
luminance&#XA0;255 maps to 1.0 in the normalized interval and for a 32&#XA0;bit <span class="c016">TIFF</span> picture the
highest luminance value&#XA0;4294967295 also maps to 1.0. The middle of the luminance interval, 0.5,
is where a neutral gray tone ends up with every camera that had no exposure correction dialed
in, for example the image of any gray-card or white-card.</p><p>The exposure weighting algorithm only looks at a single pixel at a time; the pixel&#X2019;s
neighborhood is not taken into account.</p><!--TOC subsection id="sec:built-in-functions" 5.2.1&#XA0;&#XA0;Built-In Functions-->
<h3 class="subsection" id="sec:built-in-functions">5.2.1&#XA0;&#XA0;<a id="hevea_general397"></a>Built-In Functions</h3><!--SEC END --><p><a id="hevea_general398"></a><a id="hevea_general399"></a>Up to <span class="c008">Enfuse</span> version&#XA0;4.1 the only weighting function is the <span class="c016">Gaussian</span>
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><span class="c011">w</span><sub><span class="c011">exp</span></sub>(<span class="c011">Y</span>)&#XA0;=
exp</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239C;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell">&#X2212;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">2</td></tr>
</table></td><td class="dcell">
</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">Y</span>&#XA0;&#X2212;&#XA0;<span class="c011">Y</span><sub><span class="c011">opt</span></sub></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019"><span class="c011">width</span></td></tr>
</table></td><td class="dcell">&#XA0;</td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell"><table class="display"><tr><td class="dcell c021">2</td></tr>
<tr><td class="dcell c021"><br>
<br>
<br>
</td></tr>
<tr><td class="dcell c021">&nbsp;</td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X239F;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">,
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Aweight%3Agauss">4.3</a> rep.)</td></tr>
</table><p>
whose maximum position&#XA0;<span class="c011">Y</span><sub><span class="c011">opt</span></sub> and <span class="c011">width</span> are controlled by the command
line options <span class="c005">--exposure-optimum</span> and&#XA0;<span class="c005">--exposure-width</span> respectively, where
<span class="c011">Y</span><sub><span class="c011">opt</span></sub> defaults to &#X27E8;0.5&#X27E9; and <span class="c011">width</span> defaults to
&#X27E8;0.2&#X27E9;. Figure&#XA0;<a href="#fig%3Agaussian">5.1</a> shows some
<span class="c016">Gaussians</span>.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="gaussian.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.1: <a id="fig:gaussian"></a><span class="c008">Enfuse</span>&#X2019;s <span class="c016">Gaussian</span> function with the parameters <span class="c013">optimum</span> = 0.5 and
three different <span class="c013">width</span>s: 0.1, 0.2, and&#XA0;0.4.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p><a id="hevea_option59"></a><a id="hevea_option60"></a>The options <span class="c005">--exposure-optimum</span> and&#XA0;<span class="c005">--exposure-width</span> serve to fine-tune the
final result without changing the set of input images. Option&#XA0;<span class="c005">--exposure-optimum</span> sets the point of optimum exposure. Increasing the
<span class="c013">optimum</span> makes <span class="c008">Enfuse</span> prefer lighter pixels, rendering the final image lighter, and
vice versa. Option&#XA0;<span class="c005">--exposure-width</span> defines the <span class="c013">width</span> of acceptable
exposures. Small values of <span class="c013">width</span> penalize exposures that deviate from
<span class="c013">optimum</span> more, and vice versa.</p><p><a id="hevea_option61"></a>In <span class="c008">Enfuse</span> version&#XA0;4.2 several new exposure weight functions have been added. Select them with
option&#XA0;<span class="c005">--exposure-weight-function</span>. For the following presentation we refer to the
linear luminance transform
</p><table class="display dcenter"><tr class="c025"><td class="dcell">
<span class="c011">z</span>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">Y</span>&#XA0;&#X2212;&#XA0;<span class="c011">Y</span><sub><span class="c011">opt</span></sub></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019"><span class="c011">width</span></td></tr>
</table></td><td class="dcell">.
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Alinear-luminance-transform">4.2</a> rep.)</td></tr>
</table><p>
as introduced in Eqn.&#XA0;<a href="#equ%3Alinear-luminance-transform">4.2</a>.</p><blockquote class="table"><div class="center"><div class="center"><hr class="c029"></div>
<table class="c002 cellpading0"><tr><td class="hbar" colspan=4></td></tr>
<tr><td class="c020">Exposure Weight</td><td class="c020"><span class="c013">WEIGHT-FUNC.</span></td><td class="c020">Equ.</td><td class="c020">Chart </td></tr>
<tr><td class="hbar" colspan=4></td></tr>
<tr><td class="c027"><span class="c016">Gaussian</span> curve (default)<a id="hevea_general400"></a><a id="hevea_general401"></a></td><td class="c028"><span class="c005">gauss</span>, <span class="c005">gaussian</span></td><td class="c026"> <a href="#equ%3Aweight%3Agauss">4.3</a></td><td class="c026"> <a href="#fig%3Agaussian">5.1</a> </td></tr>
<tr><td class="c027"> <span class="c016">Lorentz</span> curve<a id="hevea_general402"></a><a id="hevea_general403"></a><a id="hevea_general404"></a></td><td class="c028"><span class="c005">lorentz</span>, <span class="c005">lorentzian</span></td><td class="c026"> <a href="#equ%3Aweight%3Alorentz">4.4</a></td><td class="c026"> <a href="#fig%3Alorentzian">5.2</a> </td></tr>
<tr><td class="c027"> Upper half-wave of a sine<a id="hevea_general405"></a><a id="hevea_general406"></a></td><td class="c028"><span class="c005">halfsine</span>, <span class="c005">half-sine</span></td><td class="c026"> <a href="#equ%3Aweight%3Ahalfsine">4.5</a></td><td class="c026"> <a href="#fig%3Ahalfsine">5.3</a> </td></tr>
<tr><td class="c027"> Full sine-wave shifted upwards by one<a id="hevea_general407"></a><a id="hevea_general408"></a></td><td class="c028"><span class="c005">fullsine</span>, <span class="c005">full-sine</span></td><td class="c026"> <a href="#equ%3Aweight%3Afullsine">4.6</a></td><td class="c026"> <a href="#fig%3Afullsine">5.4</a> </td></tr>
<tr><td class="c027"> Quartic, or bi-square function<a id="hevea_general409"></a><a id="hevea_general410"></a></td><td class="c028"><span class="c005">bisquare</span>, <span class="c005">bi-square</span></td><td class="c026"> <a href="#equ%3Aweight%3Abisquare">4.7</a></td><td class="c026"> <a href="#fig%3Apower">5.5</a>
</td></tr>
</table>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Table 5.2: <a id="tab:weight-functions"></a><a id="hevea_general411"></a>Available, compiled-in exposure weight functions.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>Functions <span class="c016">Gaussian</span>
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><span class="c011">w</span><sub><span class="c011">exp</span></sub>(<span class="c011">z</span>)&#XA0;=&#XA0;exp</td><td class="dcell">&#X239B;<br>
&#X239D;</td><td class="dcell">&#X2212;<span class="c011">z</span><sup>2</sup>&#XA0;/&#XA0;2</td><td class="dcell">&#X239E;<br>
&#X23A0;</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Aweight%3Agauss">4.3</a> rep.)</td></tr>
</table><p>
and <span class="c016">Lorentzian</span>
</p><table class="display dcenter"><tr class="c025"><td class="dcell">
<span class="c011">w</span><sub><span class="c011">exp</span></sub>(<span class="c011">z</span>)&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">1&#XA0;+&#XA0;<span class="c011">z</span><sup>2</sup>&#XA0;/&#XA0;2</td></tr>
</table></td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Aweight%3Alorentz">4.4</a> rep.)</td></tr>
</table><p>
behave like 1 &#X2212; <span class="c011">z</span><sup>2</sup> around the optimum. However for large |<span class="c011">z</span>| the
<span class="c016">Gaussian</span> weight rolls off like exp(&#X2212;<span class="c011">z</span><sup>2</sup>/2) and the <span class="c016">Lorentzian</span> only
as <span class="c011">z</span><sup>&#X2212;2</sup>.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="lorentzian.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.2: <a id="fig:lorentzian"></a><span class="c008">Enfuse</span>&#X2019;s <span class="c016">Lorentzian</span> function with the parameters <span class="c013">optimum</span> = 0.5 and
three different <span class="c013">width</span>s: 0.1, 0.2, and&#XA0;0.4.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>Both, the <span class="c016">Gaussian</span> and the <span class="c016">Lorentzian</span> are easy to use, because they do
not go exactly to zero. Thus, <span class="c008">Enfuse</span> can select &#X201C;better&#X201D; pixels even far away from the chosen
optimum.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="halfsine.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.3: <a id="fig:halfsine"></a><span class="c008">Enfuse</span>&#X2019;s Half-Sine function with the parameters <span class="c013">optimum</span> = 0.5 and three
different <span class="c013">width</span>s: 0.1, 0.2, and&#XA0;0.4.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="fullsine.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.4: <a id="fig:fullsine"></a><span class="c008">Enfuse</span>&#X2019;s Full-Sine function with the parameters <span class="c013">optimum</span> = 0.5 and three
different <span class="c013">width</span>s: 0.1, 0.2, and&#XA0;0.4.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>Again, Half-Sine
</p><table class="display dcenter"><tr class="c025"><td class="dcell">
<span class="c011">w</span><sub><span class="c011">exp</span></sub>(<span class="c011">z</span>)&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;cos(<span class="c011">z</span>)</td><td class="c022">if &#XA0;|<span class="c011">z</span>|&#XA0;&#X2264;&#XA0;&#X3C0;/2&#XA0;</td></tr>
<tr><td class="c020">&#XA0;&#XA0;0</td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Aweight%3Ahalfsine">4.5</a> rep.)</td></tr>
</table><p>
and Full-Sine
</p><table class="display dcenter"><tr class="c025"><td class="dcell">
<span class="c011">w</span><sub><span class="c011">exp</span></sub>(<span class="c011">z</span>)&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;(1&#XA0;+&#XA0;cos(<span class="c011">z</span>))&#XA0;/&#XA0;2</td><td class="c022">if &#XA0;|<span class="c011">z</span>|&#XA0;&#X2264;&#XA0;&#X3C0;&#XA0;</td></tr>
<tr><td class="c020">&#XA0;&#XA0;0</td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">&#XA0;</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Aweight%3Afullsine">4.6</a> rep.)</td></tr>
</table><p>
behave like 1 &#X2212; <span class="c011">z</span><sup>2</sup> around the optimum, like <span class="c016">Gaussian</span> and
<span class="c016">Lorentzian</span>. However for large |<span class="c011">z</span>| they both are exactly zero. The difference is
how they decrease just before they reach zero. Half-Sine behaves like <span class="c011">z</span> &#X2212; <span class="c011">z</span>&#X2032; and Full-Sine
like (<span class="c011">z</span> &#X2212; <span class="c011">z</span>&#X2033;)<sup>2</sup>, where <span class="c011">z</span>&#X2032; and <span class="c011">z</span>&#X2033; are the respective zeros.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="power.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.5: <a id="fig:power"></a><span class="c008">Enfuse</span>&#X2019;s Bi-Square function with the parameters <span class="c013">optimum</span> = 0.5 and three
different <span class="c013">width</span>s: 0.1, 0.2, and&#XA0;0.4.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>Bi-Square
</p><table class="display dcenter"><tr class="c025"><td class="dcell">
<span class="c011">w</span><sub><span class="c011">exp</span></sub>(<span class="c011">z</span>)&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;1&#XA0;&#X2212;&#XA0;<span class="c011">z</span><sup>4</sup></td><td class="c022">if &#XA0;|<span class="c011">z</span>|&#XA0;&#X2264;&#XA0;1&#XA0;</td></tr>
<tr><td class="c020">&#XA0;&#XA0;&#XA0;&#XA0;0</td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">
</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(<a href="#equ%3Aweight%3Abisquare">4.7</a> rep.)</td></tr>
</table><p>
is the only predefined function that behaves like 1 &#X2212; <span class="c011">z</span><sup>4</sup> around the optimum.</p><p>The weight functions Half-Sine, Full-Sine, and Bi-Square are more difficult to use, because they
yield exactly zero if the normalized luminance of a pixel is far enough away from the optimum.
This can lead to pathologies if the luminances of the same pixel position in all <span class="c011">N</span> input
images are assigned a weight of zero. For all-zero weights <span class="c008">Enfuse</span> falls back to weighing
equally. This is, each pixel gets a weight of 1/<span class="c011">N</span>, which may or may not be the
desired result. However, if the <span class="c013">width</span> is chosen so large that the weight never
vanishes or the input images span a large enough range of luminances for each and every pixel,
the problem is circumnavigated.</p><p><a id="hevea_option62"></a>Another way of cutting off underexposed or overexposed pixels is to use
option&#XA0;<span class="c005">--exposure-cutoff</span>, which has the additional benefit of allowing to choose upper
and lower cutoff separately.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="exposure-weights.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.6: <a id="fig:exposure-weights"></a>Comparison of all of <span class="c008">Enfuse</span>&#X2019;s built-in exposure weight functions&#XA0;<span class="c011">w</span>(<span class="c011">Y</span>) for the default
values of <span class="c013">optimum</span> = 0.5 and <span class="c013">width</span> = 0.2. Note that all functions
intersect at <span class="c011">w</span> = 1/2, this is, they share the same <span class="c016">FWHM</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>Figure&#XA0;<a href="#fig%3Aexposure-weights">5.6</a> compares all available exposure weight functions for the
same parameters, namely their defaults. They all intersect at <span class="c011">w</span> = 1/2 independently
of <span class="c013">optimum</span> or <span class="c013">width</span>, making it simple to just try them out without
fundamentally changing brightness.</p><!--TOC subsection id="sec:user-defined-functions" 5.2.2&#XA0;&#XA0;User-Defined Functions-->
<h3 class="subsection" id="sec:user-defined-functions">5.2.2&#XA0;&#XA0;<a id="hevea_general412"></a>User-Defined Exposure Weighting Functions</h3><!--SEC END --><!--TOC subsection id="sec:user-defined-dynlink-functions" 5.2.3&#XA0;&#XA0;User-Defined Dynamic Functions-->
<h3 class="subsection" id="sec:user-defined-dynlink-functions">5.2.3&#XA0;&#XA0;<a id="hevea_general413"></a>User-Defined, Dynamically-Linked Exposure Weighting Functions</h3><!--SEC END --><p><span class="c001"><span class="c016">Dynamic Linking</span>-enabled versions only.</span></p><p><a id="hevea_general414"></a><a id="hevea_general415"></a><a id="hevea_general416"></a><a id="hevea_general417"></a><a id="hevea_general418"></a><a id="hevea_general419"></a><a id="hevea_general420"></a><a id="hevea_general421"></a>On operating systems, where dynamic linking (or synonymously: dynamic loading) of code is
possible, for <span class="c008">Enfuse</span> executables compiled with dynamic-linking support (see
Section&#XA0;<a href="#sec%3Afinding-out-details">3.3.1</a> on how to check this feature), <span class="c008">Enfuse</span> can work with
user-defined exposure weighting functions, passed with the long form of
option&#XA0;<span class="c005">--exposure-weight-function</span>, load the exposure weight function identified by
<span class="c013">SYMBOL</span> from <span class="c013">SHARED-OBJECT</span> and optionally pass some <span class="c013">ARGUMENT</span>s:</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
--exposure-weight-function=<span class="c013">SHARED-OBJECT</span>:<span class="c013">SYMBOL</span></span>[<span class="c005">:<span class="c013">ARGUMENT</span></span>[<span class="c005">:&#X2026;</span>]]<a id="hevea_option63"></a><span class="c005">
</span></div></dd></dl></div><p>Some notes on the arguments of this option:</p><ul class="itemize"><li class="li-itemize">
<span class="c013">SHARED-OBJECT</span> is a filename (typically ending in <span class="c011">.so</span> or <span class="c011">.dll</span>).
Depending on the operating system and the dynamic-loader implementation compiled into <span class="c017">enfuse</span>,
<span class="c013">SHARED-OBJECT</span> may or may not require a path.<p><a id="hevea_general422"></a><a id="hevea_general423"></a></p><div class="restrictedmaterial"><span class="c001">Linux</span><blockquote class="quotation">
If <span class="c013">SHARED-OBJECT</span> does not contain a slash (&#X2018;<span class="c005">/</span>&#X2019;), the dynamic loader
<em>only</em> searches along <span class="c005">LD_LIBRARY_PATH</span>; it even ignores the current working
directory unless <span class="c005">LD_LIBRARY_PATH</span> contains a dot (&#X2018;<span class="c005">.</span>&#X2019;). So, to use a
<span class="c013">SHARED-OBJECT</span> living in the current directory either say
<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
env LD_LIBRARY_PATH=$LD_LIBRARY_PATH:. \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;enfuse --exposure-weight-function=SHARED-OBJECT:&#X2026;</span></div></dd></dl></div>
or
<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse --exposure-weight-function=./SHARED-OBJECT:&#X2026;</span></div></dd></dl></div><p><a id="hevea_general424"></a>For details of the search algorithm please consult the manual page of dlopen(3).
</p></blockquote></div><p><br>
</p><p><a id="hevea_general425"></a><a id="hevea_general426"></a><a id="hevea_general427"></a><a id="hevea_general428"></a><a id="hevea_general429"></a><a id="hevea_general430"></a></p><div class="restrictedmaterial"><span class="c001">OS&#XA0;X</span><blockquote class="quotation">
<a id="hevea_general431"></a><a id="hevea_general432"></a>If <span class="c013">SHARED-OBJECT</span> does not contain a slash (&#X2018;<span class="c005">/</span>&#X2019;), the dynamic loader
searches the following paths or directories until it finds a compatible Mach-O&#XA0;file:<ol class="enumerate" type=1><li class="li-enumerate">
<span class="c005">LD_LIBRARY_PATH</span>,
</li><li class="li-enumerate"><span class="c005">DYLD_LIBRARY_PATH</span>,
</li><li class="li-enumerate">current working directory, and finally
</li><li class="li-enumerate"><span class="c005">DYLD_FALLBACK_LIBRARY_PATH</span>.
</li></ol><p><a id="hevea_general433"></a>For details of the search algorithm please consult the manual page of dlopen(3).
</p></blockquote></div><p><br>
</p><div class="restrictedmaterial"><span class="c001">Windows</span><blockquote class="quotation">
If <span class="c013">SHARED-OBJECT</span> specifies an absolute filename, exactly this file is used.
Otherwise <span class="c008">Enfuse</span> searches in the following directories and in this order:<ol class="enumerate" type=1><li class="li-enumerate">
The directory from which <span class="c017">enfuse</span> is loaded.
</li><li class="li-enumerate">The system directory.
</li><li class="li-enumerate">The Windows directory.
</li><li class="li-enumerate">The current directory.
</li><li class="li-enumerate">The directories that are listed in the <span class="c005">PATH</span>&#XA0;environment variable.
</li></ol><p><a id="hevea_general434"></a>For details consult the manual page of LoadLibrary.
</p></blockquote></div></li><li class="li-itemize">There is no way knowing which of the symbols inside of <span class="c013">SHARED-OBJECT</span> are suitable for <span class="c013">SYMBOL</span> without knowledge of source code of
<span class="c013">SHARED-OBJECT</span>.</li><li class="li-itemize">A weight function has access to additional <span class="c013">ARGUMENT</span>s passed in by appending them
after <span class="c013">SYMBOL</span> with the usual delimiters. How these <span class="c013">ARGUMENT</span>s are
interpreted and how many of them are required is encoded in the weight-function. <span class="c008">Enfuse</span>
supports <span class="c013">ARGUMENT</span>s; it neither restricts their number nor their type.<div class="geeknote"><blockquote class="quotation"><a id="hevea_option64"></a><a id="hevea_option65"></a><span class="c015">Usually, neither the exposure optimum
(<span class="c005">--exposure-optimum</span>=OPTIMUM) nor the width
(<span class="c005">--exposure-width</span>=WIDTH) of the exposure function are
ARGUMENTs, because they are always explicitly passed on to any exposure weight
function.
</span></blockquote></div><p>For example, assuming <span class="c011">variable_power.cc</span> of the supplied examples was compiled to
<span class="c011">variable_power.so</span>, we can override the default exponent of 2 with</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse --exposure-weight-function=\<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;variable_power.so:vpower:1.8 &#X2026;</span></div></dd></dl></div></li></ul><!--TOC subsubsection id="sec:prerequisites" Prerequisites-->
<h4 class="subsubsection" id="sec:prerequisites"><a id="hevea_general435"></a>Prerequisites</h4><!--SEC END --><p>To use a home-grown exposure-weight function several prerequisites must be met. On the software
side</p><ol class="enumerate" type=1><li class="li-enumerate">
The operating system allows loading additional code during the execution of an application.<p><a id="hevea_general436"></a></p></li><li class="li-enumerate"><span class="c008">Enfuse</span> is compiled with the extra feature &#X201C;dynamic linking support&#X201D;.</li><li class="li-enumerate">Either<ol class="enumerate" type=a><li class="li-enumerate">
The same compiler that compiled <span class="c008">Enfuse</span> is available or at least</li><li class="li-enumerate">A compiler that produces compatible object code to the compiler that compiled <span class="c008">Enfuse</span>.
</li></ol><p>The latter is called &#X201C;<span class="c016">ABI</span>-compatible&#X201D;. An example for a pair of
<span class="c016">ABI</span>-compatible compilers is <span class="c016">GNU</span>&#X2019;s&#XA0;<span class="c017">g++</span> and
<span class="c016">Intel&#X2019;s</span>&#XA0;<span class="c017">icpc</span>.</p><p><a id="hevea_option66"></a>To find out which compiler built <em>your</em> version of <span class="c017">enfuse</span> use
option&#XA0;<span class="c005">--show-software-components</span>.</p></li><li class="li-enumerate">The base-class header file <span class="c011">exposure_weight_base.h</span> is available.
</li></ol><p>Between chair and keyboard:</p><ul class="itemize"><li class="li-itemize">
A firm understanding of weighting pixels in the fusion process and in particular in the
cumulative ascription of different weights.</li><li class="li-itemize">A basic understanding of object-oriented programming paired with the ability to compile and
link single-source C++-files.</li><li class="li-itemize">A realistic expectation of the limitations of tailoring weight functions.
</li></ul><!--TOC subsubsection id="sec:coding-guidelines" Coding Guidelines-->
<h4 class="subsubsection" id="sec:coding-guidelines"><a id="hevea_general437"></a>Coding Guidelines</h4><!--SEC END --><ol class="enumerate" type=1><li class="li-enumerate">

Derive the weight function from the supplied C++ base-class&#XA0;<span class="c005">ExposureWeight</span>, which is
defined in header file&#XA0;<span class="c011">exposure_weight_base.h</span>. It resides in the
<span class="c011">src</span>&#XA0;sub-directory of the source distribution and &#X2013; for a correctly installed
package &#X2013; in directory <span class="c011">doc/examples/enfuse</span>.
</li><li class="li-enumerate">At least override method&#XA0;<span class="c005">weight</span>.<ul class="itemize"><li class="li-itemize">
Domain: define <span class="c005">weight</span> for normalized luminance values&#XA0;<span class="c013">y</span> from zero to one
including both interval ends: 0 &#X2264; <span class="c011">y</span> &#X2264; 1.</li><li class="li-itemize">Image: Let the <span class="c005">weight</span>&#XA0;<span class="c011">w</span> fall in the interval from zero to one: 0 &#X2264; <span class="c011">w</span> &#X2264; 1.
The <span class="c005">weight</span>s can be all the same, <span class="c011">w</span> = const. This is, they can encode a
constant weight, as long as the constant is not zero.<p><span class="c008">Enfuse</span> checks this property and refuses to continue if any weight is outside the required
range or all weights are zero.</p></li><li class="li-itemize">(Optionally) Rescale the <span class="c013">WIDTH</span> of the function to match the <span class="c016">FWHM</span> of
<span class="c008">Enfuse</span>&#X2019;s original Gauss curve. The macro&#XA0;<span class="c005">FWHM_GAUSSIAN</span> is defined exactly to this
end.
</li></ul></li><li class="li-enumerate">If necessary, rewrite methods&#XA0;<span class="c005">initialize</span> and <span class="c005">normalize</span>, too.</li><li class="li-enumerate"><span class="c001"><span class="c016">OpenMP</span>-enabled versions only.</span><p><span class="c008">Enfuse</span> never calls <span class="c005">initialize</span> in an <span class="c016">OpenMP</span> parallel execution environment.
However, <span class="c016">OpenMP</span>-enabled versions of <span class="c008">Enfuse</span> call <span class="c005">normalize</span> and <span class="c005">weight</span>
in parallel sections.</p><p>Technically, the functors which the user-defined weight functions are part of are
copy-constructed for each <span class="c016">OpenMP</span> worker thread. Thus, there is no contention within
the <span class="c005">ExposureWeight</span> sub-classes. Although, if <span class="c005">normalize</span> or <span class="c005">weight</span> access
a shared resource these accesses must be protected by serialization instructions. One
solution is to use <span class="c016">OpenMP</span> directives, like for example,</p><div class="cxxlisting"><span class="c018">#pragma</span> omp critical
{
    std::cout &lt;&lt; <span class="c003">"foobar!"</span> &lt;&lt; std::endl;
}</div><p>Experienced hackers will recognize occasions when to prefer other constructs, like, for
example <span class="c005">#pragma omp atomic</span> or simply an atomic data-type (e.g.&#XA0;<span class="c005">sig_atomic_t</span>
from <span class="c011">signal.h</span>).</p><p>Remember to compile all modules that use <span class="c016">OpenMP</span> directives with the
(compiler-specific) flags that turn on <span class="c016">OpenMP</span>. For <span class="c017">g++</span> this is
&#X2018;<span class="c005">-fopenmp</span>&#X2019; and for <span class="c017">icpc</span> it is &#X2018;<span class="c005">-fopenmp</span>&#X2019; or &#X2018;<span class="c005">-openmp</span>&#X2019;.</p></li><li class="li-enumerate">To raise an exception associated with the derived, user-defined exposure-weight class,
throw
<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
ExposureWeight::error(const std::string&amp; message)
</span></div></dd></dl></div>
<span class="c008">Enfuse</span> catches these exceptions at an enclosing scope, displays <span class="c013">message</span>, and aborts.</li><li class="li-enumerate">Define an object of the derived class. This creates the <span class="c013">SYMBOL</span> to refer to at the
<span class="c008">Enfuse</span> command line.<p>The actual signature of the constructor (default, two-argument, &#X2026;) does not matter,
because <span class="c008">Enfuse</span> <em>always</em> invokes <span class="c005">initialize</span> before calling any other method of a
user-defined <span class="c005">ExposureWeight</span> sub-class. Method&#XA0;<span class="c005">initialize</span> sets (read:
overwrites) <span class="c013">optimum</span> and <span class="c013">width</span> and ensures they are within the required
parameter range.
</p></li></ol><p>Example&#XA0;<a href="#ex%3Asimple-dynamic-exposure-weight-function">5.2.7</a> shows the C++-code of a suitable
extension. If <span class="c008">Enfuse</span> has been compiled with support for user-defined weight functions, the
examples presented here should have been duplicated in
directory&#XA0;<span class="c011">doc/examples/enfuse</span> along with a
<span class="c016">GNU</span>-Makefile called <span class="c011">Makefile.userweight</span>.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage">


<div class="cxxlisting"><span class="c018">#include</span> &lt;cmath&gt;                     <span class="c004"><span class="c013">// std::fabs()</span>

<span class="c018">#include</span> <span class="c003">"exposure_weight_base.h"</span>    <span class="c013">// FWHM_GAUSSIAN, ExposureWeight</span></span>

<span class="c018">struct</span> Linear : <span class="c018">public</span> ExposureWeight {
    <span class="c018">void</span> initialize(<span class="c018">double</span> y_optimum, <span class="c018">double</span> width_parameter,
                    ExposureWeight::argument_const_iterator arguments_begin,
                    ExposureWeight::argument_const_iterator arguments_end)
        override {
        ExposureWeight::initialize(y_optimum,
                                   width_parameter * FWHM_GAUSSIAN,
                                   arguments_begin, arguments_end);
    }

    <span class="c018">double</span> weight(<span class="c018">double</span> y) override {
        <span class="c018">const double</span> z = std::fabs(normalize(y));
        <span class="c018">return</span> z &lt;= 1.0 ? 1.0 - z : 0.0;
    }
};

Linear linear;</div><p><br>
</p></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 5.2.7: <a id="ex:simple-dynamic-exposure-weight-function"></a>A dynamic exposure weight function that defines a &#X201C;roof-top&#X201D;. The natural width
is exactly one, so we override method&#XA0;<span class="c005">initialize</span> to rescale <span class="c013">WIDTH</span>,
passed in as <span class="c005">width_parameter</span>, by multiplying with <span class="c005">FWHM_GAUSSIAN</span> to
get the same width as the predefined Gaussian.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>As the extension language is C++, we can write templated families of functions, like
Example&#XA0;<a href="#ex%3Atemplated-dynamic-exposure-weight-function">5.2.8</a> demonstrates.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage">


<div class="cxxlisting"><span class="c018">#include</span> &lt;algorithm&gt;    <span class="c014">// std::max()</span>
<span class="c018">#include</span> &lt;cmath&gt;        <span class="c004"><span class="c013">// M_LN2, std::exp(), std::fabs()</span>

<span class="c018">#include</span> <span class="c003">"exposure_weight_base.h"</span> <span class="c013">// FWHM_GAUSSIAN, ExposureWeight</span></span>

<span class="c018">template</span> &lt;<span class="c018">int</span> n&gt; <span class="c018">double</span> ipower(<span class="c018">double</span> x) {<span class="c018">return</span> x * ipower&lt;n - 1&gt;(x);}
<span class="c018">template</span> &lt;&gt; <span class="c018">double</span> ipower&lt;0&gt;(<span class="c018">double</span>) {<span class="c018">return</span> 1.0;}

<span class="c018">template</span> &lt;<span class="c018">int</span> n&gt; <span class="c018">struct</span> TemplatedPower : <span class="c018">public</span> ExposureWeight {
    <span class="c018">void</span> initialize(<span class="c018">double</span> y_optimum, <span class="c018">double</span> width,
                    ExposureWeight::argument_const_iterator arguments_begin,
                    ExposureWeight::argument_const_iterator arguments_end)
        override {
        <span class="c018">const double</span> fwhm = 2.0 / std::exp(M_LN2 / <span class="c018">static_cast</span>&lt;<span class="c018">double</span>&gt;(n));
        ExposureWeight::initialize(y_optimum,
                                   width * FWHM_GAUSSIAN / fwhm,
                                   arguments_begin, arguments_end);
    }

    <span class="c018">double</span> weight(<span class="c018">double</span> y) override {
        <span class="c018">return</span> std::max(1.0 - ipower&lt;n&gt;(std::fabs(normalize(y))), 0.0);
    }
};

TemplatedPower&lt;2&gt; tpower2;
TemplatedPower&lt;3&gt; tpower3;
TemplatedPower&lt;4&gt; tpower4;</div><p><br>
</p></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 5.2.8: <a id="ex:templated-dynamic-exposure-weight-function"></a>The templated class&#XA0;<span class="c005">TemplatedPower</span> allows to create a weight function for
arbitrary positive exponents&#XA0;<span class="c005">n</span>. In particular, <span class="c005">TemplatedPower&lt;4&gt;</span>
duplicates the built-in exposure-weight function&#XA0;<span class="c005">bisquare</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>The last example, <a href="#ex%3Avariable-dynamic-exposure-weight-function">5.2.9</a>, shows a weight function
that accesses an extra <span class="c013">ARGUMENT</span> passed in with <span class="c005">--exposure-weight-function</span>. A
class like <span class="c005">VariablePower</span> allows full control over the exponent at the command line
including fractional exponents thereby generalizing both of the previous examples.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage">


<div class="cxxlisting"><span class="c018">#include</span> &lt;algorithm&gt;    <span class="c014">// std::max()</span>
<span class="c018">#include</span> &lt;cerrno&gt;       <span class="c014">// errno</span>
<span class="c018">#include</span> &lt;cmath&gt;        <span class="c004"><span class="c013">// M_LN2, std::exp(), std::fabs(), std::pow()</span>

<span class="c018">#include</span> <span class="c003">"exposure_weight_base.h"</span> <span class="c013">// FWHM_GAUSSIAN, ExposureWeight</span></span>


<span class="c018">class</span> VariablePower : <span class="c018">public</span> ExposureWeight {
    <span class="c018">typedef</span> ExposureWeight super;

<span class="c018">public</span>:
    <span class="c018">void</span> initialize(<span class="c018">double</span> y_optimum, <span class="c018">double</span> width,
                    ExposureWeight::argument_const_iterator arguments_begin,
                    ExposureWeight::argument_const_iterator arguments_end)
        override {
        <span class="c018">if</span> (arguments_begin == arguments_end) {
            exponent = 2.0;
        } <span class="c018">else</span> {
            <span class="c018">char</span>* tail;
            errno = 0;
            exponent = strtod(arguments_begin-&gt;c_str(), &amp;tail);
            <span class="c018">if</span> (*tail != 0 || errno != 0) {
                <span class="c018">throw</span> super::error(<span class="c003">"non-numeric exponent"</span>);
            }
            <span class="c018">if</span> (exponent &lt;= 0.0 || exponent &gt; 4.0) {
                <span class="c018">throw</span> super::error(<span class="c003">"exponent x out of range 0 &lt; x &lt;= 4"</span>);
            }
        }

        <span class="c018">const double</span> fwhm = 2.0 / std::exp(M_LN2 / exponent);
        super::initialize(y_optimum, width * FWHM_GAUSSIAN / fwhm,
                          arguments_begin, arguments_end);
    }

    <span class="c018">double</span> weight(<span class="c018">double</span> y) override {
      <span class="c018">return</span> std::max(1.0 - std::pow(std::fabs(normalize(y)), exponent), 0.0);
    }

<span class="c018">private</span>:
    <span class="c018">double</span> exponent;
};

VariablePower vpower;</div><p><br>
</p></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 5.2.9: <a id="ex:variable-dynamic-exposure-weight-function"></a>Dynamic exposure weight function that accesses the first extra argument from the
tuple of arguments passed with option&#XA0;<span class="c005">--exposure-weight-function</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><!--TOC subsubsection id="sec:performance-considerations" Performance Considerations-->
<h4 class="subsubsection" id="sec:performance-considerations"><a id="hevea_general438"></a>Performance Considerations</h4><!--SEC END --><p>Exposure weighting objects are created and destroyed only <span class="c011">O</span>(1)&#XA0;times. Thus,
method&#XA0;<span class="c005">initialize</span> could be used to perform all kinds of computationally expensive tasks.
In contrast, methods&#XA0;<span class="c005">normalize</span> and <span class="c005">weight</span> are called for <em>every</em> pixel in
<em>each</em> of the input images. Therefore, if performance of the weight function is a problem,
these two functions are the prime candidates for optimization.</p><!--TOC subsubsection id="sec:compiling-linking-loading" Compiling, Linking, and Loading-->
<h4 class="subsubsection" id="sec:compiling-linking-loading">Compiling, Linking, and Loading</h4><!--SEC END --><div class="restrictedmaterial"><span class="c001">Linux</span><blockquote class="quotation">
Compile and link using the <a href="https://gcc.gnu.org/"><span class="c016">GNU</span>-compiler</a>, <span class="c005">g++</span>,
for example with<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
g++ -std=c++11 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;-O2 -fpic -I&lt;PATH-TO-BASE-CLASS-HEADER&gt; \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;-shared -Wl,-soname,dynexp.so \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;-o dynexp.so \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;dynexp.cc
</span></div></dd></dl></div><p>The important options are</p><dl class="list"><dt class="dt-list">

<span class="c005">-fpic</span></dt><dd class="dd-list">Instruct the compiler&#X2019;s code-generator to produce position-independent code
(<span class="c016">PIC</span>), which is suitable for a shared object. Some systems require &#X2018;<span class="c005">-fPIC</span>&#X2019;
instead of &#X2018;<span class="c005">-fpic</span>&#X2019;.</dd><dt class="dt-list"><span class="c005">-shared</span></dt><dd class="dd-list">Tell the linker to create a shared object instead of the default executable. On some
systems, the library must be &#X201C;blessed&#X201D;, by passing the shared-object name
(<span class="c005">soname</span>) directly to the linker (<span class="c005">-Wl</span>).<p>Of course more than one object file can be linked into a single shared object.
</p></dd></dl><p>Finally, the weight function can be selected by its <span class="c013">SYMBOL</span>&#XA0;name in the
<span class="c013">SHARED-OBJECT</span>.</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse --exposure-weight-function=dynexp.so:linear&#X2026;</span></div></dd></dl></div></blockquote></div><p><br>
</p><div class="restrictedmaterial"><span class="c001">OS&#XA0;X</span><blockquote class="quotation">
On OS&#XA0;X the creation of shared objects &#X2013; or loadable modules &#X2013; has been tested
with the C-language frontend of <a href="http://llvm.org/"><span class="c016">LLVM</span></a>,
<a href="http://clang.llvm.org/"><span class="c005">clang++</span></a>, and should work on OS&#XA0;X Mavericks&#XA0;(10.9) or higher.<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
clang++ -std=c++11 -stdlib=libc++ \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;-O2 -bundle -I&lt;PATH-TO-BASE-CLASS-HEADER&gt; \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;-o dynexp.so \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;dynexp.cc
</span></div></dd></dl></div><p>The important option here is &#X2018;<span class="c005">-bundle</span>&#X2019; which instructs the compiler&#X2019;s code-generator to
produce a loadable module.</p><p>Finally, the weight function can be selected by its <span class="c013">SYMBOL</span>&#XA0;name in the
<span class="c013">SHARED-OBJECT</span>.</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse --exposure-weight-function=dynexp.so:linear&#X2026;</span></div></dd></dl></div></blockquote></div><p><br>
</p><div class="restrictedmaterial"><span class="c001">Windows</span><blockquote class="quotation">
On Windows the creation of shared objects &#X2013; or dynamic link libraries
(<span class="c016">DLL</span>&#XA0;files) as they are called here &#X2013; has been tested with the <span class="c016">MinGW</span>
compiler chain and with MS-Visual&#XA0;C++&#XA0;2012.<ul class="itemize"><li class="li-itemize">
Compile and link using the <span class="c016">MinGW</span> compiler with<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
g++ -g -O2 -I&lt;PATH-TO-BASE-CLASS-HEADER&gt; -c dynexp.cc <br>
 g++ -g -shared -Wl,-soname,dynexp.dll -o dynexp.dll dynexp.o
</span></div></dd></dl></div><p>For details see the explanation for the <span class="c016">GNU</span> compiler above. Windows neither
requires options <span class="c005">-fpic</span> nor&#XA0;<span class="c005">-fPIC</span>.</p></li><li class="li-itemize">When using the MS-Visual&#XA0;C++&#XA0;compiler, you need to explicitly export <span class="c013">SYMBOL</span>.
There are two possibilities to achieve this. Use only one variant, not both at the same
time.<ol class="enumerate" type=1><li class="li-enumerate">
Either use <span class="c005">"C"</span>&#XA0;linkage and define the object using the construction
<span class="c005">__declspec(dllexport)</span>. For
Example&#XA0;<a href="#ex%3Asimple-dynamic-exposure-weight-function">5.2.7</a> the object definition has to
be extended to<div class="cxxlisting"><span class="c018">extern</span> <span class="c003">"C"</span>
{
  __declspec(dllexport) Linear linear;
}</div></li><li class="li-enumerate">Or, alternatively, create a module-definition file (<span class="c011">.def</span>) and pass this file to
the linker (in: <span class="c016">Project Properties</span>, <span class="c016">Linker</span>, <span class="c016">Module
Definition File</span>). For Example&#XA0;<a href="#ex%3Asimple-dynamic-exposure-weight-function">5.2.7</a>,
this file would look like<div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
LIBRARY dynexp <br>
 EXPORTS <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;linear @@1 <br>
 </span></div></dd></dl></div></li></ol></li></ul><p>Finally, the weight function can be selected by its <span class="c013">SYMBOL</span> in the dynamic link
library.</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
enfuse --exposure-weight-function=dynexp.dll:linear&#X2026;</span></div></dd></dl></div></blockquote></div><p><br>
</p><p><span class="c017">Summary of influential options</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--exposure-optimum</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aexposure-optimum">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--exposure-weight-function</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aexposure-weight-function">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--exposure-weight</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aexposure-weight">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--exposure-width</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aexposure-width">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--gray-projector</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Agray-projector">4.2.5</a>
</dd></dl><!--TOC section id="sec:saturation-weighting" 5.3&#XA0;&#XA0;Saturation Weighting-->
<h2 class="section" id="sec:saturation-weighting">5.3&#XA0;&#XA0;<a id="hevea_general439"></a><a id="hevea_general440"></a>Saturation Weighting</h2><!--SEC END --><p><a id="hevea_general441"></a><a id="hevea_general442"></a>Saturation weighting prefers pixels with a high saturation, where the
saturation&#XA0;<span class="c011">S</span><sub><span class="c011">HSL</span></sub> is computed in <span class="c016">HSL</span>&#XA0;color space. For an introduction to
the <span class="c016">HSL</span>&#XA0;color space, please consult <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">Wikipedia</a>.</p><p>Taking the largest and smallest components of the <span class="c016">RGB</span>-value&#XA0;(<span class="c011">R</span>, <span class="c011">G</span>, <span class="c011">B</span>) in the
normalized <span class="c016">RGB</span>-cube
</p><table class="display dcenter"><tr class="c025"><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;

</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c023">&#XA0;&#XA0;<span class="c011">v</span><sub><span class="c011">min</span></sub></td><td class="c022">=&#XA0;min(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>)&#XA0;&#XA0;&#XA0;&#XA0;and&#XA0;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td></tr>
<tr><td class="c023">
<span class="c011">v</span><sub><span class="c011">max</span></sub></td><td class="c022">=&#XA0;max(<span class="c011">R</span>,&#XA0;<span class="c011">G</span>,&#XA0;<span class="c011">B</span>),
</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td><td class="c022">&nbsp;</td><td class="c023">&nbsp;</td></tr>
</table></td></tr>
</table><p>
we define chroma
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;<span class="c011">C</span>&#XA0;=&#XA0;<span class="c011">v</span><sub><span class="c011">max</span></sub>&#XA0;&#X2212;&#XA0;<span class="c011">v</span><sub><span class="c011">min</span></sub>
</td></tr>
</table><p>
and lightness
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;<span class="c011">L</span>&#XA0;=&#XA0;(<span class="c011">v</span><sub><span class="c011">max</span></sub>&#XA0;+&#XA0;<span class="c011">v</span><sub><span class="c011">min</span></sub>)&#XA0;/&#XA0;2.
</td></tr>
</table><p>
<span class="c008">Enfuse</span> computes the saturation of the pixel according to the following formula:
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:saturationweight:hsl"></a>
<span class="c011">S</span><sub><span class="c011">HSL</span></sub>&#XA0;=
</td><td class="dcell">&#X23A7;<br>
&#X23AA;<br>
&#X23AA;<br>
&#X23A8;<br>
&#X23AA;<br>
&#X23AA;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">&#XA0;&#XA0;0</td><td class="c022">if &#XA0;<span class="c011">C</span>&#XA0;=&#XA0;0&#XA0;</td></tr>
<tr><td class="c020"><table class="display"><tr class="c025"><td class="dcell">&#XA0;&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">C</span></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">1&#XA0;&#X2212;&#XA0;|2<span class="c011">L</span>&#XA0;&#X2212;&#XA0;1|</td></tr>
</table></td></tr>
</table></td><td class="c022">otherwise.
</td></tr>
</table></td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(5.2)</td></tr>
</table><p>The saturation weighting algorithm only looks at a single pixel at a time. The neighborhood of
the pixel is not taken into account.</p><p><a id="hevea_general443"></a>Obviously, saturation weighting can only be defined for <span class="c016">RGB</span>-images, not for grayscale
ones. If you need something similar, check out Section&#XA0;<a href="#sec%3Alocal-entropy-weighting">5.5</a>
on Entropy Weighting, which works for both <span class="c016">RGB</span> and grayscale pictures.</p><p><br>
</p><p><span class="c017">Summary of influential options</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--saturation-weight</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Asaturation-weight">4.2.3</a>
</dd></dl><!--TOC section id="sec:local-contrast-weighting" 5.4&#XA0;&#XA0;Local Contrast Weighting-->
<h2 class="section" id="sec:local-contrast-weighting">5.4&#XA0;&#XA0;<a id="hevea_general444"></a><a id="hevea_general445"></a>Local Contrast Weighting</h2><!--SEC END --><p>Local contrast weighting favors pixels inside a high contrast neighborhood. The notion of
&#X201C;high contrast&#X201D; is defined either by two different criteria or by a blend of both:</p><ul class="itemize"><li class="li-itemize">
The standard deviation (<span class="c016">SDev</span>) of all the pixels in the local analysis window is
large. See Section&#XA0;<a href="#sec%3Astandard-deviation">5.4.1</a>.</li><li class="li-itemize">The Laplacian-of-Gaussian (<span class="c016">LoG</span>) has a large magnitude. See
Section&#XA0;<a href="#sec%3Alaplacian-of-gaussian">5.4.2</a>.</li><li class="li-itemize">If the <span class="c016">LoG</span> magnitude is below a given threshold, use <span class="c016">SDev</span> data, otherwise
stick with <span class="c016">LoG</span>. See Section&#XA0;<a href="#sec%3Ablend-sdev-and-log">5.4.3</a>.
</li></ul><p><span class="c008">Enfuse</span> converts every <span class="c016">RGB</span> image to grayscale before it determines its contrast.
Option&#XA0;<a href="#opt%3Agray-projector"><span class="c005">--gray-projector</span></a> controls the projector
function. Depending on the subject, one of several grayscale projectors may yield the best
black-and-white contrast for image fusion.</p><p>In the following sections we describe each algorithm in detail.</p><!--TOC subsection id="sec:standard-deviation" 5.4.1&#XA0;&#XA0;Standard Deviation-->
<h3 class="subsection" id="sec:standard-deviation">5.4.1&#XA0;&#XA0;<a id="hevea_general446"></a><a id="hevea_general447"></a>Standard Deviation</h3><!--SEC END --><p><a id="hevea_general448"></a><a id="hevea_general449"></a>The pixel under consideration&#XA0;<span class="c008">C</span> sits exactly in the center of a square, the so-called
local analysis window. It always has an uneven edge length. The user sets the size with
option&#XA0;<span class="c005">--contrast-window-size</span>. Figure&#XA0;<a href="#fig%3Alocal-analysis-window">5.7</a> shows two
windows with different sizes.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="local-analysis-window.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.7: <a id="fig:local-analysis-window"></a>Examples of local analysis
windows for the sizes&#XA0;3 and&#XA0;5. &#X201C;<span class="c008">C</span>&#X201D; marks the center where the pixel gets the
weight. &#X201C;<span class="c008">N</span>&#X201D; denote neighboring pixels, which all contribute to the weight.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>During the analysis, <span class="c008">Enfuse</span> scans the local analysis window across all rows and all
columns<sup><a id="text7" href="#note7">1</a></sup> of each of the input
images to compute the contrast weight of every pixel.</p><p><br>
</p><p><span class="c017">Summary of influential options</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--contrast-weight</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-weight">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--contrast-window-size</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-window-size">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--gray-projector</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Agray-projector">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--hard-mask</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Ahard-mask">4.2.3</a>
</dd></dl><!--TOC subsubsection id="sec:statistical-moments" Statistical Moments-->
<h4 class="subsubsection" id="sec:statistical-moments"><a id="hevea_general450"></a>Statistical Moments</h4><!--SEC END --><p><a id="hevea_general451"></a><a id="hevea_general452"></a>We start with the probability function&#XA0;<span class="c011">w</span> of the random variable&#XA0;<span class="c011">X</span>:
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">w</span>:&#XA0;<span class="c011">x</span>&#XA0;&#X2192;&#XA0;<span class="c011">p</span>({&#X3C9;:&#XA0;<span class="c011">X</span>(&#X3C9;)&#XA0;=&#XA0;<span class="c011">x</span>}).
</td></tr>
</table><p>
It associates a probability&#XA0;<span class="c011">p</span> with each of the <span class="c011">n</span> different possible
outcomes&#XA0;&#X3C9; of the random variable&#XA0;<span class="c011">X</span>.</p><p><a id="hevea_general453"></a><a id="hevea_general454"></a><a id="hevea_general455"></a>Based on <span class="c011">w</span>, we define the expectation value or &#X201C;First Moment&#X201D; of the random variable&#XA0;<span class="c011">X</span>:
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c008">Ex</span>&#XA0;&#XA0;<span class="c011">X</span>&#XA0;:=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">n</span></td></tr>
<tr><td class="dcell c019"><span class="c010">&#X2211;</span></td></tr>
<tr><td class="dcell c019"><span class="c011">i</span>&#XA0;=&#XA0;1</td></tr>
</table></td><td class="dcell">&#XA0;<span class="c011">x</span><sub><span class="c011">i</span></sub>&#XA0;<span class="c011">w</span>(<span class="c011">x</span><sub><span class="c011">i</span></sub>).
</td></tr>
</table><p><a id="hevea_general456"></a><a id="hevea_general457"></a><a id="hevea_general458"></a>Using the definition of the expectation value, we define the
variance, or &#X201C;Second Moment&#X201D; as
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c008">Var</span>&#XA0;&#XA0;<span class="c011">X</span>&#XA0;:=&#XA0;<span class="c008">Ex</span>&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239D;</td><td class="dcell">(<span class="c011">X</span>&#XA0;&#X2212;&#XA0;<span class="c008">Ex</span>&#XA0;&#XA0;<span class="c011">X</span>)<sup>2</sup>&#XA0;</td><td class="dcell">&#X239E;<br>
&#X23A0;</td><td class="dcell">,
</td></tr>
</table><p>
<a id="hevea_general459"></a>and the standard deviation as
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;&#X3C3;&#XA0;&#XA0;&#XA0;<span class="c011">X</span>&#XA0;:=&#XA0;</td><td class="dcell"><span style="font-size:x-large">&#X221A;</span></td><td class="dcell"><table class="cellpadding0" style="border:0;border-spacing:1;border-collapse:separate;"><tr><td class="hbar"></td></tr>
<tr><td class="c020"><span class="c008">Var</span>&#XA0;&#XA0;<span class="c011">X</span></td></tr>
</table></td><td class="dcell">.
</td></tr>
</table><p>Obviously, the variance of <span class="c011">X</span> is the expectation value of the squared deviation from the
expectation value of <span class="c011">X</span> itself. Note that the variance&#X2019;s dimension is <span class="c011">X</span>&#X2019;s dimension squared;
the standard deviation rectifies the dimension to make it comparable with <span class="c011">X</span> itself again.</p><!--TOC subsubsection id="sec:estimators" Estimators-->
<h4 class="subsubsection" id="sec:estimators"><a id="hevea_general460"></a>Estimators</h4><!--SEC END --><p>In <span class="c008">Enfuse</span>, we assume that <span class="c011">X</span> follows a uniform probability function&#XA0;<span class="c011">w</span>(<span class="c011">x</span>) = const. That
is, all pixel values in the local analysis window are considered to be equally probable. Thus,
the expectation value and the variance can be estimated from the pixel values like this
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c008">Ex</span>&#XA0;&#XA0;<span class="c011">X</span>&#XA0;:=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019"><span class="c011">n</span></td></tr>
</table></td><td class="dcell">&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">n</span></td></tr>
<tr><td class="dcell c019"><span class="c010">&#X2211;</span></td></tr>
<tr><td class="dcell c019"><span class="c011">i</span>&#XA0;=&#XA0;1</td></tr>
</table></td><td class="dcell">&#XA0;<span class="c011">x</span><sub><span class="c011">i</span></sub>.
</td></tr>
</table><p>
In other words: the expectation value is the arithmetic mean of the lightness of all
pixels in the local analysis window. Analogously, the variance becomes
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c008">Var</span>&#XA0;&#XA0;<span class="c011">X</span>&#XA0;:=
</td><td class="dcell"><table class="display"><tr><td class="dcell c019">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019"><span class="c011">n</span>&#XA0;&#X2212;&#XA0;1</td></tr>
</table></td><td class="dcell">&#XA0;&#XA0;&#XA0;<span class="c008">Ex</span>&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239D;</td><td class="dcell">(<span class="c011">X</span>&#XA0;&#X2212;&#XA0;<span class="c008">Ex</span>&#XA0;&#XA0;<span class="c011">X</span>)<sup>2</sup>&#XA0;</td><td class="dcell">&#X239E;<br>
&#X23A0;</td><td class="dcell">.
</td></tr>
</table><!--TOC subsection id="sec:laplacian-of-gaussian" 5.4.2&#XA0;&#XA0;Laplacian of Gaussian-->
<h3 class="subsection" id="sec:laplacian-of-gaussian">5.4.2&#XA0;&#XA0;<a id="hevea_general461"></a><a id="hevea_general462"></a>Laplacian of Gaussian</h3><!--SEC END --><p><a id="hevea_general463"></a><a id="hevea_general464"></a>
The <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span> (<span class="c016">LoG</span>) is an operator to detect
edges in an image. Sometimes the <span class="c016">LoG</span>-operator is also called
<span class="c016">Marr</span>-<span class="c016">Hildreth</span> operator. A
<span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span> operator,
<a href="https://ukoethe.github.io/vigra/doc-release/vigra/group__ConvolutionFilters.html"><span class="c005">vigra::laplacianOfGaussian</span></a> is part of the
package&#XA0;<a href="https://ukoethe.github.io/vigra/"><span class="c016">VIGRA</span></a> that <span class="c008">Enfuse</span> is built upon and is used for edge
detection if option&#XA0;<span class="c005">--contrast-edge-scale</span> is non-zero and
<span class="c005">--contrast-min-curvature</span> equal to or less than zero.
</p><p>Let the <span class="c016">Gaussian</span> function be
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">g</span>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;=
</td><td class="dcell"><table class="display"><tr><td class="dcell c019">1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">2&#XA0;&#X3C0;&#XA0;&#X3C3;<sup>2</sup></td></tr>
</table></td><td class="dcell">&#XA0;&#XA0;
</td><td class="dcell"><table class="display"><tr class="c025"><td class="dcell">exp</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell">&#X2212;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">x</span><sup>2</sup>&#XA0;+&#XA0;<span class="c011">y</span><sup>2</sup></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">2&#XA0;&#X3C3;<sup>2</sup></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td></tr>
</table></td></tr>
</table><p>
The parameter&#XA0;&#X3C3;, the argument of option&#XA0;<span class="c005">--contrast-edge-scale</span>, is the
length scale on which edges are detected by <span class="c011">g</span>(<span class="c011">x</span>, <span class="c011">y</span>). We apply the <span class="c016">Laplacian</span>
operator in <span class="c016">Cartesian</span> coordinates
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;&#X25B3;&#XA0;&#X2261;&#XA0;&#X2207;&#XA0;&#XB7;&#XA0;&#X2207;&#XA0;=
</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&#X2202;<sup>2</sup></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">&#X2202;&#XA0;<span class="c011">x</span><sup>2</sup></td></tr>
</table></td><td class="dcell">&#XA0;+&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&#X2202;<sup>2</sup></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">&#X2202;&#XA0;<span class="c011">y</span><sup>2</sup></td></tr>
</table></td></tr>
</table><p>
to <span class="c011">g</span>(<span class="c011">x</span>, <span class="c011">y</span>), to arrive at a continuous representation of the two-dimensional filter
kernel
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:laplacian-of-gaussian"></a>
<span class="c011">k</span>(<span class="c011">x</span>,&#XA0;<span class="c011">y</span>)&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&#X3BE;<sup>2</sup>&#XA0;&#X2212;&#XA0;1</td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">&#X3C0;&#XA0;&#X3C3;<sup>4</sup></td></tr>
</table></td><td class="dcell">&#XA0;exp(&#X2212;&#X3BE;<sup>2</sup>),
&#XA0;&#XA0;&#XA0;&#XA0;(5.3)</td></tr>
</table><p>
where we have used the dimensionless distance&#XA0;&#X3BE; from the origin
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;&#X3BE;<sup>2</sup>&#XA0;=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">x</span><sup>2</sup>&#XA0;+&#XA0;<span class="c011">y</span><sup>2</sup></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">2&#XA0;&#X3C3;<sup>2</sup></td></tr>
</table></td><td class="dcell">.
</td></tr>
</table><p><span class="c008">Enfuse</span> uses a discrete approximation of <span class="c011">k</span> in the convolution with the image. The operator is
radially symmetric with respect to the origin, which is why we can easily plot it in
Figure&#XA0;<a href="#fig%3Alaplacian-of-gaussian">5.8</a>, setting <span class="c011">R</span> = &#X221A;<span class="c024"><span class="c011">x</span></span><sup><span class="c024">2</span></sup><span class="c024"> + <span class="c011">y</span></span><sup><span class="c024">2</span></sup>.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="laplacian-of-gaussian.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.8: <a id="fig:laplacian-of-gaussian"></a>Plot of the <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span> function&#XA0;<span class="c011">k</span>(<span class="c011">R</span>),
Eqn.&#XA0;<a href="#equ%3Alaplacian-of-gaussian">5.3</a>, for &#X3C3; = 0.5, using <span class="c011">R</span> = &#X221A;<span class="c024"><span class="c011">x</span></span><sup><span class="c024">2</span></sup><span class="c024"> +
<span class="c011">y</span></span><sup><span class="c024">2</span></sup>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>See also <a href="http://homepages.inf.ed.ac.uk/rbf/HIPR2/log.htm"><span class="c016">HIPR2</span>:
<span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span></a>.</p><p>Sometimes the <span class="c016">LoG</span> is plagued by noise in the input images. After all, it is a
numerical approximation of the second derivative and deriving always &#X201C;roughens&#X201D; a function.
The (normalized) mask files relentlessly disclose such problems. Use
option&#XA0;<span class="c005">--contrast-min-curvature</span> with a <em>negative</em> argument&#XA0;<span class="c013">CURVATURE</span> to
suppress all edges with a curvature below &#X2212;<span class="c013">CURVATURE</span> (which is a positive value).
Check the effects with the mask files and particularly the hard-mask files
(&#X27E8;<span class="c011">hardmask-%n.tif</span>&#X27E9;) if using option&#XA0;<span class="c005">--hard-mask</span>.</p><p>To indicate the <span class="c013">CURVATURE</span> in relative terms, which is particularly comprehensible for
humans, append a percent sign (&#X2018;<span class="c005">%</span>&#X2019;). Try minimum curvatures starting from &#X2212;0.5% to
&#X2212;3%.</p><p><br>
</p><p><span class="c017">Summary of influential options</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--contrast-edge-scale</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-edge-scale">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--contrast-min-curvature</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-min-curvature">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--contrast-weight</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-weight">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--hard-mask</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Ahard-mask">4.2.3</a>
</dd></dl><!--TOC subsection id="sec:blend-sdev-and-log" 5.4.3&#XA0;&#XA0;Blend <span class="c016">SDev</span> and <span class="c016">LoG</span>-->
<h3 class="subsection" id="sec:blend-sdev-and-log">5.4.3&#XA0;&#XA0;<a id="hevea_general465"></a><a id="hevea_general466"></a>Blend Standard Deviation and <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span></h3><!--SEC END --><p><span class="c008">Enfuse</span> can team the standard deviation computation and Laplacian of Gaussian to deliver the best
of both methods. Use a <em>positive</em> argument&#XA0;<span class="c013">CURVATURE</span> with
option&#XA0;<span class="c005">--contrast-min-curvature</span> to combine both algorithms. In this mode of operation
<span class="c008">Enfuse</span> computes the <span class="c016">SDev</span>-weight and the <span class="c016">LoG</span>-weight, then uses the
<span class="c016">LoG</span> to decide whether to go with that value or prefer the <span class="c016">SDev</span> data. If the
<span class="c016">LoG</span> is greater than <span class="c013">CURVATURE</span> <span class="c008">Enfuse</span> uses the weight delivered by the
<span class="c016">LoG</span>, otherwise the <span class="c016">SDev</span>-weight is rescaled such that its maximum is equal to
<span class="c013">CURVATURE</span>, and the scaled <span class="c016">SDev</span> is used as weight.</p><p>This technique merges the two edge detection methods where they are best. The <span class="c016">LoG</span>
excels with clear edges and cannot be fooled by strong but smooth gradients. However, it is bad
at detecting faint edges and it is susceptible to noise. The <span class="c016">SDev</span> on the other hand
shines with even the most marginal edges, and resists noise quite well. Its weakness is that is
is easily deceived by strong and smooth gradients. Tuning <span class="c013">CURVATURE</span> the user can pick
the best threshold for a given set of images.</p><p><br>
</p><p><span class="c017">Summary of influential options</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--contrast-edge-scale</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-edge-scale">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--contrast-min-curvature</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-min-curvature">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--contrast-weight</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-weight">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--contrast-window-size</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Acontrast-window-size">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--gray-projector</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Agray-projector">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--hard-mask</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Ahard-mask">4.2.3</a>
</dd></dl><!--TOC subsection id="sec:scaling-and-choice" 5.4.4&#XA0;&#XA0;Scaling and Choice of Mode-->
<h3 class="subsection" id="sec:scaling-and-choice">5.4.4&#XA0;&#XA0;<a id="hevea_general467"></a>
<a id="hevea_general468"></a>Scaling and Choice of Mode</h3><!--SEC END --><p>Experience has shown that neither the parameters <span class="c013">EDGESCALE</span> and <span class="c013">CURVATURE</span> nor
the mode of operation (<span class="c016">SDev</span>-only, <span class="c016">LoG</span>-only, or a blend of both) scales to
different image sizes. In practice, this means that if you start with a set of reduced size
images, say 2808 &#XD7; 1872&#XA0;pixels, carefully optimize <span class="c013">EDGESCALE</span>,
<span class="c013">CURVATURE</span> and so on, and find <span class="c016">LoG</span>-only the best mode, and then switch to the
original resolution of 5616 &#XD7; 3744&#XA0;pixels, multiplying (or dividing) the parameters by
four and sticking to <span class="c016">LoG</span>-only might <em>not</em> result in the best fused image. For
best quality, perform the parameter optimization and the search for the most appropriate mode at
the final resolution.</p><!--TOC section id="sec:local-entropy-weighting" 5.5&#XA0;&#XA0;Local Entropy Weighting-->
<h2 class="section" id="sec:local-entropy-weighting">5.5&#XA0;&#XA0;<a id="hevea_general469"></a><a id="hevea_general470"></a><a id="hevea_general471"></a><a id="hevea_general472"></a>Local Entropy Weighting</h2><!--SEC END --><p>Entropy weighting prefers pixels inside a high entropy neighborhood.</p><p><a id="hevea_general473"></a>Let <span class="c011">S</span> be an <span class="c011">n</span>-ary source. Watching the output of <span class="c011">S</span> an observer
on average gains the information
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">H</span><sub><span class="c011">a</span></sub>(<span class="c011">n</span>)&#XA0;:=&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&nbsp;</td></tr>
<tr><td class="dcell c019"><span class="c010">&#X2211;</span></td></tr>
<tr><td class="dcell c019"><span class="c011">x</span>&#XA0;&#X2208;&#XA0;<span class="c011">S</span></td></tr>
</table></td><td class="dcell">&#XA0;<span class="c011">p</span>(<span class="c011">x</span>)&#XA0;log<sub><span class="c011">a</span></sub>(1&#XA0;/&#XA0;<span class="c011">p</span>(<span class="c011">x</span>))
</td></tr>
</table><p>
per emitted message, where we assume the knowledge of the probability function&#XA0;<span class="c011">p</span>(<span class="c011">S</span>).
The expectation value&#XA0;<span class="c011">H</span><sub><span class="c011">a</span></sub>(<span class="c011">n</span>) is called entropy of the source&#XA0;<span class="c011">S</span>. Entropy measures our
uncertainty if we are to guess which message gets chosen by the source in the future. The unit
of the entropy depends on the choice of the constant&#XA0;<span class="c011">a</span> &gt; 1. Obviously
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">H</span><sub><span class="c011">b</span></sub>(<span class="c011">n</span>)&#XA0;=&#XA0;<span class="c011">H</span><sub><span class="c011">a</span></sub>(<span class="c011">n</span>)&#XA0;/&#XA0;log<sub><span class="c011">a</span></sub>(<span class="c011">b</span>)
</td></tr>
</table><p>
holds for all <span class="c011">b</span> &gt; 1. We use <span class="c011">a</span> = 2 for entropy weighting and set the entropy of
the &#X201C;impossible message&#X201D; to zero according to
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;&#XA0;&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&nbsp;</td></tr>
<tr><td class="dcell c019">lim</td></tr>
<tr><td class="dcell c019"><span class="c011">p</span>&#XA0;&#X2192;&#XA0;0</td></tr>
</table></td><td class="dcell">&#XA0;&#XA0;&#XA0;<span class="c011">p</span>&#XA0;&#XA0;&#XA0;log<sub><span class="c011">a</span></sub>(1&#XA0;/&#XA0;<span class="c011">p</span>)&#XA0;=&#XA0;0.
</td></tr>
</table><p>Figure&#XA0;<a href="#fig%3Aentropy">5.9</a> shows an entropy function.</p><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="entropy.png">
<div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 5.9: <a id="fig:entropy"></a>Entropy function&#XA0;<span class="c011">H</span><sub>2</sub>(<span class="c011">p</span>) for an experiment with exactly two outcomes.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>For more on (information) entropy visit <a href="https://en.wikipedia.org/wiki/Information_entropy">Wikipedia</a>.</p><p><a id="hevea_general474"></a><span class="c008">Enfuse</span> computes a pixel&#X2019;s entropy by considering the pixel itself and its surrounding pixels
quite similar to Local-Contrast Weighting (<a href="#sec%3Alocal-contrast-weighting">5.4</a>). The size of
the window is set by &#X2018;<span class="c005">--entropy-window-size</span>&#X2019;. Choosing the right size is difficult,
because there is a serious tradeoff between the locality of the data and the size of the sample
used to compute <span class="c011">H</span>. A large window results in a large sample size and therefore in a reliable
entropy, but considering pixels far away from the center degrades <span class="c011">H</span> into a non-local measure.
For small windows the opposite holds true.</p><p>Another difficulty arises from the use of entropy as a weighting function in dark parts of an
image, that is, in areas where the signal-to-noise ratio is low. Without any precautions, high
noise is taken to be high entropy, which might not be desired. Use
option&#XA0;<span class="c005">--entropy-cutoff</span> to control the black level when computing the entropy.</p><p>On the other extreme side of lightness, very light parts of an image, the sensor might already
have overflown without the signal reaching 1.0 in the normalized luminance interval. For these
pixels the entropy is zero and <span class="c008">Enfuse</span> can be told of the threshold by properly setting the
second argument of &#X2018;<span class="c005">--entropy-cutoff</span>&#X2019;.</p><p><br>
</p><p><span class="c017">Summary of influential options</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--entropy-cutoff</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aentropy-cutoff">4.2.5</a>
</dd><dt class="dt-list"><span class="c005">--entropy-weight</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aentropy-weight">4.2.3</a>
</dd><dt class="dt-list"><span class="c005">--entropy-window-size</span>: </dt><dd class="dd-list"> Section&#XA0;<a href="#opt%3Aentropy-window-size">4.2.5</a>
</dd></dl><!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note7" href="#text7">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">In the current implementation a <span class="c005">floor(contrast-window-size / 2)</span>-wide
border around the images remains unprocessed and gets a weight of zero.</div>
</dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec:color-spaces" Chapter&#XA0;6&#XA0;&#XA0;Color Spaces<sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:color-spaces">Chapter&#XA0;6&#XA0;&#XA0;<a id="hevea_general475"></a><a id="hevea_general476"></a>Color Spaces And Color Profiles<sup><span class="c008">c</span></sup></h1><!--SEC END --><p><a id="hevea_general477"></a><a id="hevea_general478"></a>This chapter explains the connection of pixel data types,
<a href="https://en.wikipedia.org/wiki/ICC_profile"><span class="c016">ICC</span></a>-color profiles, blend color spaces in <span class="c008">Enfuse</span> or
<span class="c008">Enblend</span>.</p><p><a id="hevea_general479"></a><a id="hevea_general480"></a><a id="hevea_general481"></a><a id="hevea_general482"></a>Here, we collectively speak of blending and do not distinguish fusing, for the basic operations
are the same. Furthermore, we assume the multi-resolution spline algorithm has calculated a set
of weights&#XA0;<span class="c011">w</span><sub><span class="c011">i</span></sub> for <span class="c011">i</span> = 1, 2, &#X2026;&#XA0;and &#X2211;<span class="c011">w</span><sub><span class="c011">i</span></sub> = 1 for each pixel that must be blended
from the participating input pixels&#XA0;<span class="c011">P</span><sub><span class="c011">i</span></sub>, <span class="c011">i</span> = 1, 2, &#X2026;.</p><p><a id="hevea_general483"></a><a id="hevea_general484"></a>In the simplest, non-trivial case we have to blend a pair of grayscale input pixels. Given
their luminances&#XA0;<span class="c011">L</span><sub>1</sub>, <span class="c011">L</span><sub>2</sub> and their weighting factor&#XA0;0 &#X2264; <span class="c011">w</span> &#X2264; 1, what luminance&#XA0;<span class="c011">L</span>
is their &#X201C;weighted average&#X201D;? This is the heart of <span class="c008">Enfuse</span>&#X2019;s and <span class="c008">Enblend</span>&#X2019;s pyramidal blending
operations! We are in particular interested in a weighted average that appears <em>visually</em>
correct, this is, our eyes and brains consider <span class="c011">L</span> convincing or at the very least credible.</p><div class="geeknote"><blockquote class="quotation"><span class="c015">
Note that <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> face different obstacles in their respective
domains of use.</span><dl class="list"><dt class="dt-list"><span class="c015">

<span class="c008">Enblend</span></span></dt><dd class="dd-list"><span class="c015">The overlapping areas usually are <em>well matched</em> both geometrically and
photometrically. The differences of the pixels that must be blended are small.</span></dd><dt class="dt-list"><span class="c015"><span class="c008">Enfuse</span> (using a Soft Mask</span><sup><a id="text8" href="#note8"><span class="c015">1</span></a></sup><span class="c015">)</span></dt><dd class="dd-list"><span class="c015">The input images <em>greatly differ</em> in exposure, saturation, or contrast. This is
exactly why we want to fuse them. Thus, the luminance, saturation, and hue differences to
be handled by <span class="c008">Enfuse</span> are generally quite high.
</span></dd></dl></blockquote></div><p>The details of blending pixels and in particular color pixels is quite intricate, which is why
we start this chapter with a mathematical introduction.</p><!--TOC section id="sec:mathematical-preliminaries" 6.1&#XA0;&#XA0;Mathematical Preliminaries-->
<h2 class="section" id="sec:mathematical-preliminaries">6.1&#XA0;&#XA0;<a id="hevea_general485"></a>Mathematical Preliminaries</h2><!--SEC END --><p><a id="hevea_general486"></a><a id="hevea_general487"></a>Let us first address grayscale images because they only require us to talk about luminances.
For a linear representation of luminances, we just blend for a given <span class="c011">t</span> with
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:trivial-luminance-blend"></a>
<span class="c011">L</span>&#XA0;=&#XA0;<span class="c011">t</span>&#XA0;<span class="c011">L</span><sub>1</sub>&#XA0;+&#XA0;(1&#XA0;&#X2212;&#XA0;<span class="c011">t</span>)&#XA0;<span class="c011">L</span><sub>2</sub>&#XA0;&#XA0;&#XA0;&#XA0;with&#XA0;&#XA0;&#XA0;&#XA0;0&#XA0;&#X2264;&#XA0;<span class="c011">t</span>&#XA0;&#X2264;&#XA0;1,
&#XA0;&#XA0;&#XA0;&#XA0;(6.1)</td></tr>
</table><p>
where the luminances&#XA0;<span class="c011">L</span><sub><span class="c011">i</span></sub>, <span class="c011">i</span> = 1, 2, range from zero to their data-type dependent maximum
value&#XA0;<span class="c011">L</span><sub><span class="c011">max</span></sub>, thereby defining a &#X201C;luminance interval&#X201D;. We can always map this
interval to (0, 1) by dividing the luminances by the maximum, which is why we call the latter
<em>&#X201C;normalized luminance interval&#X201D;</em>:
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:luminance-normalization"></a>
(0,&#XA0;<span class="c011">L</span><sub><span class="c011">max</span></sub>)&#XA0;&#X2192;&#XA0;(0,&#XA0;1)
&#XA0;&#XA0;&#XA0;&#XA0;(6.2)</td></tr>
</table><p>
Obviously,
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:normalized-luminance"></a>
0&#XA0;&#X2264;&#XA0;<span class="c024">L</span>&#XA0;&#X2264;&#XA0;1
&#XA0;&#XA0;&#XA0;&#XA0;(6.3)</td></tr>
</table><p>
holds for all values&#XA0;<span class="c024">L</span> := <span class="c011">L</span> / <span class="c011">L</span><sub><span class="c011">max</span></sub> in the normalized luminance interval.</p><p><a id="hevea_general488"></a>Sometimes images are gamma-encoded with exponent&#XA0;&#X3B3; and the blended luminance becomes
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:gamma-luminance-blend"></a>
<span class="c011">L</span>&#X2032;&#XA0;=&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239D;</td><td class="dcell"><span class="c011">t</span>&#XA0;<span class="c011">L</span><sub>1</sub><sup>1/&#X3B3;</sup>&#XA0;+&#XA0;(1&#XA0;&#X2212;&#XA0;<span class="c011">t</span>)&#XA0;<span class="c011">L</span><sub>2</sub><sup>1/&#X3B3;</sup></td><td class="dcell">&#X239E;<br>
&#X23A0;</td><td class="dcell"><sup>&#X3B3;</sup>,
&#XA0;&#XA0;&#XA0;&#XA0;(6.4)</td></tr>
</table><p>
<a id="hevea_general489"></a>which couples <span class="c011">t</span> and <span class="c011">L</span>&#X2032; in a non-linear way. See also <span class="c016">Eric Brasseur&#X2019;s</span>
explanation of the <a href="http://www.4p8.com/eric.brasseur/gamma.html">gamma error in picture scaling</a>.</p><div class="geeknote"><blockquote class="quotation"><span class="c009">
</span><a id="hevea_general490"></a><span class="c009"><span class="c013">Typical gamma values are </span>&#X3B3; = 2.2<span class="c013"> for </span><span class="c016">sRGB</span><span class="c013"> and </span><span class="c016">AdobeRGB</span><span class="c013">, 1.8 for
</span><span class="c016">AppleRGB</span><span class="c013">, and </span><span class="c016">ProPhotoRGB</span><span class="c013">, 1.0 for Linear Rec709 </span><span class="c016">RGB</span><span class="c013"> and any
others with &#X201C;linear&#X201D; in their names. For an extensive overview check out </span><span class="c016">Bruce
Lindbloom&#X2019;s</span> </span><a href="http://www.brucelindbloom.com/index.html?WorkingSpaceInfo.html"><span class="c015">Information on Working Color Spaces.</span></a><span class="c009">
</span></blockquote></div><p>The usual color-input images fed into <span class="c008">Enfuse</span> are <span class="c016">RGB</span>-encoded, which means each pixel
comes as a triple of values&#XA0;(<span class="c011">r</span>, <span class="c011">g</span>, <span class="c011">b</span>)<sup><span class="c011">T</span></sup> that represent the red, green, and&#XA0;blue
parts. We apply the normalization&#XA0;(<a href="#equ%3Aluminance-normalization">6.2</a>) to each of the three
primary colors and arrive at an <em>&#X201C;<span class="c016">RGB</span>-cube&#X201D;</em> with unit edge length. The
vectors of primary colors span the cube
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&#X2192;</td></tr>
<tr><td class="dcell c019"><span class="c011">r</span></td></tr>
<tr><td class="dcell c019">&nbsp;</td></tr>
</table></td><td class="dcell">&#XA0;=&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">1</td></tr>
<tr><td class="c020">0</td></tr>
<tr><td class="c020">0</td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">,&#XA0;&#XA0;
</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&#X2192;</td></tr>
<tr><td class="dcell c019"><span class="c011">g</span></td></tr>
<tr><td class="dcell c019">&nbsp;</td></tr>
</table></td><td class="dcell">&#XA0;=&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">0</td></tr>
<tr><td class="c020">1</td></tr>
<tr><td class="c020">0</td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">&#XA0;&#XA0;&#XA0;and&#XA0;&#XA0;
</td><td class="dcell"><table class="display"><tr><td class="dcell c019">&#X2192;</td></tr>
<tr><td class="dcell c019"><span class="c011">b</span></td></tr>
<tr><td class="dcell c019">&nbsp;</td></tr>
</table></td><td class="dcell">&#XA0;=&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">0</td></tr>
<tr><td class="c020">0</td></tr>
<tr><td class="c020">1</td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">.
</td></tr>
</table><p>
For each point inside &#X2013; familiarly called pixel &#X2013; the generalization of
(<a href="#equ%3Anormalized-luminance">6.3</a>) holds
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:rgb-cube"></a>
</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">0</td></tr>
<tr><td class="c020">0</td></tr>
<tr><td class="c020">0</td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">&#X2264;
</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020"><span class="c011">r</span></td></tr>
<tr><td class="c020"><span class="c011">g</span></td></tr>
<tr><td class="c020"><span class="c011">b</span></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">&#X2264;
</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020">1</td></tr>
<tr><td class="c020">1</td></tr>
<tr><td class="c020">1</td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">.
&#XA0;&#XA0;&#XA0;&#XA0;(6.5)</td></tr>
</table><p>Blending the pixels of <em>color</em> images is more complicated than blending plain luminances.
Although we can write down the na&#XEF;ve blending equation, (<a href="#equ%3Atrivial-luminance-blend">6.1</a>),
again for <span class="c016">RGB</span>-coded pixels
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;<span class="c011">P</span><sub>1</sub>&#XA0;:=&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020"><span class="c011">r</span><sub>1</sub></td></tr>
<tr><td class="c020"><span class="c011">g</span><sub>1</sub></td></tr>
<tr><td class="c020"><span class="c011">b</span><sub>1</sub></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">
&#XA0;&#XA0;&#XA0;and&#XA0;&#XA0;
<span class="c011">P</span><sub>2</sub>&#XA0;:=&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020"><span class="c011">r</span><sub>2</sub></td></tr>
<tr><td class="c020"><span class="c011">g</span><sub>2</sub></td></tr>
<tr><td class="c020"><span class="c011">b</span><sub>2</sub></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td></tr>
</table><p>
and trivially arrive at
</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:trivial-rgb-blend"></a>
<span class="c011">P</span>&#XA0;:=
</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020"><span class="c011">r</span></td></tr>
<tr><td class="c020"><span class="c011">g</span></td></tr>
<tr><td class="c020"><span class="c011">b</span></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">=
<span class="c011">t</span>&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020"><span class="c011">r</span><sub>1</sub></td></tr>
<tr><td class="c020"><span class="c011">g</span><sub>1</sub></td></tr>
<tr><td class="c020"><span class="c011">b</span><sub>1</sub></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">+
(1&#XA0;&#X2212;&#XA0;<span class="c011">t</span>)&#XA0;</td><td class="dcell">&#X239B;<br>
&#X239C;<br>
&#X239C;<br>
&#X239D;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c020"><span class="c011">r</span><sub>2</sub></td></tr>
<tr><td class="c020"><span class="c011">g</span><sub>2</sub></td></tr>
<tr><td class="c020"><span class="c011">b</span><sub>2</sub></td></tr>
</table></td><td class="dcell">&#X239E;<br>
&#X239F;<br>
&#X239F;<br>
&#X23A0;</td><td class="dcell">
&#XA0;&#XA0;&#XA0;with&#XA0;&#XA0;&#XA0;&#XA0;0&#XA0;&#X2264;&#XA0;<span class="c011">t</span>&#XA0;&#X2264;&#XA0;1,
&#XA0;&#XA0;&#XA0;&#XA0;(6.6)</td></tr>
</table><p>
but this means</p><ul class="itemize"><li class="li-itemize">
we implicitly treat the color components <span class="c011">r</span><sub><span class="c011">i</span></sub>, <span class="c011">g</span><sub><span class="c011">i</span></sub>, <span class="c011">b</span><sub><span class="c011">i</span></sub> as <em>separate</em> luminances, which
they are not and moreover</li><li class="li-itemize">we neglect the visual aspects, namely luminance, saturation, and&#XA0;hue of the blended color
pixel&#XA0;<span class="c011">P</span>.
</li></ul><!--TOC section id="sec:floating-point-images" 6.2&#XA0;&#XA0;Floating-Point Images-->
<h2 class="section" id="sec:floating-point-images">6.2&#XA0;&#XA0;<a id="hevea_general491"></a><a id="hevea_general492"></a>Floating-Point Images</h2><!--SEC END --><p><a id="hevea_general493"></a><a id="hevea_general494"></a><a id="hevea_general495"></a><a id="hevea_general496"></a><a id="hevea_general497"></a><a id="hevea_general498"></a><a id="hevea_general499"></a><a id="hevea_general500"></a><a id="hevea_general501"></a><a id="hevea_general502"></a>Floating-point images (<span class="c016">EXR</span>, floating-point <span class="c016">TIFF</span>, or <span class="c016">VIFF</span>) get a
special treatment. Their values&#XA0;<span class="c011">L</span> are first converted by the Log-transform.</p><table class="display dcenter"><tr class="c025"><td class="dcell"><a id="equ:log-transform"></a>
Log(<span class="c011">L</span>)&#XA0;:=
</td><td class="dcell">&#X23A7;<br>
&#X23A8;<br>
&#X23A9;</td><td class="dcell"><table class="c002 cellpading0"><tr><td class="c022">&#XA0;&#XA0;&#XA0;&#XA0;1&#XA0;+&#XA0;log(1&#XA0;+&#XA0;<span class="c011">L</span>)</td><td class="c022">&#XA0;&#XA0;&#XA0;for &#XA0;<span class="c011">L</span>&#XA0;&#X2265;&#XA0;0&#XA0; and&#XA0;</td></tr>
<tr><td class="c022">&#XA0;&#XA0;&#XA0;&#XA0;1&#XA0;/&#XA0;(1&#XA0;&#X2212;&#XA0;<span class="c011">L</span>)</td><td class="c022">&#XA0;&#XA0;&#XA0;otherwise,
</td></tr>
</table></td><td class="dcell">
</td><td class="dcell">
&#XA0;&#XA0;&#XA0;&#XA0;(6.7)</td></tr>
</table><p>which is undone by the inverse transform after blending. Here, log(<span class="c011">x</span>) with a
lower-case initial denotes the natural logarithmic function (i.e. to base&#XA0;<span class="c011">e</span>).
Figure&#XA0;<a href="#fig%3Alog-transform">6.1</a> shows the forward transform in the range from &#X2212;20 to&#XA0;100.
Around <span class="c011">L</span> = 0 function&#XA0;Log(<span class="c011">L</span>) has the series expansion
</p><table class="display dcenter"><tr class="c025"><td class="dcell">Log(<span class="c011">L</span>)&#XA0;=&#XA0;1&#XA0;+&#XA0;<span class="c011">L</span>&#XA0;+&#XA0;</td><td class="dcell"><table class="display"><tr><td class="dcell c019"><span class="c011">L</span><sup>2</sup></td></tr>
<tr><td class="hbar"></td></tr>
<tr><td class="dcell c019">2</td></tr>
</table></td><td class="dcell">&#XA0;+&#XA0;<span class="c011">O</span>(<span class="c011">L</span><sup>3</sup>),&#XA0;for &#XA0;0&#XA0;&#X2264;&#XA0;<span class="c011">L</span>&#XA0;&lt;&#XA0;1.
</td></tr>
</table><blockquote class="figure"><div class="center"><div class="center"><hr class="c029"></div>
<img src="log-transform.png"><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 6.1: <a id="fig:log-transform"></a><a id="hevea_general503"></a>Forward Log-transform shown for the range of &#X2212;20 &#X2264; <span class="c011">L</span> &#X2264; 100. The
domain of Log(<span class="c011">L</span>) is the whole real axis.</td></tr>
</table></div><div class="center"><hr class="c029"></div></div></blockquote><p>This transform serves two purposes:</p><ul class="itemize"><li class="li-itemize">
During blending, even completely non-negative images can result in negative pixels. A
Log-transform followed by the inverse guarantees all-positive output.</li><li class="li-itemize">For <span class="c016">HDR</span>&#XA0;data, the Log-transform puts the samples closer to a perceptual
space making the blending a little more pleasing.
</li></ul><p>In the current version of <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> it is <em>strongly recommended</em> to use
blending inside the <span class="c016">RGB</span>-cube whenever the input data is in floating-point format; this
is the default, too.</p><!--TOC section id="sec:color-profiles" 6.3&#XA0;&#XA0;Color Profiles-->
<h2 class="section" id="sec:color-profiles">6.3&#XA0;&#XA0;<a id="hevea_general504"></a>Color Profiles</h2><!--SEC END --><p><a id="hevea_general505"></a><a id="hevea_general506"></a><a id="hevea_general507"></a><a id="hevea_general508"></a><span class="c016">ICC</span>-color profiles completely absorb gamma
encodings&#XA0;(<a href="#equ%3Agamma-luminance-blend">6.4</a>) and <span class="c016">ICC</span>&#XA0;profile aware software like
<span class="c008">Enfuse</span> and <span class="c008">Enblend</span> decode and encode images automatically respecting the gamma curves.
Moreover color profiles define what is the darkest representable black, so called black-point
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;<span class="c011">L</span>&#XA0;=&#XA0;0
&#XA0;&#XA0;&#XA0;and&#XA0;&#XA0;
(<span class="c011">r</span>,&#XA0;<span class="c011">g</span>,&#XA0;<span class="c011">b</span>)<sup><span class="c011">T</span></sup>&#XA0;=&#XA0;(0,&#XA0;0,&#XA0;0)<sup><span class="c011">T</span></sup>
</td></tr>
</table><p>
and analogously what is the purest and brightest white, the white-point
</p><table class="display dcenter"><tr class="c025"><td class="dcell">&#XA0;&#XA0;<span class="c011">L</span>&#XA0;=&#XA0;1
&#XA0;&#XA0;&#XA0;and&#XA0;&#XA0;
(<span class="c011">r</span>,&#XA0;<span class="c011">g</span>,&#XA0;<span class="c011">b</span>)<sup><span class="c011">T</span></sup>&#XA0;=&#XA0;(1,&#XA0;1,&#XA0;1)<sup><span class="c011">T</span></sup>.
</td></tr>
</table><p>By default, <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> expect that either</p><ol class="enumerate" type=1><li class="li-enumerate">
<a id="enum:no-profile"></a>
no input image has a color profile or
</li><li class="li-enumerate"><a id="enum:same-profile"></a>
all images come with the <em>same</em> <span class="c016">ICC</span>&#XA0;profile.
</li></ol><p><a id="hevea_general509"></a><a id="hevea_general510"></a>Even black-and-white images benefit from having attached appropriate profiles!</p><p><a id="hevea_general511"></a><a id="hevea_general512"></a><a id="hevea_general513"></a><a id="hevea_general514"></a>In Case&#XA0;<a href="#enum%3Ano-profile">1</a>. the applications blend grayscale images in the normalized
luminance interval and color images inside the <span class="c016">sRGB</span>-cube. To override the default
<span class="c016">sRGB</span>-profile select the desired profile with
option&#XA0;<a href="#opt%3Afallback-profile"><span class="c005">--fallback-profile</span></a>.</p><p>In Case&#XA0;<a href="#enum%3Asame-profile">2</a>. the images first are by default transformed to
<a href="https://en.wikipedia.org/wiki/CIECAM02"><span class="c016">CIELUV</span></a> color space &#X2013; respecting the input color profile &#X2013;
then they are blended or fused, and finally the data get transformed back to <span class="c016">RGB</span> color
space defined by the profile of the input images. Consequently, the input profile is assigned
to the output image. Enforce a different blending color space than <span class="c016">CIELUV</span> with
option&#XA0;<a href="#opt%3Ablend-colorspace"><span class="c005">--blend-colorspace</span></a>.</p><p>Mixing different <span class="c016">ICC</span>&#XA0;profiles or alternating between images with profiles and without
them generates warnings as it generally leads to unpredictable results.</p><p>Floating-Point images are an exception to the above rules. They are <em>always</em> blended in
the <span class="c016">RGB</span> cube by default. The next section describes their treatment in detail.</p><!--TOC section id="sec:blending-color-spaces" 6.4&#XA0;&#XA0;Blending Color Spaces-->
<h2 class="section" id="sec:blending-color-spaces">6.4&#XA0;&#XA0;<a id="hevea_general515"></a><a id="hevea_general516"></a>Blending Color Spaces</h2><!--SEC END --><p><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> offer to work inside the <span class="c016">RGB</span>-cube&#XA0;(<a href="#equ%3Argb-cube">6.5</a>) or in
several perceptually uniform color spaces. To override the default select a particular blending
color space with option&#XA0;<a href="#opt%3Ablend-colorspace"><span class="c005">--blend-colorspace</span></a>. Here
are the four available color spaces.</p><dl class="list"><dt class="dt-list">

<a id="hevea_general517"></a><a id="hevea_general518"></a>Identity Space / <span class="c016">RGB</span>-Color Cube</dt><dd class="dd-list">Calculate the blended pixel inside the luminance interval (<a href="#equ%3Atrivial-luminance-blend">6.1</a>)
for grayscale images and inside the <span class="c016">RGB</span>-color cube as given in
(<a href="#equ%3Atrivial-rgb-blend">6.6</a>).<p>This is the fastest color space to do computations within, i.e. it consumes by far the least
computing power, because no transform to or from any of the perceptually uniform color spaces
is done.</p><p><a id="hevea_general519"></a><a id="hevea_general520"></a><a id="hevea_general521"></a><a id="hevea_general522"></a></p></dd><dt class="dt-list"><a href="https://en.wikipedia.org/wiki/Lab_color_space"><span class="c016">L*a*b*</span></a></dt><dd class="dd-list">Represent each pixel as lightness&#XA0;<span class="c011">L</span><sup>*</sup>, red-green difference&#XA0;<span class="c011">a</span><sup>*</sup>,
and yellow-blue difference&#XA0;<span class="c011">b</span><sup>*</sup>. The <span class="c016">L*a*b*</span> color space encompasses
all perceivable colors. It is completely independent of any device characteristics,
approximates human vision, and is perceptually uniform.<p><span class="c008">Enfuse</span> uses perceptual rendering intent and either the input profile&#X2019;s white-point or, if the
<span class="c016">ICC</span>-profile lacks the <span class="c005">cmsSigMediaWhitePointTag</span>, fall back to the
<span class="c016">D50</span> white-point (see, e.g. <a href="https://en.wikipedia.org/wiki/Standard_illuminant">Standard
illuminant</a>).</p><p>The conversions from and to <span class="c016">L*a*b*</span> are moderately fast to compute; <span class="c016">L*a*b*</span>
mode is two to three times slower than working within the <span class="c016">RGB</span>-color cube.</p><p><a id="hevea_general523"></a><a id="hevea_general524"></a></p></dd><dt class="dt-list"><a href="https://en.wikipedia.org/wiki/CIELUV_color_space"><span class="c016">CIEL*u*v*</span></a></dt><dd class="dd-list">Represent each pixel as lightness&#XA0;<span class="c011">L</span><sup>*</sup> and two color
differences&#XA0;<span class="c011">u</span><sup>*</sup> and <span class="c011">v</span><sup>*</sup>. Formulas of each are too complicated
to show them here.<p>The <span class="c016">L*u*v*</span> tries to be perceptually uniform in lightness as well as in color.</p><p>The applications use the same rendering intent and white-point as with <span class="c016">L*a*b*</span>.</p><p>The conversions from and to <span class="c016">L*u*v*</span> are almost as fast to compute as
<span class="c016">L*a*b*</span>.</p><p><a id="hevea_general525"></a><a id="hevea_general526"></a><a id="hevea_general527"></a><a id="hevea_general528"></a><a id="hevea_general529"></a><a id="hevea_general530"></a></p></dd><dt class="dt-list"><a href="https://en.wikipedia.org/wiki/CIECAM02"><span class="c016">CIECAM02</span></a></dt><dd class="dd-list">Represent each pixel as lightness&#XA0;<span class="c011">J</span>, chroma&#XA0;<span class="c011">C</span> (&#X201C;colorfulness&#X201D;), and hue
angle&#XA0;<span class="c011">h</span>.<div class="geeknote"><blockquote class="quotation"><span class="c009"><span class="c013">
Internally, the polar coordinates </span>(<span class="c011">C</span>, <span class="c011">h</span>)<span class="c013"> are translated to </span><span class="c016">Cartesian</span><span class="c013">
coordinates for the pyramids.
</span></span></blockquote></div><p>The transformations to <span class="c016">CIECAM02</span> color space and back use perceptual rendering
intent, the <span class="c016">D50</span> white point (see, e.g. <a href="https://en.wikipedia.org/wiki/Standard_illuminant">Standard
illuminant</a>), 500&#XA0;lumen surrounding light (&#X201C;average&#X201D; in <span class="c016">CIECAM02</span> parlance),
and assume complete adaption.</p><p>Both <span class="c016">CIELUV</span> and <span class="c016">CIELAB</span> only model the color information generated for
small and isolated color samples. They cannot model the contextual effects of color
perception. However, <span class="c016">CIECAM02</span> can represent luminance adaptation, chromatic
contrast and chromatic assimilation that arise in real world viewing conditions with
heterogeneous, strongly contrasted, or three dimensional color sources.</p><p>Computationally, <span class="c016">CIECAM02</span> is the most expensive blend color space. If an
appreciable number of pixels need additional refinement steps the speed of the transformation
further drops. Expect <span class="c016">CIECAM02</span> mode to be 8&#X2013;800 times slower than blending within
the <span class="c016">RGB</span>-color cube.
</p></dd></dl><p>Surprisingly often blending &#X201C;inside the <span class="c016">RGB</span>-cube&#X201D; works, although
perceptually uniform color spaces, which represent luminance, saturation, and hue are preferable
for blending and fusing operations.</p><!--TOC section id="sec:practical-considerations" 6.5&#XA0;&#XA0;Practical Considerations-->
<h2 class="section" id="sec:practical-considerations">6.5&#XA0;&#XA0;<a id="hevea_general531"></a>Practical Considerations</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
For small projects stick with the default blend colorspaces.</li><li class="li-itemize">For large projects switch on blending in the <span class="c016">RGB</span> color cube to speed up the assembly
of the images. When satisfied with all other parameters use one of the computationally more
expensive, but perceptually uniform color spaces.</li><li class="li-itemize">Banding is best fought by input images with a high bit depth (&#X2265; 16 bits per
channel). A cheap and mostly vain trick is to force a large output bit depth with
option&#XA0;<a href="#opt%3Adepth"><span class="c005">--depth</span></a>. No blend color space can avoid banding if
parts of the input images are almost &#X201C;monochrome&#X201D;.</li><li class="li-itemize"><span class="c001"><span class="c008">Enfuse</span> only.</span> No color space can fix blown highlights when
fusing by exposure-weight; use
<a href="#opt%3Aexposure-cutoff">&#X2018;<span class="c005">--exposure-cutoff</span>&#X2019;</a> for this purpose and check
whether saturation weight is zero. </li></ul><!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note8" href="#text8">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Fusing with a Hard Mask is different,
because exactly one weight factor is unity and all the others are zero. There is nothing
to blend &#X2013; just to copy.</div>
</dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec:understanding-masks" Chapter&#XA0;7&#XA0;&#XA0;Understanding Masks<sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:understanding-masks">Chapter&#XA0;7&#XA0;&#XA0;<a id="hevea_general532"></a><a id="hevea_general533"></a>Understanding Masks<sup><span class="c008">c</span></sup></h1><!--SEC END --><p><a id="hevea_general534"></a><a id="hevea_general535"></a><a id="hevea_general536"></a>A binary mask indicates for every pixel of an image if this pixel must be considered in further
processing, or ignored. For a weight mask, the value of the mask determines how much the pixel
contributes, zero again meaning &#X201C;no contribution&#X201D;.</p><p>Masks arise in two places: as part of the input files and as separate files, showing the actual
pixel weights prior to image blending or fusion. We shall explore both occurrences in the next
sections.</p><!--TOC section id="sec:masks-in-input-files" 7.1&#XA0;&#XA0;Masks In Input Files-->
<h2 class="section" id="sec:masks-in-input-files">7.1&#XA0;&#XA0;<a id="hevea_general537"></a><a id="hevea_general538"></a>Masks In Input Files</h2><!--SEC END --><p>Each of the input files for <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> can contain its own mask. Both applications
interpret them as binary masks no matter how many bits per image pixel they contain.</p><p>Use <span class="c008">ImageMagick</span>&#X2019;s <a id="hevea_program20"></a><span class="c017">identify</span> (see
Example&#XA0;<a href="#ex%3Ausing-identify">7.1.10</a>) or, for <span class="c016">TIFF</span> files only, <a id="hevea_program21"></a><span class="c017">tiffinfo</span> (see Example&#XA0;<a href="#ex%3Ausing-tiffinfo">7.1.11</a>) to inquire
quickly whether a file contains a mask. Appendix&#XA0;<a href="#sec%3Ahelpful-programs">A</a> shows
where to find these programs on the web.</p><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="terminal"><div class="flushleft"><span class="c005">
$ identify -version <br>
 Version: ImageMagick 6.7.7-10 2014-03-08 Q16 http://www.imagemagick.org <br>
 Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC <br>
 Features: OpenMP <br>
 &#XA0; <br>
 $ identify -format "%f %m %wx%h %r %q-bit" image-0000.tif <br>
 image-0000.tif TIFF 917x1187 DirectClass sRGB Matte 16-bit <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;^^^^^<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">mask</span>
</span></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 7.1.10: <a id="ex:using-identify"></a>Using <span class="c017">identify</span> to find out about the mask in <span class="c011">image-0000.tif</span>.
&#X2018;<span class="c005">Matte</span>&#X2019; indicates the existence of a mask.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><blockquote class="exemplar"><div class="center"><hr class="c029"></div>
<div class="terminal"><div class="flushleft"><span class="c005">
$ tiffinfo <br>
 LIBTIFF, Version 4.0.2 <br>
 Copyright (c) 1988-1996 Sam Leffler <br>
 Copyright (c) 1991-1996 Silicon Graphics, Inc. <br>
 &#X2026;<br>
 &#XA0; <br>
 $ tiffinfo image-0000.tif <br>
 TIFF Directory at off set 0x3a8182 (3834242) <br>
 &#XA0;&#XA0;Subfile Type: (0 = 0x0) <br>
 &#XA0;&#XA0;Image Width: 917 Image Length: 1187 <br>
 &#XA0;&#XA0;Resolution: 150, 150 pixels/inch <br>
 &#XA0;&#XA0;Position: 0, 0 <br>
 &#XA0;&#XA0;Bits/Sample: 8 <br>
 &#XA0;&#XA0;Sample Format: unsigned integer <br>
 &#XA0;&#XA0;Compression Scheme: PackBits <br>
 &#XA0;&#XA0;Photometric Interpretation: RGB color <br>
 &#XA0;&#XA0;Extra Samples: 1&lt;unassoc-alpha&gt;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">mask</span> <br>
 &#XA0;&#XA0;Orientation: row 0 top, col 0 lhs <br>
 &#XA0;&#XA0;Samples/Pixel: 4&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;<span class="c011">R, G, B, and mask</span> <br>
 &#XA0;&#XA0;Rows/Strip: 285 <br>
 &#XA0;&#XA0;Planar Configuration: single image plane <br>
 &#XA0;&#XA0;ImageFullWidth: 3000 <br>
 &#XA0;&#XA0;ImageFullLength: 1187
</span></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Example 7.1.11: <a id="ex:using-tiffinfo"></a>Using <span class="c017">tiffinfo</span> to find out about the mask in <span class="c011">image-0000.tif</span>.
Here the line &#X2018;<span class="c005">Extra Samples</span>&#X2019; indicates one extra sample per pixel, which is
interpreted as an unassociated alpha-channel; <span class="c008">Enfuse</span> and <span class="c008">Enblend</span> interpret this
as mask. The second hint <span class="c017">tiffinfo</span> gives is in &#X2018;<span class="c005">Samples/Pixel</span>&#X2019;,
where &#X2013; for a <span class="c016">RGB</span>-image &#X2013; the 4 = 3 + 1 tells about the extra
channel.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p><a id="hevea_general539"></a><a id="hevea_general540"></a><a id="hevea_general541"></a>The &#X201C;Matte&#X201D; part of the image class and the &#X201C;Extra Samples&#X201D; line tell us that the file
features a mask. Also, many interactive image manipulation programs show the mask as a separate
channel, sometimes called &#X201C;alpha&#X201D;. There, the white (high mask value) parts of the mask
enable pixels and black (low mask value) parts suppress them.</p><p>The multitude of terms all describing the concept of a mask is confusing.</p><dl class="list"><dt class="dt-list">

<a id="hevea_general542"></a>Mask</dt><dd class="dd-list">A mask defines a selection of pixels. A value of zero represents an unselected pixel. The
maximum value (&#X201C;white&#X201D;) represents a selected pixel and the values between zero and the
maximum are partially selected pixels. See <a href="http://gimp-savvy.com/BOOK/index.html?node42.html">Gimp-Savy.</a><p><a id="hevea_general543"></a></p></dd><dt class="dt-list">Alpha Channel</dt><dd class="dd-list">The alpha channel stores the transparency value for each pixel, typically in the range from
zero to one. A value of zero means the pixel is completely transparent, thus does not
contribute to the image. A value of one on the other hand means the pixel is completely
opaque.<p><a id="hevea_general544"></a></p></dd><dt class="dt-list">Matte</dt><dd class="dd-list">The notion &#X201C;matte&#X201D; as used by <span class="c008">ImageMagick</span> refers to an inverted alpha channel,
more precisely: 1 &#X2212; alpha. See
<a href="https://www.imagemagick.org/Usage/transform/"><span class="c008">ImageMagick</span></a> for further explanations.
</dd></dl><p><span class="c008">Enfuse</span> and <span class="c008">Enblend</span> only consider pixels that have an associated mask value other than zero.
If an input image does not have an alpha channel, <span class="c008">Enblend</span> warns and assumes a mask
of all non-zero values, that is, it will use every pixel of the input image for fusion.</p><p><a id="hevea_program22"></a>Stitchers like <span class="c017">nona</span> add a mask to their output images.</p><p>Sometimes it is helpful to manually modify a mask before fusion. For example to suppress
unwanted objects (insects and cars come into mind) that moved across the scene during the
exposures. If the masks of all input images are black at a certain position, the output image
will have a hole in that position.</p><!--TOC section id="sec:weight-mask-files" 7.2&#XA0;&#XA0;Weight Mask Files-->
<h2 class="section" id="sec:weight-mask-files">7.2&#XA0;&#XA0;<a id="hevea_general545"></a><a id="hevea_general546"></a>Weight Mask Files</h2><!--SEC END --><p><span class="c000">FIX</span>Show some weight masks and explain them.<span class="c000">ME</span></p><!--TOC chapter id="sec:applications" Chapter&#XA0;8&#XA0;&#XA0;Applications of <span class="c008">Enfuse</span>-->
<h1 class="chapter" id="sec:applications">Chapter&#XA0;8&#XA0;&#XA0;<a id="hevea_general547"></a>Applications of <span class="c008">Enfuse</span></h1><!--SEC END --><p>This section describes some of the novel possibilities that <span class="c008">Enfuse</span> offers the photographer. In
contrast to the previous chapters, it centers around the effects on the final image.</p><!--TOC section id="sec:what-makes-images-fusable" 8.1&#XA0;&#XA0;What Makes Images Fusable?-->
<h2 class="section" id="sec:what-makes-images-fusable">8.1&#XA0;&#XA0;<a id="hevea_general548"></a>What Makes Images Fusable?</h2><!--SEC END --><p>
Images should align well to be suitable for fusion. However, there is no hard mathematical
rule what &#X201C;well&#X201D; means. The alignment requirements for 16&#XA0;MPixel images to yield a sharp
4" &#XD7; 6" print at 300&#XA0;dpi or even for web presentation are relatively low, whereas
the alignment of 8&#XA0;MPixel images for a 12" &#XD7; 18" print ought to be tight.
</p><p>If the input images need to be aligned, <span class="c008">Hugin</span><a id="hevea_program23"></a> (see also
Appendix&#XA0;<a href="#app%3Ahugin">A.2</a>) is the tool of choice. It produces images exactly in the format
that <span class="c008">Enfuse</span> expects.</p><p>Sometimes images naturally align extremely well so that no re-alignment is required. An image
series with preprogrammed exposure steps taken in rapid succession where the camera is mounted
on a heavy tripod and a humongous ball head, mirror lockup, and a cable release are used, comes
to mind.</p><p>When in doubt about what will work, try it, and judge for yourself.</p><p>Useful ideas for a good alignment:
</p><ul class="itemize"><li class="li-itemize">
Fix all camera parameters that are not explicitly varied.<dl class="list"><dt class="dt-list">

Aperture:</dt><dd class="dd-list"> Engage full manual or aperture-priority mode.</dd><dt class="dt-list">Auto-focus:</dt><dd class="dd-list"> Disable &#X201C;Auto Focus&#X201D;. Be aware that the auto-focus function could be
linked to shutter-release button position &#X201C;half pressed&#X201D; or to the shutter release in
insidious ways.</dd><dt class="dt-list">Closed eyepiece:</dt><dd class="dd-list"> Close the eyepiece when using a cable release to suppress variations
in stray light. (This tip applies only to single lens reflex cameras.)</dd><dt class="dt-list">Exposure time/Shutter speed:</dt><dd class="dd-list"> Use the shortest possible exposure time or, in other
words, use the fastest shutter speed to avoid blur caused by camera shake or motion blur.</dd><dt class="dt-list">Flash power:</dt><dd class="dd-list"> Explicitly control the flash power of <em>all</em> flashes. This is
sometimes called &#X201C;flash exposure lock&#X201D;.</dd><dt class="dt-list">Sensitivity:</dt><dd class="dd-list"> Disable &#X201C;Auto <span class="c016">ISO</span>&#X201D;.</dd><dt class="dt-list">White balance:</dt><dd class="dd-list"> Disable &#X201C;Auto White Balance&#X201D;. Instead, use the most suitable fixed
white balance or take the white balance off a white card. When in doubt, use the setting
&#X201C;Daylight&#X201D; or equivalent.
</dd></dl></li><li class="li-itemize">Steady the camera by any means.<ul class="itemize"><li class="li-itemize">
Apply your best camera bracing technique combined with controlled breathing.</li><li class="li-itemize">Prefer a monopod, or better, a rigid tripod with a heavy head.</li><li class="li-itemize">Use a cable release if possible.</li><li class="li-itemize">(This applies to cameras with a moving mirror only.) Engage &#X201C;mirror lockup&#X201D;.</li><li class="li-itemize">Consider automatic bracketing when applicable.</li><li class="li-itemize">Activate camera- or lens-based image stabilization if you are sure that it improves the
image quality in your particular case; otherwise disengage the feature.<p>For some lens-based image stabilization systems, it is known that they &#X201C;lock&#X201D; into
different positions every time they are activated. Moreover, some stabilization systems
decrease the image quality if the lens is mounted on a tripod.
</p></li></ul></li><li class="li-itemize">Fire in rapid succession.
</li></ul><!--TOC section id="sec:repetition" 8.2&#XA0;&#XA0;Repetition &#X2013; Noise Reduction-->
<h2 class="section" id="sec:repetition">8.2&#XA0;&#XA0;<a id="hevea_general549"></a><a id="hevea_general550"></a><a id="hevea_general551"></a>Repetition &#X2013; Noise Reduction</h2><!--SEC END --><p><span class="c017">Main Purpose:</span>&#XA0;Reduce noise</p><p>With the default settings, <span class="c008">Enfuse</span> computes a weighted average of the input pixels. For a series
of images, repeated with identical settings, this results in a reduction of (photon shot) noise.
In other words, the dynamic range increases slightly, because the higher signal-to-noise ratio
makes darker shades usable. Furthermore, smooth or glossy surfaces get a &#X201C;cleaner&#X201D; look, and
edges become visually sharper. The nitty-gritty reportage look that sometimes stems from a high
sensitivity setting disappears.</p><p>Averaged images, and therefore low-noise images, are the base for a multitude of techniques
like, for example, differences. The most prominent method in this class is dark-frame
subtraction.</p><p><span class="c008">Enfuse</span> sets defaults for the exposure-weight to &#X27E8;1.0&#X27E9;, for
saturation-weight to &#X27E8;0.2&#X27E9; and for all other weights to zero, a
good combination for noise reduction. Eliminating the saturation component with
<span class="c005">--saturation-weight=0.0</span> sometimes can be worth the extra run.</p><!--TOC section id="sec:exposure-series--dynamic-range-increase" 8.3&#XA0;&#XA0;Exposure Series &#X2013; Dynamic Range Increase-->
<h2 class="section" id="sec:exposure-series--dynamic-range-increase">8.3&#XA0;&#XA0;<a id="hevea_general552"></a><a id="hevea_general553"></a><a id="hevea_general554"></a>Exposure Series &#X2013; Dynamic Range Increase</h2><!--SEC END --><p><span class="c017">Main Purpose:</span>&#XA0;Increase manageable dynamic range</p><p>An exposure series is a set of images taken with identical parameters except for the exposure
time. Some cameras even provide special functions to automate recording exposure series. See
the instruction manual of your model for details. Also check out the features that Magic
Lantern offers to shoot <span class="c016">HDR</span>-series and to extend the dynamic range right in the
camera.</p><p><span class="c008">Enfuse</span>&#X2019;s defaults for exposure weight, &#X27E8;1.0&#X27E9; and saturation weight,
&#X27E8;0.2&#X27E9; are well suited for fusion of <em>color</em> images. Remember
that saturation weighting only works for <span class="c016">RGB</span> data.
Option&#XA0;<span class="c005">--saturation-weight</span> helps to control burnt-out highlights, as these are heavily
desaturated. Alternatively, use option&#XA0;<span class="c005">--exposure-cutoff</span> to suppress noise or
blown-out highlights without altering the overall brightness too much. If no image suffers from
troublesome highlights, the relative saturation weight can be reduced and even be set to zero.</p><p>For black and white images &#X2018;<span class="c005">--entropy-weight</span>&#X2019; can be an alternative to
&#X2018;<span class="c005">--saturation-weight</span>&#X2019; because it suppresses overexposed pixels, as these contain little
information. However, entropy weighting is not limited to gray-scale data; it has been
successfully applied to <span class="c016">RGB</span> images, too. Note that entropy weighting considers
<em>each</em> color channel of an <span class="c016">RGB</span> image separately and chooses the channel with the
minimum entropy as representative for the whole pixel.</p><p><span class="c008">Enfuse</span> offers the photographer tremendous flexibility in fusing differently exposed images.
Whether you combine only two pictures or a series of 21, <span class="c008">Enfuse</span> imposes no limits on you.
Accordingly, the photographic effects achieved range from subtle to surreal, like the late&#XA0;1980s
&#X201C;Max Headroom&#X201D; <span class="c016">TV</span>-Series, to really unreal. Like some time ago in the chemical days
of photography, when a new developer opened unseen possibilities for artists, exposure fusion
extends a photographer&#X2019;s expressive space in the digital age. Whether the results look good or
bad, whether the images are dull or exciting, is entirely up the artist.</p><p>In the next sections we give assistance to starters, and rectify several misconceptions about
<span class="c008">Enfuse</span>.</p><!--TOC subsection id="sec:tips-for-beginners" 8.3.1&#XA0;&#XA0;Tips For Beginners-->
<h3 class="subsection" id="sec:tips-for-beginners">8.3.1&#XA0;&#XA0;<a id="hevea_general555"></a>Tips For Beginners</h3><!--SEC END --><p>Here are some tips to get you in business quickly.</p><dl class="list"><dt class="dt-list">

Include the best single exposure.</dt><dd class="dd-list">Include the exposure you would have taken if you did not use <span class="c008">Enfuse</span> in your series. It gives
you a solid starting point. Think of the other images as augmenting this best single exposure
to bring out the light and dark features you would like to see.</dd><dt class="dt-list">Begin with as small a number of images as possible.</dt><dd class="dd-list">Pre-visualizing the results of <span class="c008">Enfuse</span> is difficult. The more images put into the fusion
process and the wider their <span class="c016">EV</span>-spacing is, the more challenging visualizing the
output image becomes. Therefore, start off with as few images as possible.<p>You can take a larger series of images and only use part of it.</p></dd><dt class="dt-list">Start with a moderate <span class="c016">EV</span>-spacing.</dt><dd class="dd-list">As has been pointed out in the previous item, a wide <span class="c016">EV</span>-spacing makes
pre-visualization harder. So start out with a spacing of 2/3&#XA0;EV to
4/3&#XA0;EV.</dd><dt class="dt-list">Use Magic Lantern&#X2019;s dual-<span class="c016">ISO</span> mode (and avoid <span class="c008">Enfuse</span>).</dt><dd class="dd-list">Magic Lantern can reprogram a camera to take a <em>single</em> short with <em>two different</em>
sensor speeds. They call it &#X201C;dual-<span class="c016">ISO</span>&#X201D; mode. The non-standard RAW&#XA0;image created
that way must be processed with <span class="c017">cr2hdr</span><sup><a id="text9" href="#note9">1</a></sup>, which produces a <span class="c016">DNG</span>&#XA0;file readable with the usual
RAW&#XA0;converters.
</dd></dl><!--TOC subsection id="sec:common-misconceptions" 8.3.2&#XA0;&#XA0;Common Misconceptions-->
<h3 class="subsection" id="sec:common-misconceptions">8.3.2&#XA0;&#XA0;<a id="hevea_general556"></a>Common Misconceptions</h3><!--SEC END --><p>Here are some surprisingly common misconceptions about exposure series.</p><dl class="list"><dt class="dt-list">

<a id="hevea_general557"></a><a id="hevea_general558"></a>A single image cannot be the source of an exposure series.</dt><dd class="dd-list">Raw-files in particular lend themselves to be converted multiple times and the results being
fused together. The technique is simpler, faster, and usually even looks better than
<a href="https://luminous-landscape.com/digital-blending/">digital blending</a> (as opposed to using a graduated
neutral density filter) or <a href="https://www.gimp.org/tutorials/Blending_Exposures/">blending exposures</a> in an
image manipulation program. Moreover, perfect alignment comes free of charge!</dd><dt class="dt-list">An exposure series must feature symmetrically-spaced exposures.</dt><dd class="dd-list">Twice wrong! Neither do the exposures have to be &#X201C;symmetric&#X201D; like {0&#XA0;EV,
&#X2212;2/3&#XA0;EV, +2/3&#XA0;EV}, nor does the number of exposures have to
be odd. Series like {&#X2212;4/3&#XA0;EV, &#X2212;1/3&#XA0;EV,
+1/3&#XA0;EV} or {&#X2212;1&#XA0;EV, 1&#XA0;EV} might be just right. By the way,
the order in which the images were taken does not matter either.<p><a id="hevea_general559"></a></p></dd><dt class="dt-list">An exposure series must cover the whole dynamic range of the scene.</dt><dd class="dd-list">If you do not want to cover the whole range, you do not have to. Some <span class="c016">HDR</span> programs
require the user to take a light probe, whereas <span class="c008">Enfuse</span> offers the user complete freedom of
exposure.<div class="geeknote"><blockquote class="quotation"><span class="c009">
</span><a href="http://www.pauldebevec.com/"><span class="c015">Paul E.&#XA0;Debevec</span></a><span class="c015"> defines: &#X201C;A light probe image is an omnidirectional,
high dynamic range image that records the incident illumination conditions at a particular
point in space.&#X201D;
</span></blockquote></div></dd><dt class="dt-list">All exposure values must be different.</dt><dd class="dd-list">You can repeat any exposure as often as you like. That way you combine an exposure series
with parts of Section&#XA0;<a href="#sec%3Arepetition">8.2</a>, emphasizing the multiply occurring exposures
and reducing noise.
</dd></dl><!--TOC section id="sec:flash-exposure-series--directedlighting" 8.4&#XA0;&#XA0;Flash Exposure Series &#X2013; Directed Lighting-->
<h2 class="section" id="sec:flash-exposure-series--directedlighting">8.4&#XA0;&#XA0;<a id="hevea_general560"></a><a id="hevea_general561"></a><a id="hevea_general562"></a>Flash Exposure Series &#X2013; Directed Lighting</h2><!--SEC END --><p><span class="c017">Main Purpose:</span>&#XA0;???</p><p><span class="c000">FIX</span>Text?<span class="c000">ME</span></p><!--TOC section id="sec:polarization-series--saturation-enhancement" 8.5&#XA0;&#XA0;Polarization Series &#X2013; Saturation Enhancement-->
<h2 class="section" id="sec:polarization-series--saturation-enhancement">8.5&#XA0;&#XA0;<a id="hevea_general563"></a><a id="hevea_general564"></a><a id="hevea_general565"></a>Polarization Series &#X2013; Saturation Enhancement</h2><!--SEC END --><p><span class="c017">Main Purpose:</span>&#XA0;Reflection suppression, saturation enhancement</p><p>In the current implementation of <span class="c008">Enfuse</span>, it is not possible in general to fuse a polarization
series. Na&#XEF;vely (ab)using &#X2018;<span class="c005">--saturation-weight</span>&#X2019; will not work.</p><!--TOC section id="sec:focus-stacks--depth-of-field-increase" 8.6&#XA0;&#XA0;Focus Stacks &#X2013; Depth-of-Field Increase-->
<h2 class="section" id="sec:focus-stacks--depth-of-field-increase">8.6&#XA0;&#XA0;<a id="hevea_general566"></a><a id="hevea_general567"></a>Focus Stacks &#X2013; Depth-of-Field Increase</h2><!--SEC END --><p><span class="c017">Main Purpose:</span>&#XA0;Synthetic Depth-of-Field Increase</p><p><a id="hevea_general568"></a><a id="hevea_general569"></a>A focus stack is a series of images where the distance of the focal plane from the sensor
varies. Sloppily speaking, the images were focused at different distances. Fusing such a stack
increases the depth-of-field (<span class="c016">DoF</span>) beyond the physical limits of diffraction.</p><!--TOC subsection id="sec:why-create-focus-stacks" 8.6.1&#XA0;&#XA0;Why create focus stacks?-->
<h3 class="subsection" id="sec:why-create-focus-stacks">8.6.1&#XA0;&#XA0;<a id="hevea_general570"></a>Why create focus stacks?</h3><!--SEC END --><p>Given</p><ul class="itemize"><li class="li-itemize">
a fixed sensor or film size,</li><li class="li-itemize">a lens&#X2019; particular focal length, and<p><a id="hevea_general571"></a><a id="hevea_general572"></a></p></li><li class="li-itemize">a notion about &#X201C;sharpness&#X201D;, technically speaking the size of the circle-of-confusion
(<span class="c016">CoC</span>)
</li></ul><p><a id="hevea_general573"></a>the photographer controls the depth-of-field with the aperture. Smaller apertures &#X2013;
this is larger aperture numbers &#X2013; increase the <span class="c016">DoF</span> and vice versa. However, smaller
apertures increase diffraction which in turn renders the image unsharp. So, there is an optimum
aperture where the photographer gets maximum <span class="c016">DoF</span>. Sadly, for some purposes like macro
shots it is not enough. One way out is to combine the sharp parts of images focused at
different distances, thereby artificially increasing the total <span class="c016">DoF</span>. This is exactly
what <span class="c008">Enfuse</span> can do.</p><p><a id="hevea_general574"></a><a id="hevea_general575"></a>All lenses have a so called &#X201C;sweet spot&#X201D; aperture, where their resolution is best. Taking
pictures at this aperture, the photographer squeezes the maximum quality out of the lens. But:
the &#X201C;sweet spot&#X201D; aperture often is only one or two stops away from wide open. Wouldn&#X2019;t it be
great to be able combine these best-possible images to form one high-quality,
sufficient-<span class="c016">DoF</span> image? Welcome to <span class="c008">Enfuse</span>&#X2019;s local-contrast selection abilities.</p><!--TOC subsection id="sec:preparing-focus-stacks" 8.6.2&#XA0;&#XA0;Preparing Focus Stacks-->
<h3 class="subsection" id="sec:preparing-focus-stacks">8.6.2&#XA0;&#XA0;<a id="hevea_general576"></a>Preparing Focus Stacks</h3><!--SEC END --><p>We are going to combine images with limited <span class="c016">DoF</span> to increase their in-focus parts. The
whole process is about image sharpness. Therefore, the input images must align very well, not
just well, but very well. For optimum results the maximum control point distance in
<span class="c008">Hugin</span> should not exceed 0.3&#X2013;0.5&#XA0;pixels to ensure perfect blending.</p><p><a id="hevea_general577"></a><a id="hevea_general578"></a>As in all image fusion operations it is preferable to use 16&#XA0;bit linear (i.e. gamma = 1) images
throughout, but 8&#XA0;bit gamma-encoded images will do. Naturally, high signal-to-noise
(<span class="c016">SNR</span>) ratio input data always is welcome.</p><!--TOC subsection id="sec:local-contrast-based-fusing" 8.6.3&#XA0;&#XA0;Local Contrast Based Fusing-->
<h3 class="subsection" id="sec:local-contrast-based-fusing">8.6.3&#XA0;&#XA0;<a id="hevea_general579"></a><a id="hevea_general580"></a><a id="hevea_general581"></a>Local Contrast Based Fusing</h3><!--SEC END --><p>A bare bones call to <span class="c008">Enfuse</span> for focus stacking could look like this.</p><div class="terminal"><div class="flushleft"><span class="c005">
$ enfuse \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--exposure-weight=0 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--saturation-weight=0 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--contrast-weight=1 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--hard-mask \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#X2026; \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--output=output.tif \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;input-&lt;0000-9999&gt;.tif
</span></div></div><p>Here is what each option causes:</p><dl class="list"><dt class="dt-list">

<span class="c005">--exposure-weight=0</span></dt><dd class="dd-list">Switch <span class="c017">off</span> exposure based pixel selection. The default weight is
&#X27E8;1.0&#X27E9;.</dd><dt class="dt-list"><span class="c005">--saturation-weight=0</span></dt><dd class="dd-list">Switch <span class="c017">off</span> saturation based pixel selection. The default weight is
&#X27E8;0.2&#X27E9;.</dd><dt class="dt-list"><span class="c005">--contrast-weight=1</span></dt><dd class="dd-list">Switch <span class="c017">on</span> pixel selection based on local contrast.</dd><dt class="dt-list"><span class="c005">--hard-mask</span></dt><dd class="dd-list">Select the best pixel from the image stack and ignore all others. Without this option, <span class="c008">Enfuse</span>
uses all pixels in the stack and weights them according to their respective quality, which in
our case is local contrast. Without &#X2018;<span class="c005">--hard-mask</span>&#X2019;, the result will always look a bit
soft. See also Section&#XA0;<a href="#sec%3Alocal-contrast-weighting">5.4</a>.
</dd></dl><p>If you want to see some entertaining progress messages &#X2013; local-contrast weighting takes a while
&#X2013;, also pass the <span class="c005">--verbose</span>&#XA0;option for an entertaining progress report.</p><!--TOC subsection id="sec:basic-focus-stacking" 8.6.4&#XA0;&#XA0;Basic Focus Stacking-->
<h3 class="subsection" id="sec:basic-focus-stacking">8.6.4&#XA0;&#XA0;<a id="hevea_general582"></a><a id="hevea_general583"></a>Basic Focus Stacking</h3><!--SEC END --><p>For a large class of image stacks <span class="c008">Enfuse</span>&#X2019;s default algorithm, as selected in
<a href="#sec%3Alocal-contrast-based-fusing">8.6.3</a>, to determine the sharpness produces nice results. The
algorithm uses a moving square window, the so-called contrast window. It computes the standard
deviation of the pixels inside of the window. The program then selects the window&#X2019;s center
pixel of the image in the stack where the standard deviation is largest, that is, the local
contrast reaches the maximum.</p><p>However, the algorithm fails to deliver good masks for images which exhibit high contrast edges
on the scale of the contrast window size. The typical artifacts that show up are</p><ul class="itemize"><li class="li-itemize">
faint dark seams on the light side of the high contrast edges and</li><li class="li-itemize">extremely soft, slightly lighter seams on the dark side of the high contrast edges,
</li></ul><p>where the distance of the seams from the middle of the edge is comparable to the
contrast window size.</p><p>If your results do not show any of these artifacts, stick with the basic algorithm. Advanced
focus stacking, as described in the next sections, delivers superior results in case of
artifacts, though requires manually tuning several parameters.</p><!--TOC subsection id="sec:advanced-focus-stacking" 8.6.5&#XA0;&#XA0;Advanced Focus Stacking-->
<h3 class="subsection" id="sec:advanced-focus-stacking">8.6.5&#XA0;&#XA0;<a id="hevea_general584"></a><a id="hevea_general585"></a>Advanced Focus Stacking</h3><!--SEC END --><p>If your fused image shows any of the defects described in the previous section, you can try a
more difficult-to-use algorithm that effectively works around the seam artifacts. It is
described in the next section.</p><!--TOC subsubsection id="sec:detailed-look-at-the-problem" Detailed Look at the Problem-->
<h4 class="subsubsection" id="sec:detailed-look-at-the-problem"><a id="hevea_general586"></a>Detailed Look at the Problem</h4><!--SEC END --><p>Let us use an example to illustrate the problem of relating the sharpness with the local
contrast variations. Say we use a 5 &#XD7; 5 contrast window. Moreover, let
<span class="c005">sharp_edge</span> and <span class="c005">smooth_edge</span> be two specific configurations:</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
sharp_edge&#XA0;=&#XA0;&#XA0;[&#XA0;&#XA0;&#XA0;&#XA0;0, &#XA0;&#XA0;0, 200, &#XA0;&#XA0;0, &#XA0;&#XA0;0; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;0, 225, &#XA0;&#XA0;0, &#XA0;&#XA0;0, &#XA0;&#XA0;0; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;0, 255, &#XA0;&#XA0;0, &#XA0;&#XA0;0, &#XA0;&#XA0;0; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;215, &#XA0;&#XA0;0, &#XA0;&#XA0;0, &#XA0;&#XA0;0, &#XA0;&#XA0;0; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;200, &#XA0;&#XA0;0, &#XA0;&#XA0;0, &#XA0;&#XA0;0, &#XA0;&#XA0;0]
</span></div></dd></dl></div><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
smooth_edge&#XA0;=&#XA0;[&#XA0;&#XA0;&#XA0;&#XA0;0, &#XA0;62, 125, 187, 250; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;1, &#XA0;63, 126, 188, 251; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;2, &#XA0;65, 127, 190, 252; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;3, &#XA0;66, 128, 191, 253; <br>
 &#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;&#XA0;5, &#XA0;67, 130, 192, 255]
</span></div></dd></dl></div><p>where &#X2018;<span class="c005">;</span>&#X2019; separates the rows and &#X2018;<span class="c005">,</span>&#X2019; separates the columns. This is in
fact <a href="http://www.gnu.org/software/octave/">Octave</a> syntax. Figure&#XA0;<a href="#fig%3Asharp-edge">8.1</a>
and&#XA0;<a href="#fig%3Asmooth-edge">8.2</a> show plots of the matrices <span class="c005">sharp_edge</span> and&#XA0;<span class="c005">smooth_edge</span>.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="sharp-edge.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 8.1: <a id="fig:sharp-edge"></a>3D-plot augmented by contour plot of the matrix&#XA0;<span class="c005">sharp_edge</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="smooth-edge.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 8.2: <a id="fig:smooth-edge"></a>3D-plot augmented by contour plot of the matrix&#XA0;<span class="c005">smooth_edge</span>.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>Our intuition lets us &#X201C;see&#X201D; an extremely sharp edge in the first matrix, whereas the second
one describes an extraordinarily smooth diagonal intensity ramp. Which one will be selected?
Well, <span class="c005">sharp_edge</span> has a standard deviation of 88.07 and <span class="c005">smooth_edge</span> has 88.41.
Thus, <span class="c005">smooth_edge</span> wins, contradicting our intuition, and even worse, our intention!
Sadly, configurations like <span class="c005">smooth_edge</span> occur more often with high-quality, good
<a href="https://luminous-landscape.com/bokeh/">bokeh</a> lenses. In fact, they are the very manifestation of
&#X201C;good bokeh&#X201D;. Therefore, Laplacian edge detection plays an important role when working with
high-quality lenses.</p><!--TOC subsubsection id="sec:laplacian-edge-detection" <span class="c016">Laplacian</span> Edge Detection-->
<h4 class="subsubsection" id="sec:laplacian-edge-detection"><a id="hevea_general587"></a><a id="hevea_general588"></a><span class="c016">Laplacian</span> Edge Detection</h4><!--SEC END --><p><span class="c008">Enfuse</span> provides a Laplacian-based algorithm that can help in situations where weighting based on
the standard deviation fails. It is activated with a positive value for <span class="c013">SCALE</span> in
<span class="c005">--contrast-edge-scale</span>=<span class="c013">SCALE</span>. The Laplacian will detect two-dimensional
<em>curvature</em> on the scale of <span class="c013">SCALE</span>. Here and in the following we simply speak of
&#X201C;curvature&#X201D; where we mean &#X201C;magnitude of curvature&#X201D;. That is, we shall not distinguish
between convex and concave edges. <span class="c008">Enfuse</span> always use the magnitude of curvature for weighting.</p><p>Typically, <span class="c013">SCALE</span> ranges between 0.1&#XA0;pixels and 0.5&#XA0;pixels, where 0.3&#XA0;pixels are a
reasonable starting point. To find the best value for <span class="c013">SCALE</span> though, usually some
experimentation will be necessary. Use &#X2018;<span class="c005">--save-masks</span>&#X2019; to get all soft-mask (default:
&#X27E8;<span class="c005">softmask-%n.tif</span>&#X27E9;) and hard-mask files (default:
&#X27E8;<span class="c005">hardmask-%n.tif</span>&#X27E9;). Check how different scales affect the
artifacts. Also see Chapter&#XA0;<a href="#sec%3Aunderstanding-masks">7</a>.</p><!--TOC subsubsection id="sec:local-contrast-enhancement" Local Contrast Enhancement-->
<h4 class="subsubsection" id="sec:local-contrast-enhancement"><a id="hevea_general589"></a><a id="hevea_general590"></a>Local Contrast Enhancement</h4><!--SEC END --><p>Sometimes <span class="c008">Enfuse</span> misses smoother edges with &#X2018;<span class="c005">--contrast-edge-scale</span>&#X2019; and a little local
contrast enhancement (<span class="c016">LCE</span>) helps. Set <span class="c005">--contrast-edge-scale</span>=<span class="c013">SCALE</span>:<span class="c013">LCE-SCALE</span>:<span class="c013">LCE-FACTOR</span>, where <span class="c013">LCE-SCALE</span> and <span class="c013">LCE-FACTOR</span> work like
the <a href="http://www.cambridgeincolour.com/tutorials/unsharp-mask.htm">unsharp mask</a> filters in various image manipulation
programs. Start with <span class="c013">LCE-SCALE</span> ten times the value of <span class="c013">SCALE</span> and a
<span class="c013">LCE-FACTOR</span> of 2&#X2013;5.</p><p><span class="c013">LCE-SCALE</span> can be specified as a percentage of <span class="c013">SCALE</span>. <span class="c013">LCE-FACTOR</span> also can be specified as a percentage. Examples:</p><div class="literal"><dl class="trivlist"><dt class="dt-trivlist">
</dt><dd class="dd-trivlist"><div class="flushleft"><span class="c005">
--contrast-edge-scale=0.3:3.0:3 <br>
--contrast-edge-scale=0.3:1000%:3.0 <br>
--contrast-edge-scale=0.3:3:300% <br>
--contrast-edge-scale=0.3:1000%:300%
</span></div></dd></dl></div><p>By default <span class="c016">LCE</span> is turned off.</p><!--TOC subsubsection id="sec:suppressing-noise-or-recognizing-faint-edges" Suppressing Noise or Recognizing Faint Edges-->
<h4 class="subsubsection" id="sec:suppressing-noise-or-recognizing-faint-edges"><a id="hevea_general591"></a><a id="hevea_general592"></a>Suppressing Noise or Recognizing Faint Edges</h4><!--SEC END --><p>The <span class="c016">Laplacian</span>-based algorithm is much better at resisting the seam problem than the
local-contrast algorithm, but it has two shortcomings:</p><ol class="enumerate" type=1><li class="li-enumerate">
The <span class="c016">Laplacian</span> is very susceptible to noise and</li><li class="li-enumerate">it fails to recognize faint edges.
</li></ol><p>The option&#XA0;<span class="c005">--contrast-min-curvature</span> option helps to mitigate both flaws.</p><p>The argument to <span class="c005">--contrast-min-curvature</span>=<span class="c013">CURVATURE</span> either is an absolute
lightness value, e.g. 0&#X2026;255 for 8&#XA0;bit data and 0&#X2026;65535 for 16&#XA0;bit data, or, when given
with a &#X2018;<span class="c005">%</span>&#X2019;-sign it is a relative lightness value ranging from 0% to&#XA0;100%.</p><p>To suppress unreal edges or counter excessive noise, use the <span class="c005">--contrast-min-curvature</span>&#XA0;option with a <em>negative</em> curvature measure&#XA0;<span class="c013">CURVATURE</span>. This forces
all curvatures less than &#X2212;<span class="c013">CURVATURE</span> to zero.</p><p>A <em>positive</em> curvature measure&#XA0;<span class="c013">CURVATURE</span> makes <span class="c008">Enfuse</span> merge the <span class="c016">LoG</span>
data with the local-contrast data. Every curvature larger than or equal to <span class="c013">CURVATURE</span>
is left unchanged, and every curvature less than <span class="c013">CURVATURE</span> gets replaced with the
rescaled local-contrast data, such that the largest local contrast is just below
<span class="c013">CURVATURE</span>. This combines the best parts of both techniques and ensures a precise edge
detection over the whole range of edge curvatures.</p><p><span class="c017">Summary</span></p><dl class="list"><dt class="dt-list">

<span class="c005">--contrast-edge-scale=0.3</span></dt><dd class="dd-list">Use <span class="c016">LoG</span> to detect edges on a scale of 0.3&#XA0;pixels. Apply the default grayscale
projector: <span class="c005">average</span>.</dd><dt class="dt-list"><span class="c005">--contrast-edge-scale=0.3 --gray-projector=l-star</span></dt><dd class="dd-list">Use <span class="c016">LoG</span> to detect edges on a scale of 0.3&#XA0;pixels. Apply the L*-grayscale projector.</dd><dt class="dt-list"><span class="c005">--contrast-edge-scale=0.3:3:300%</span></dt><dd class="dd-list">Use <span class="c016">LoG</span> to detect edges on a scale of 0.3&#XA0;pixels, pre-sharpen the input images by
300% on a scale of 3&#XA0;pixels. Apply the default grayscale projector: <span class="c005">average</span>.</dd><dt class="dt-list"><span class="c005">--contrast-edge-scale=0.3
--contrast-min-curvature=-0.5%</span></dt><dd class="dd-list">Use <span class="c016">LoG</span> to detect edges on a scale of 0.3&#XA0;pixels. Apply the default grayscale
projector: <span class="c005">average</span> and throw away all edges with a curvature of less than 0.5%.</dd><dt class="dt-list"><span class="c005">--contrast-edge-scale=0.3
--contrast-min-curvature=0.5%
--contrast-window-size=7</span></dt><dd class="dd-list">Use <span class="c016">LoG</span> to detect edges on a scale of 0.3&#XA0;pixels. Apply the default grayscale
projector: <span class="c005">average</span> and throw away all edges with a curvature of less than 0.5% and
replace the <span class="c016">LoG</span> data between 0% and 0.5% with <span class="c016">SDev</span> data. Use a window
of 7 &#XD7; 7&#XA0;pixel window to compute the <span class="c016">SDev</span>.
</dd></dl><!--TOC subsubsection id="sec:focus-stacking-decision-tree" Focus Stacking Decision Tree-->
<h4 class="subsubsection" id="sec:focus-stacking-decision-tree"><a id="hevea_general593"></a><a id="hevea_general594"></a>Focus Stacking Decision Tree</h4><!--SEC END --><p>Figure&#XA0;<a href="#fig%3Afocus-stacking-decision-tree">8.3</a> helps the user to arrive at a well-fused
focus stack with as few steps as possible.</p><blockquote class="figure"><div class="center"><hr class="c029"></div>
<div class="minipage"><br>
<div class="maxipage"><div class="center">
<img src="focus-stack-decision-tree.png">
<p><br>
</p></div></div></div><div class="caption"><table class="c002 cellpading0"><tr><td class="c027">Figure 8.3: <a id="fig:focus-stacking-decision-tree"></a>Focus stacking decision tree.</td></tr>
</table></div><div class="center"><hr class="c029"></div></blockquote><p>Always start with the default, contrast weighting with a local contrast window. Only if seams
appear as described in Section&#XA0;<a href="#sec%3Aadvanced-focus-stacking">8.6.5</a> switch to
<span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span> contrast detection.</p><p>If some seams remain even in <span class="c016">LoG</span>-mode, decrease the sensitivity of the edge detection
with a positive <span class="c005">--contrast-min-curvature</span>. A too high value of
<span class="c005">--contrast-min-curvature</span> suppresses fine detail though. Part of the detail can
be brought back with pre-sharpening, that is, <a href="#sec%3Alocal-contrast-enhancement">8.6.5</a> or combining
<span class="c016">LoG</span> with local-contrast-window mode by using a negative <span class="c005">--contrast-min-curvature</span>.</p><p>Carefully examining the masks (option&#XA0;<span class="c005">--save-masks</span>) that <span class="c008">Enfuse</span> uses helps to judge the
effects of the parameters.</p><!--TOC subsection id="sec:tips-for-focus-stacking-experts" 8.6.6&#XA0;&#XA0;Tips For Focus Stacking Experts-->
<h3 class="subsection" id="sec:tips-for-focus-stacking-experts">8.6.6&#XA0;&#XA0;<a id="hevea_general595"></a><a id="hevea_general596"></a>Tips For Focus Stacking Experts</h3><!--SEC END --><p>We have collected some advice with which even focus-stacking adepts can benefit.</p><ul class="itemize"><li class="li-itemize">
<a id="hevea_general597"></a>Ensure that the sensor is clean.<p>Aligning focus stacks requires varying the viewing angle, which corresponds to a changing
focal length. Hence, the same pixel on the sensor gets mapped onto different positions in the
final image. Dirt spots will occur not only once but as many times as there are images in the
stack &#X2013; something that is no fun to correct in post-processing.</p><p><a id="hevea_general598"></a><a id="hevea_general599"></a><a id="hevea_general600"></a><a id="hevea_general601"></a>Along the same lines, the photographer may want to consider to prepare dark frames before, and
possibly also after, the shoot of the focus stack, to subtract hot pixels before fusion.</p></li><li class="li-itemize">Prefer a low-sensitivity setting (&#X201C;<span class="c016">ISO</span>&#X201D;) on the camera to get low-noise images.<p>Fusing with option&#XA0;<span class="c005">--hard-mask</span><a id="hevea_option67"></a> does not average, and thus does
not suppress any noise in the input images.</p></li><li class="li-itemize">If the transition of in-focus to out-of-focus areas is too abrupt, record the images with
closest and farthest focusing distances twice: first with the intended working aperture, and a
second time with a small aperture (large aperture number).<p><a id="hevea_general602"></a><a id="hevea_general603"></a>The small aperture will give the fused image a more natural in-focus to out-of-focus
transition and the working-aperture shots supply the detail in the in-focus regions.</p></li><li class="li-itemize">Consider the use of Magic Lantern (Appendix&#XA0;<a href="#app%3Amagiclantern">A.7</a>) to automate the
creation of focus stacks.
</li></ul><p>
<br>
</p><div class="flushright">
<span class="c011">You have your answer,<a id="hevea_general604"></a> Daniel Jackson. I suggest you act on it.</span> &#X2013;
<a id="hevea_general605"></a><a id="hevea_general606"></a><span class="c016">Morgan le Fay (Ganos Lal)</span></div><p><br>

</p><!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note9" href="#text9">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><span class="c017">cr2hdr</span> is part of Magic
Lantern&#X2019;s source distribution.</div>
</dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec:helpful-programs" Appendix&#XA0;A&#XA0;&#XA0;Helpful Programs<sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:helpful-programs">Appendix&#XA0;A&#XA0;&#XA0;<a id="hevea_general607"></a>Helpful Programs And Libraries<sup><span class="c008">c</span></sup></h1><!--SEC END --><p>Several programs and libraries have proven helpful when working with <span class="c008">Enfuse</span> or <span class="c008">Enblend</span>.</p><!--TOC section id="sec:raw-image-conversion" A.1&#XA0;&#XA0;Raw Image Conversion-->
<h2 class="section" id="sec:raw-image-conversion">A.1&#XA0;&#XA0;<a id="hevea_general608"></a>Raw Image Conversion</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="app:darktable"></a><a id="hevea_program24"></a><a href="http://www.darktable.org/"><span class="c008">Darktable</span></a> is an open-source photography workflow
application and raw-image developer.<p><a id="prg:dcraw"></a><a id="hevea_program25"></a></p></li><li class="li-itemize"><a href="http://www.cybercom.net/~dcoffin/dcraw/"><span class="c008">DCRaw</span></a> is a universal raw-converter written by
<span class="c016">David Coffin</span>.<p><a id="app:rawtherapee"></a><a id="hevea_program26"></a></p></li><li class="li-itemize"><a href="http://www.rawtherapee.com/"><span class="c008">RawTherapee</span></a> is powerful open-source raw converter for
Win*, <span class="c016">MacOS</span> and Linux.<p><a id="app:ufraw"></a><a id="hevea_program27"></a><a id="hevea_program28"></a><a id="hevea_program29"></a></p></li><li class="li-itemize"><a href="http://ufraw.sourceforge.net/"><span class="c008">UFRaw</span></a> is a raw-converter written by <span class="c016">Udi
Fuchs</span> and based on <span class="c008">DCRaw</span> (see above). It adds a <span class="c016">GUI</span>
(<span class="c017">ufraw</span>), versatile batch processing (<span class="c017">ufraw-batch</span>), and some additional
features such as cropping, noise reduction with wavelets, and automatic lens-error correction.
</li></ul><!--TOC section id="sec:image-alignment-and-rendering" A.2&#XA0;&#XA0;Image Alignment and Rendering-->
<h2 class="section" id="sec:image-alignment-and-rendering">A.2&#XA0;&#XA0;<a id="hevea_general609"></a><a id="hevea_general610"></a>Image Alignment and Rendering</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="app:hugin"></a><a id="hevea_program30"></a><a id="hevea_program31"></a><a id="hevea_program32"></a><a href="http://hugin.sourceforge.net/"><span class="c008">Hugin</span></a> is a <span class="c016">GUI</span> that aligns and stitches
images.<p>It comes with several command-line tools, like for example <span class="c017">nona</span> to stitch panorama
images, <span class="c017">align_image_stack</span><a id="hevea_program33"></a> to align
overlapping images for <span class="c016">HDR</span> or create focus stacks, and <span class="c017">fulla</span> to correct
lens errors.</p><p><a id="app:panotools"></a><a id="hevea_program34"></a><a id="hevea_program35"></a><a id="hevea_program36"></a></p></li><li class="li-itemize"><a href="http://panotools.sourceforge.net/">PanoTools</a> the successor of <span class="c016">Helmut Dersch&#X2019;s</span>
<a href="http://webuser.fh-furtwangen.de/~dersch/">original PanoTools</a> offers a set of command-line driven
applications to create panoramas. Most notable are <span class="c008">PTOptimizer</span> for control
point optimization and <span class="c008">PTmender</span>, an image stitcher.
</li></ul><!--TOC section id="sec:image-manipulation" A.3&#XA0;&#XA0;Image Manipulation-->
<h2 class="section" id="sec:image-manipulation">A.3&#XA0;&#XA0;<a id="hevea_general611"></a>Image Manipulation</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="app:cinepaint"></a><a id="hevea_program37"></a><a href="http://www.cinepaint.org/"><span class="c008">CinePaint</span></a> is a branch of an early <span class="c008">Gimp</span>
forked off at version&#XA0;1.0.4. It sports much less features than the current
<span class="c008">Gimp</span>, but offers 8&#XA0;bit, 16&#XA0;bit and&#XA0;32&#XA0;bit color channels, <span class="c016">HDR</span> (for
example floating-point <span class="c016">TIFF</span>, and <span class="c016">OpenEXR</span>), and a tightly integrated color
management system.<p><a id="app:gimp"></a><a id="hevea_program38"></a></p></li><li class="li-itemize"><a href="http://www.gimp.org/"><span class="c008">The Gimp</span></a> is a general purpose image manipulation program. At
the time of this writing it is still limited to images with only 8&#XA0;bits per channel.<p><a id="app:gmic"></a><a id="hevea_program39"></a></p></li><li class="li-itemize"><a href="http://gmic.sourceforge.net/"><span class="c008">G&#X2019;Mic</span></a> is an open and full-featured framework for
image processing, providing several different user interfaces to convert, manipulate, filter,
and visualize generic image datasets.<p><a id="app:imagemagick"></a><a id="app:graphicsmagick"></a><a id="hevea_program40"></a><a id="hevea_program41"></a><a id="hevea_program42"></a><a id="hevea_program43"></a><a id="hevea_program44"></a><a id="hevea_program45"></a><a id="hevea_program46"></a></p></li><li class="li-itemize">Both <a href="https://www.imagemagick.org/script/index.php"><span class="c008">ImageMagick</span></a> and
<a href="http://www.graphicsmagick.org/"><span class="c008">GraphicsMagick</span></a> are general-purpose command-line controlled image-manipulation programs, for example, <span class="c017">convert</span>,
<span class="c017">display</span>, <span class="c017">identify</span>, and <span class="c017">montage</span>. <span class="c008">GraphicsMagick</span>
bundles most <span class="c008">ImageMagick</span> invocations in the single dispatcher call to
<span class="c017">gm</span>.
</li></ul><!--TOC section id="sec:high-dynamic-range" A.4&#XA0;&#XA0;High Dynamic Range-->
<h2 class="section" id="sec:high-dynamic-range">A.4&#XA0;&#XA0;<a id="hevea_general612"></a><a id="hevea_general613"></a>High Dynamic Range</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="lib:openexr"></a><a id="hevea_general614"></a><a id="hevea_general615"></a><a id="hevea_general616"></a><a id="hevea_program47"></a><a href="http://www.openexr.com/">OpenEXR</a> offers libraries and some programs to work with the <span class="c016">EXR</span>
<span class="c016">HDR</span>-format, for example the <span class="c016">EXR</span> display utility <span class="c017">exrdisplay</span>.<p><a id="app:psftools"></a><a id="hevea_program48"></a></p></li><li class="li-itemize"><a href="http://pfstools.sourceforge.net/">PFSTools</a> read, write, modify, and tonemap high-dynamic range
(<span class="c016">HDR</span>) images.
</li></ul><!--TOC section id="sec:helpful-libraries" A.5&#XA0;&#XA0;Libraries-->
<h2 class="section" id="sec:helpful-libraries">A.5&#XA0;&#XA0;<a id="hevea_general617"></a><a id="hevea_general618"></a>Major Libraries</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="lib:jpeg"></a><a id="hevea_general619"></a><a id="hevea_general620"></a><a id="hevea_general621"></a><a href="http://www.ijg.org/">LibJPEG</a> is a library for handling the <span class="c016">JPEG</span> (<span class="c016">JFIF</span>) image
format.<p><a id="lib:png"></a><a id="hevea_general622"></a><a id="hevea_general623"></a></p></li><li class="li-itemize"><a href="http://www.libpng.org/pub/png/libpng.html">LibPNG</a> is a library that handles the Portable Network Graphics
(<span class="c016">PNG</span>) image format.<p><a id="lib:tiff"></a><a id="hevea_general624"></a><a id="hevea_general625"></a><a id="hevea_program49"></a></p></li><li class="li-itemize"><a href="http://www.remotesensing.org/libtiff/">LibTIFF</a> offers a library and utility programs to manipulate
the ubiquitous Tagged Image File Format, <span class="c016">TIFF</span>.<p>The nifty <span class="c017">tiffinfo</span> command in the LibTIFF distribution quickly inquires the most
important properties of <span class="c016">TIFF</span> files.
</p></li></ul><!--TOC section id="sec:meta-data-handling" A.6&#XA0;&#XA0;Meta-Data Handling-->
<h2 class="section" id="sec:meta-data-handling">A.6&#XA0;&#XA0;<a id="hevea_general626"></a>Meta-Data Handling</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="app:exiftool"></a><a id="hevea_program50"></a><a id="hevea_general627"></a><a href="http://www.sno.phy.queensu.ca/~phil/exiftool/">EXIFTool</a> reads and writes <span class="c016">EXIF</span> meta-data. In
particular it copies meta-data from one image to another.<p><a id="app:littlecms"></a><a id="hevea_program51"></a><a id="hevea_program52"></a><a id="hevea_general628"></a></p></li><li class="li-itemize"><a href="http://www.littlecms.com/">LittleCMS</a> is the color-management library used by <span class="c008">Hugin</span>,
<span class="c008">DCRaw</span>, <span class="c008">UFRaw</span>, <span class="c008">Enfuse</span>, and <span class="c008">Enblend</span>. It supplies some binaries,
too. <span class="c017">tificc</span>, an <span class="c016">ICC</span> color profile applier, is of particular interest.
</li></ul><!--TOC section id="sec:camera-firmware-extension" A.7&#XA0;&#XA0;Camera Firmware Extension-->
<h2 class="section" id="sec:camera-firmware-extension">A.7&#XA0;&#XA0;<a id="hevea_general629"></a>Camera Firmware Extension</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a id="app:magiclantern"></a><a id="hevea_program53"></a><a href="http://www.magiclantern.fm/index.html">Magic Lantern</a> is a software add-on that runs from the
<span class="c016">SD</span>&#XA0;(Secure Digital) or <span class="c016">CF</span>&#XA0;(Compact Flash) card and adds new features to
cameras of a certain Japanese brand of cameras as for example<ul class="itemize"><li class="li-itemize">
<a id="hevea_general630"></a>Dual-<span class="c016">ISO</span> (more precisely: simultaneous dual sensor speed); this operation mode may
in fact obviate the need for <span class="c008">Enfuse</span>.</li><li class="li-itemize">Focus stacking<p><a id="hevea_general631"></a><a id="hevea_general632"></a></p></li><li class="li-itemize"><span class="c016">HDR</span>-bracketing
</li></ul></li></ul><!--TOC chapter id="sec:bug-reports" Appendix&#XA0;B&#XA0;&#XA0;Bug Reports<sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:bug-reports">Appendix&#XA0;B&#XA0;&#XA0;<a id="hevea_general633"></a><a id="hevea_general634"></a>Bug Reports<sup><span class="c008">c</span></sup></h1><!--SEC END --><div class="geeknote"><blockquote class="quotation"><span class="c015">
Most of this appendix was taken from the </span><a href="http://www.gnu.org/software/octave/"><span class="c015">Octave</span></a><span class="c015"> documentation.
</span></blockquote></div><p>Bug reports play an important role in making <span class="c008">Enfuse</span> and&#XA0;<span class="c008">Enblend</span> reliable and enjoyable.</p><p><a id="hevea_general635"></a><a id="hevea_general636"></a>When you encounter a problem, the first thing to do is to see if it is already known. To this
end, visit the package&#X2019;s <a href="https://launchpad.net/">LaunchPad</a> bug
&#X27E8;<a href="https://bugs.launchpad.net/enblend">database</a>&#X27E9;. Search it for your particular problem. If it is not
known, please report it.</p><p>In order for a bug report to serve its purpose, you must include the information that makes it
possible to fix the bug.</p><!--TOC section id="sec:have-you-really-found-a-bug" B.1&#XA0;&#XA0;Found a Bug?-->
<h2 class="section" id="sec:have-you-really-found-a-bug">B.1&#XA0;&#XA0;<a id="hevea_general637"></a>Have You Really Found a Bug?</h2><!--SEC END --><p>If you are not sure whether you have found a bug, here are some guidelines:</p><ul class="itemize"><li class="li-itemize">
If <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> get a fatal signal, for any options or input images, that is a bug.</li><li class="li-itemize">If <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> produce incorrect results, for any input whatever, that is a bug.</li><li class="li-itemize">If <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> produce an error message for valid input, that is a bug.</li><li class="li-itemize">If <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> do not produce an error message for invalid input, that is a bug.
</li></ul><!--TOC section id="sec:how-to-report-bugs" B.2&#XA0;&#XA0;How to Report Bugs-->
<h2 class="section" id="sec:how-to-report-bugs">B.2&#XA0;&#XA0;<a id="hevea_general638"></a>How to Report Bugs</h2><!--SEC END --><p>The fundamental principle of reporting bugs usefully is this: report all the facts. If you are
not sure whether to state a fact or leave it out, state it. Often people omit facts because
they think they know what causes the problem and they conclude that some details do not matter.
Play it safe and give a specific, complete example.</p><p>Keep in mind that the purpose of a bug report is to enable someone to fix the bug if it is not
known. Always write your bug reports on the assumption that the bug is not known.</p><p>Try to make your bug report self-contained. If we have to ask you for more information, it is
best if you include all the previous information in your response, as well as the information
that was missing.</p><p>To enable someone to investigate the bug, you should include all these things:</p><ul class="itemize"><li class="li-itemize">
The exact version and configuration of <span class="c008">Enfuse</span>. You can get the data by running enfuse with the
options <span class="c005">--version</span> and&#XA0;<span class="c005">--verbose</span> together. See also
Section&#XA0;<a href="#sec%3Afinding-out-details">3.3.1</a> on how to find out the exact configuration of
your binary.</li><li class="li-itemize">A complete set of input images that will reproduce the bug. Strive for a minimal set of
<em>small</em> images, where images up to 1500&#XD7;1000&#XA0;pixels qualify as small.</li><li class="li-itemize">The type of machine you are using, and the operating system name and its version number.</li><li class="li-itemize">A complete list of any modifications you have made to the source. Be precise about these
changes. Show a delta generated with <span class="c017">diff</span> for them.</li><li class="li-itemize">Details of any other deviations from the standard procedure for installing <span class="c008">Enfuse</span> and
<span class="c008">Enblend</span>.</li><li class="li-itemize">The <em>exact command line</em> you use to call <span class="c008">Enfuse</span> or <span class="c008">Enblend</span>, which then triggers the
bug.<p>Examples:</p><div class="terminal"><div class="flushleft"><span class="c005">
$ ~/local/bin/enblend -v \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--fine-mask \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--optimizer-weights=3:2 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--mask-vectorize=12.5% \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;image-1.png image-2.png
</span></div></div><p>or:</p><div class="terminal"><div class="flushleft"><span class="c005">
$ /local/bin/enfuse \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--verbose \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--exposure-weight=0 --saturation-weight=0 --entropy-weight=1 \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--gray-projector=l-star \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;--entropy-cutoff=1.667% \<br>
 &#XA0;&#XA0;&#XA0;&#XA0;layer-01.ppm layer-02.ppm layer-03.ppm
</span></div></div><p><a id="hevea_program54"></a><a id="hevea_program55"></a>If you call <span class="c008">Enfuse</span> or <span class="c008">Enblend</span> from within a <span class="c016">GUI</span> like, for example,
<a href="http://hugin.sourceforge.net/">Hugin</a> or <a href="http://imagefuser.sourceforge.net/onlinemanual/">ImageFuser</a> by <span class="c016">Harry van
der Wolf</span>, copy&amp;paste or write down the command line that launches <span class="c008">Enfuse</span> or <span class="c008">Enblend</span>.</p></li><li class="li-itemize">A description of what behavior you observe that you believe is incorrect. For example, &#X201C;The
application gets a fatal signal,&#X201D; or, &#X201C;The output image contains black holes.&#X201D;<p>Of course, if the bug is that the application gets a fatal signal, then one cannot miss it.
But if the bug is incorrect output, we might not notice unless it is glaringly wrong.
</p></li></ul><!--TOC section id="sec:sending-patches" B.3&#XA0;&#XA0;Sending Patches-->
<h2 class="section" id="sec:sending-patches">B.3&#XA0;&#XA0;<a id="hevea_general639"></a>Sending Patches for <span class="c008">Enfuse</span> or <span class="c008">Enblend</span></h2><!--SEC END --><p>If you would like to write bug fixes or improvements for <span class="c008">Enfuse</span> or <span class="c008">Enblend</span>, that is very
helpful. When you send your changes, please follow these guidelines to avoid causing extra work
for us in studying the patches. If you do not follow these guidelines, your information might
still be useful, but using it will take extra work.</p><ul class="itemize"><li class="li-itemize">
Send an explanation with your changes of what problem they fix or what improvement they bring
about. For a bug fix, just include a copy of the bug report, and explain why the change fixes
the bug.</li><li class="li-itemize">Always include a proper bug report for the problem you think you have fixed. We need to
convince ourselves that the change is right before installing it. Even if it is right, we
might have trouble judging it if we do not have a way to reproduce the problem.</li><li class="li-itemize">Include all the comments that are appropriate to help people reading the source in the future
understand why this change was needed.</li><li class="li-itemize">Do not mix together changes made for different reasons. Send them individually.<p>If you make two changes for separate reasons, then we might not want to install them both. We
might want to install just one.</p></li><li class="li-itemize">Use the version control system to make your diffs. Prefer the
<a href="https://en.wikipedia.org/wiki/Diff#Unified_format">unified diff</a> format: <span class="c005">hg diff --unified 4</span>.</li><li class="li-itemize">You can increase the probability that your patch gets applied by basing it on a recent
revision of the sources.
</li></ul><!--TOC chapter id="sec:authors" Appendix&#XA0;C&#XA0;&#XA0;Authors<sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:authors">Appendix&#XA0;C&#XA0;&#XA0;<a id="hevea_general640"></a>Authors<sup><span class="c008">c</span></sup></h1><!--SEC END --><p><span class="c016">Andrew Mihal</span> (<a href="mailto:acmihal@users.sourceforge.net">acmihal@users.sourceforge.net</a>) has written
<span class="c008">Enblend</span> and <span class="c008">Enfuse</span>.</p><p><br>
<br>
<span class="c017">Contributors</span> (in alphabetical order)</p><ul class="itemize"><li class="li-itemize">
<span class="c016">Pablo d&#X2019;Angelo</span> (<a href="mailto:dangelo@users.sourceforge.net">dangelo@users.sourceforge.net</a>) added the contrast
criteria.</li><li class="li-itemize"><span class="c016">Joe Beda</span>: <span class="c016">Win32</span> porting up to version&#XA0;3.2.</li><li class="li-itemize"><span class="c016">Kornel Benko</span>, <a href="mailto:kornelbenko@users.sourceforge.net">kornelbenko@users.sourceforge.net</a>: <span class="c008">CMake</span>
support for version&#XA0;4.0.</li><li class="li-itemize"><span class="c016">Roger Goodman</span>: Proofreading of the manuals.</li><li class="li-itemize"><span class="c016">Miko&#X142;aj Leszczy&#X144;ski</span>, <a href="mailto:rosomack@users.sourceforge.net">rosomack@users.sourceforge.net</a>: GraphCut
algorithm in <span class="c008">Enblend</span>.</li><li class="li-itemize"><span class="c016">Max Lyons</span>.</li><li class="li-itemize"><span class="c016">Mark</span> aka &#X2018;mjz&#X2019;: <span class="c016">Win32</span> porting up to version&#XA0;3.2.</li><li class="li-itemize"><span class="c016">Thomas Modes</span>, <a href="mailto:tmodes@users.sourceforge.net">tmodes@users.sourceforge.net</a>: continuous
<span class="c016">Win32</span> porting and permanent <span class="c008">CMake</span> support.</li><li class="li-itemize"><span class="c016">Ryan Sleevi</span>, <a href="mailto:ryansleevi@users.sourceforge.net">ryansleevi@users.sourceforge.net</a>: <span class="c016">Win32</span>
porting of version&#XA0;4.0.</li><li class="li-itemize"><span class="c016">Christoph Spiel</span> (<a href="mailto:cspiel@users.sourceforge.net">cspiel@users.sourceforge.net</a>) added the gray
projectors, the <span class="c016">LoG</span>-based edge detection, an <span class="c011">O</span>(<span class="c011">n</span>)-algorithm for the calculation of
local contrast, entropy weighting, and various other features.</li><li class="li-itemize"><span class="c016">Brent Townshend</span>, <a href="mailto:btownshend@users.sourceforge.net">btownshend@users.sourceforge.net</a>: <span class="c016">HDR</span>
support.
</li></ul><p>Thanks to <span class="c016">Simon Andriot</span> and <span class="c016">Pablo Joubert</span> for suggesting the
<span class="c016">Mertens</span>-<span class="c016">Kautz</span>-<span class="c016">Van Reeth</span> technique and the name
&#X201C;Enfuse&#X201D;.</p><!--TOC chapter id="sec:fdl" Appendix&#XA0;D&#XA0;&#XA0;<span class="c016">GNU</span> <span class="c016">FDL</span><sup><span class="c008">c</span></sup>-->
<h1 class="chapter" id="sec:fdl">Appendix&#XA0;D&#XA0;&#XA0;<a id="hevea_general641"></a><a id="hevea_general642"></a><a id="hevea_general643"></a>The <span class="c016">GNU</span> Free Documentation License<sup><span class="c008">c</span></sup></h1><!--SEC END --><p>Version 1.2, November 2002</p><blockquote class="quotation">
Copyright &#XA9; 2000, 2001, 2002 Free Software Foundation, Inc. <br>
51
Franklin St, Fifth Floor, Boston, MA 02110&#X2013;1301, USA<p>Everyone is permitted to copy and distribute verbatim copies of this license document, but
changing it is not allowed.
</p></blockquote><ol class="enumerate" type=1><li class="li-enumerate">
PREAMBLE <br>
 The purpose of this License is to make a manual, textbook, or other functional and useful
document free in the sense of freedom: to assure everyone the effective freedom to copy and
redistribute it, with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way to get credit for their
work, while not being considered responsible for modifications made by others.<p>This License is a kind of &#X201C;copyleft&#X201D;, which means that derivative works of the document must
themselves be free in the same sense. It complements the <span class="c016">GNU</span> General Public
License, which is a copyleft license designed for free software.</p><p>We have designed this License in order to use it for manuals for free software, because free
software needs free documentation: a free program should come with manuals providing the same
freedoms that the software does. But this License is not limited to software manuals; it can
be used for any textual work, regardless of subject matter or whether it is published as a
printed book. We recommend this License principally for works whose purpose is instruction or
reference.</p></li><li class="li-enumerate">APPLICABILITY AND DEFINITIONS <br>
 This License applies to any manual or other work, in any medium, that contains a notice placed
by the copyright holder saying it can be distributed under the terms of this License. Such a
notice grants a world-wide, royalty-free license, unlimited in duration, to use that work
under the conditions stated herein. The &#X201C;Document&#X201D;, below, refers to any such manual or
work. Any member of the public is a licensee, and is addressed as &#X201C;you&#X201D;. You accept the
license if you copy, modify or distribute the work in a way requiring permission under
copyright law.<p>A &#X201C;Modified Version&#X201D; of the Document means any work containing the Document or a portion of
it, either copied verbatim, or with modifications and/or translated into another language.</p><p>A &#X201C;Secondary Section&#X201D; is a named appendix or a front-matter section of the Document that
deals exclusively with the relationship of the publishers or authors of the Document to the
Document&#X2019;s overall subject (or to related matters) and contains nothing that could fall
directly within that overall subject. (Thus, if the Document is in part a textbook of
mathematics, a Secondary Section may not explain any mathematics.) The relationship could be
a matter of historical connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding them.</p><p>The &#X201C;Invariant Sections&#X201D; are certain Secondary Sections whose titles are designated, as
being those of Invariant Sections, in the notice that says that the Document is released under
this License. If a section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant. The Document may contain zero Invariant Sections. If
the Document does not identify any Invariant Sections then there are none.</p><p>The &#X201C;Cover Texts&#X201D; are certain short passages of text that are listed, as Front-Cover Texts
or Back-Cover Texts, in the notice that says that the Document is released under this License.
A Front-Cover Text may be at most 5&#XA0;words, and a Back-Cover Text may be at most 25&#XA0;words.</p><p>A &#X201C;Transparent&#X201D; copy of the Document means a machine-readable copy, represented in a format
whose specification is available to the general public, that is suitable for revising the
document straightforwardly with generic text editors or (for images composed of pixels)
generic paint programs or (for drawings) some widely available drawing editor, and that is
suitable for input to text formatters or for automatic translation to a variety of formats
suitable for input to text formatters. A copy made in an otherwise Transparent file format
whose markup, or absence of markup, has been arranged to thwart or discourage subsequent
modification by readers is not Transparent. An image format is not Transparent if used for
any substantial amount of text. A copy that is not &#X201C;Transparent&#X201D; is called &#X201C;Opaque&#X201D;.</p><p>Examples of suitable formats for Transparent copies include plain <span class="c016">ascii</span> without
markup, Texinfo input format, L<sup>A</sup>T<sub>E</sub>X input format, <span class="c016">SGML</span> or <span class="c016">XML</span> using a
publicly available <span class="c016">DTD</span>, and standard-conforming simple <span class="c016">HTML</span>, PostScript or
<span class="c016">PDF</span> designed for human modification. Examples of transparent image formats include
<span class="c016">PNG</span>, <span class="c016">XCF</span> and <span class="c016">JPG</span>. Opaque formats include proprietary formats
that can be read and edited only by proprietary word processors, <span class="c016">SGML</span> or
<span class="c016">XML</span> for which the <span class="c016">DTD</span> and/or processing tools are not generally available,
and the machine-generated <span class="c016">HTML</span>, PostScript or <span class="c016">PDF</span> produced by some word
processors for output purposes only.</p><p>The &#X201C;Title Page&#X201D; means, for a printed book, the title page itself, plus such following pages
as are needed to hold, legibly, the material this License requires to appear in the title
page. For works in formats which do not have any title page as such, &#X201C;Title Page&#X201D; means the
text near the most prominent appearance of the work&#X2019;s title, preceding the beginning of the
body of the text.</p><p>A section &#X201C;Entitled XYZ&#X201D; means a named subunit of the Document whose title either is
precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another
language. (Here XYZ stands for a specific section name mentioned below, such as
&#X201C;Acknowledgements&#X201D;, &#X201C;Dedications&#X201D;, &#X201C;Endorsements&#X201D;, or &#X201C;History&#X201D;.) To &#X201C;Preserve the
Title&#X201D; of such a section when you modify the Document means that it remains a section
&#X201C;Entitled XYZ&#X201D; according to this definition.</p><p>The Document may include Warranty Disclaimers next to the notice which states that this
License applies to the Document. These Warranty Disclaimers are considered to be included by
reference in this License, but only as regards disclaiming warranties: any other implication
that these Warranty Disclaimers may have is void and has no effect on the meaning of this
License.</p></li><li class="li-enumerate">VERBATIM COPYING <br>
 You may copy and distribute the Document in any medium, either commercially or
noncommercially, provided that this License, the copyright notices, and the license notice
saying this License applies to the Document are reproduced in all copies, and that you add no
other conditions whatsoever to those of this License. You may not use technical measures to
obstruct or control the reading or further copying of the copies you make or distribute.
However, you may accept compensation in exchange for copies. If you distribute a large enough
number of copies you must also follow the conditions in section 3.<p>You may also lend copies, under the same conditions stated above, and you may publicly display
copies.</p></li><li class="li-enumerate">COPYING IN QUANTITY <br>
 If you publish printed copies (or copies in media that commonly have printed covers) of the
Document, numbering more than 100, and the Document&#X2019;s license notice requires Cover Texts, you
must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover. Both covers
must also clearly and legibly identify you as the publisher of these copies. The front cover
must present the full title with all words of the title equally prominent and visible. You
may add other material on the covers in addition. Copying with changes limited to the covers,
as long as they preserve the title of the Document and satisfy these conditions, can be
treated as verbatim copying in other respects.<p>If the required texts for either cover are too voluminous to fit legibly, you should put the
first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto
adjacent pages.</p><p>If you publish or distribute Opaque copies of the Document numbering more than 100, you must
either include a machine-readable Transparent copy along with each Opaque copy, or state in or
with each Opaque copy a computer-network location from which the general network-using public
has access to download using public-standard network protocols a complete Transparent copy of
the Document, free of added material. If you use the latter option, you must take reasonably
prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this
Transparent copy will remain thus accessible at the stated location until at least one year
after the last time you distribute an Opaque copy (directly or through your agents or
retailers) of that edition to the public.</p><p>It is requested, but not required, that you contact the authors of the Document well before
redistributing any large number of copies, to give them a chance to provide you with an
updated version of the Document.</p></li><li class="li-enumerate">MODIFICATIONS <br>
 You may copy and distribute a Modified Version of the Document under the conditions of
sections&#XA0;2 and 3 above, provided that you release the Modified Version under precisely this
License, with the Modified Version filling the role of the Document, thus licensing
distribution and modification of the Modified Version to whoever possesses a copy of it. In
addition, you must do these things in the Modified Version:<ol class="enumerate" type=a><li class="li-enumerate">

Use in the Title Page (and on the covers, if any) a title distinct from that of the
Document, and from those of previous versions (which should, if there were any, be listed in
the History section of the Document). You may use the same title as a previous version if
the original publisher of that version gives permission.</li><li class="li-enumerate">List on the Title Page, as authors, one or more persons or entities responsible for
authorship of the modifications in the Modified Version, together with at least five of the
principal authors of the Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.</li><li class="li-enumerate">State on the Title page the name of the publisher of the Modified Version, as the publisher.</li><li class="li-enumerate">Preserve all the copyright notices of the Document.</li><li class="li-enumerate">Add an appropriate copyright notice for your modifications adjacent to the other copyright
notices.</li><li class="li-enumerate">Include, immediately after the copyright notices, a license notice giving the public
permission to use the Modified Version under the terms of this License, in the form shown in
the Addendum below.</li><li class="li-enumerate">Preserve in that license notice the full lists of Invariant Sections and required Cover
Texts given in the Document&#X2019;s license notice.</li><li class="li-enumerate">Include an unaltered copy of this License.</li><li class="li-enumerate">Preserve the section Entitled &#X201C;History&#X201D;, Preserve its Title, and add to it an item stating
at least the title, year, new authors, and publisher of the Modified Version as given on the
Title Page. If there is no section Entitled &#X201C;History&#X201D; in the Document, create one stating
the title, year, authors, and publisher of the Document as given on its Title Page, then add
an item describing the Modified Version as stated in the previous sentence.</li><li class="li-enumerate">Preserve the network location, if any, given in the Document for public access to a
Transparent copy of the Document, and likewise the network locations given in the Document
for previous versions it was based on. These may be placed in the &#X201C;History&#X201D; section. You
may omit a network location for a work that was published at least four years before the
Document itself, or if the original publisher of the version it refers to gives permission.</li><li class="li-enumerate">For any section Entitled &#X201C;Acknowledgements&#X201D; or &#X201C;Dedications&#X201D;, Preserve the Title of the
section, and preserve in the section all the substance and tone of each of the contributor
acknowledgements and/or dedications given therein.</li><li class="li-enumerate">Preserve all the Invariant Sections of the Document, unaltered in their text and in their
titles. Section numbers or the equivalent are not considered part of the section titles.</li><li class="li-enumerate">Delete any section Entitled &#X201C;Endorsements&#X201D;. Such a section may not be included in the
Modified Version.</li><li class="li-enumerate">Do not retitle any existing section to be Entitled &#X201C;Endorsements&#X201D; or to conflict in title
with any Invariant Section.</li><li class="li-enumerate">Preserve any Warranty Disclaimers.
</li></ol><p>If the Modified Version includes new front-matter sections or appendices that qualify as
Secondary Sections and contain no material copied from the Document, you may at your option
designate some or all of these sections as invariant. To do this, add their titles to the
list of Invariant Sections in the Modified Version&#X2019;s license notice. These titles must be
distinct from any other section titles.</p><p>You may add a section Entitled &#X201C;Endorsements&#X201D;, provided it contains nothing but endorsements
of your Modified Version by various parties&#X2014;for example, statements of peer review or that
the text has been approved by an organization as the authoritative definition of a standard.</p><p>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to
25&#XA0;words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version.
Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through
arrangements made by) any one entity. If the Document already includes a cover text for the
same cover, previously added by you or by arrangement made by the same entity you are acting
on behalf of, you may not add another; but you may replace the old one, on explicit permission
from the previous publisher that added the old one.</p><p>The author(s) and publisher(s) of the Document do not by this License give permission to use
their names for publicity for or to assert or imply endorsement of any Modified Version.</p></li><li class="li-enumerate">COMBINING DOCUMENTS <br>
 You may combine the Document with other documents released under this License, under the terms
defined in section&#XA0;4 above for modified versions, provided that you include in the combination
all of the Invariant Sections of all of the original documents, unmodified, and list them all
as Invariant Sections of your combined work in its license notice, and that you preserve all
their Warranty Disclaimers.<p>The combined work need only contain one copy of this License, and multiple identical Invariant
Sections may be replaced with a single copy. If there are multiple Invariant Sections with
the same name but different contents, make the title of each such section unique by adding at
the end of it, in parentheses, the name of the original author or publisher of that section if
known, or else a unique number. Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.</p><p>In the combination, you must combine any sections Entitled &#X201C;History&#X201D; in the various original
documents, forming one section Entitled &#X201C;History&#X201D;; likewise combine any sections Entitled
&#X201C;Acknowledgements&#X201D;, and any sections Entitled &#X201C;Dedications&#X201D;. You must delete all sections
Entitled &#X201C;Endorsements.&#X201D;</p></li><li class="li-enumerate">COLLECTIONS OF DOCUMENTS <br>
 You may make a collection consisting of the Document and other documents released under this
License, and replace the individual copies of this License in the various documents with a
single copy that is included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other respects.<p>You may extract a single document from such a collection, and distribute it individually under
this License, provided you insert a copy of this License into the extracted document, and
follow this License in all other respects regarding verbatim copying of that document.</p></li><li class="li-enumerate">AGGREGATION WITH INDEPENDENT WORKS <br>
 A compilation of the Document or its derivatives with other separate and independent documents
or works, in or on a volume of a storage or distribution medium, is called an &#X201C;aggregate&#X201D; if
the copyright resulting from the compilation is not used to limit the legal rights of the
compilation&#X2019;s users beyond what the individual works permit. When the Document is included in
an aggregate, this License does not apply to the other works in the aggregate which are not
themselves derivative works of the Document.<p>If the Cover Text requirement of section&#XA0;3 is applicable to these copies of the Document, then
if the Document is less than one half of the entire aggregate, the Document&#X2019;s Cover Texts may
be placed on covers that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form. Otherwise they must appear on
printed covers that bracket the whole aggregate.</p></li><li class="li-enumerate">TRANSLATION <br>
 Translation is considered a kind of modification, so you may distribute translations of the
Document under the terms of section&#XA0;4. Replacing Invariant Sections with translations
requires special permission from their copyright holders, but you may include translations of
some or all Invariant Sections in addition to the original versions of these Invariant
Sections. You may include a translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include the original English
version of this License and the original versions of those notices and disclaimers. In case
of a disagreement between the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.<p>If a section in the Document is Entitled &#X201C;Acknowledgements&#X201D;,
&#X201C;Dedications&#X201D;, or &#X201C;History&#X201D;, the requirement (section&#XA0;4) to
Preserve its Title (section&#XA0;1) will typically require changing the
actual title.</p></li><li class="li-enumerate">TERMINATION <br>
 You may not copy, modify, sublicense, or distribute the Document except as expressly provided
for under this License. Any other attempt to copy, modify, sublicense or distribute the
Document is void, and will automatically terminate your rights under this License. However,
parties who have received copies, or rights, from you under this License will not have their
licenses terminated so long as such parties remain in full compliance.</li><li class="li-enumerate">FUTURE REVISIONS OF THIS LICENSE <br>
 The Free Software Foundation may publish new, revised versions of the <span class="c016">GNU</span> Free
Documentation License from time to time. Such new versions will be similar in spirit to the
present version, but may differ in detail to address new problems or concerns. See
<a href="http://www.gnu.org/copyleft/"><span class="c016">GNU</span> Copyleft</a>.<p>Each version of the License is given a distinguishing version number. If the Document
specifies that a particular numbered version of this License &#X201C;or any later version&#X201D; applies
to it, you have the option of following the terms and conditions either of that specified
version or of any later version that has been published (not as a draft) by the Free Software
Foundation. If the Document does not specify a version number of this License, you may choose
any version ever published (not as a draft) by the Free Software Foundation.
</p></li></ol><p>
<a id="sec:syncomm-index"></a></p><!--TOC chapter id="sec:program-index" Syntactic Comment Index-->
<h1 class="chapter" id="sec:program-index">Syntactic Comment Index</h1><!--SEC END --><p></p><table class="c002 cellpading0"><tr><td class="c027"><ul class="indexenv"><li class="li-indexenv">
<span class="c005">enblend-response-file</span>, <a href="#hevea_syncomm1">4.4.1</a>
</li><li class="li-indexenv"><span class="c005">enfuse-response-file</span>, <a href="#hevea_syncomm2">4.4.1</a>
</li><li class="li-indexenv"><span class="c005">filename-globbing</span>, <a href="#hevea_syncomm5">4.4.3</a>
</li><li class="li-indexenv"><span class="c005">glob</span>, <a href="#hevea_syncomm3">4.4.3</a>
</li></ul></td><td class="c027"><ul class="indexenv"><li class="li-indexenv"><span class="c005">globbing</span>, <a href="#hevea_syncomm4">4.4.3</a>
</li><li class="li-indexenv"><span class="c005">layer-selector</span>, <a href="#hevea_syncomm6">4.4.4</a>
</li><li class="li-indexenv"><span class="c005">response-file</span>, <a href="#hevea_syncomm0">4.4.1</a>
</li></ul></td></tr>
</table><p><a id="hevea_general644"></a>

</p><!--TOC chapter id="sec:option-index" Program/Application Index-->
<h1 class="chapter" id="sec:option-index">Program/Application Index</h1><!--SEC END --><p></p><table class="c002 cellpading0"><tr><td class="c027"><ul class="indexenv"><li class="li-indexenv">
<span class="c008">CinePaint</span>, <a href="#hevea_program37">A.3</a>
</li><li class="li-indexenv"><span class="c008">Cinepaint</span>, <a href="#hevea_program8">4.2.2</a>
</li><li class="li-indexenv"><span class="c008">Darktable</span>, <a href="#hevea_program24">A.1</a>
</li><li class="li-indexenv"><span class="c008">Gimp</span>, <a href="#hevea_program4">3.1</a>, <a href="#hevea_program7">4.2.2</a>, <a href="#hevea_program11">4.2.5</a>, <a href="#hevea_program38">A.3</a>
</li><li class="li-indexenv"><span class="c008">GraphicsMagick</span>, <a href="#hevea_program41">A.3</a>
</li><li class="li-indexenv"><span class="c008">Hugin</span>, <a href="#hevea_program2">3.1</a>, <a href="#hevea_program13">4.5.2</a>, <a href="#hevea_program23">8.1</a>, <a href="#hevea_program30">A.2</a>, <a href="#hevea_program54">B.2</a>
</li><li class="li-indexenv"><span class="c008">ImageFuser</span>, <a href="#hevea_program55">B.2</a>
</li><li class="li-indexenv"><span class="c008">ImageMagick</span>, <a href="#hevea_program9">4.2.5</a>, <a href="#hevea_program12">4.2.5</a>, <a href="#hevea_program40">A.3</a>
</li><li class="li-indexenv"><span class="c008">LittleCMS</span>, <a href="#hevea_program51">A.6</a>
</li><li class="li-indexenv"><span class="c008">Magic Lantern</span>, <a href="#hevea_program53">A.7</a>
</li><li class="li-indexenv"><span class="c008">Mercurial</span>, <a href="#hevea_program5">3.3.1</a>
</li><li class="li-indexenv"><span class="c008">PanoTools</span>, <a href="#hevea_program3">3.1</a>, <a href="#hevea_program34">A.2</a>
</li><li class="li-indexenv"><span class="c008">RawTherapee</span>, <a href="#hevea_program26">A.1</a>
</li><li class="li-indexenv"><span class="c008">UFRaw</span>, <a href="#hevea_program27">A.1</a>
</li><li class="li-indexenv"><span class="c005">align_image_stack </span>(Hugin), <a href="#hevea_program33">A.2</a>
</li><li class="li-indexenv"><span class="c005">convert </span>(ImageMagick), <a href="#hevea_program18">4.5.2</a>, <a href="#hevea_program42">A.3</a>
</li><li class="li-indexenv"><span class="c005">convert</span>, <a href="#hevea_program10">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">dcraw</span>, <a href="#hevea_program0">3.1</a>, <a href="#hevea_program25">A.1</a>
</li><li class="li-indexenv"><span class="c005">display
</span>(ImageMagick), <a href="#hevea_program19">4.5.2</a>
</li><li class="li-indexenv"><span class="c005">display </span>(ImageMagick), <a href="#hevea_program43">A.3</a>
</li></ul></td><td class="c027"><ul class="indexenv"><li class="li-indexenv"><span class="c005">exiftool</span>, <a href="#hevea_program50">A.6</a>
</li><li class="li-indexenv"><span class="c005">exrdisplay </span>(OpenEXR), <a href="#hevea_program47">A.4</a>
</li><li class="li-indexenv"><span class="c005">fulla </span>(Hugin), <a href="#hevea_program32">A.2</a>
</li><li class="li-indexenv"><span class="c005">gm </span>(GraphicsMagick), <a href="#hevea_program46">A.3</a>
</li><li class="li-indexenv"><span class="c005">gmic</span>, <a href="#hevea_program39">A.3</a>
</li><li class="li-indexenv"><span class="c005">identify </span>(ImageMagick), <a href="#hevea_program20">7.1</a>, <a href="#hevea_program44">A.3</a>
</li><li class="li-indexenv"><span class="c005">montage </span>(ImageMagick), <a href="#hevea_program45">A.3</a>
</li><li class="li-indexenv"><span class="c005">nona </span>(Hugin), <a href="#hevea_program6">4.2.2</a>, <a href="#hevea_program14">4.5.2</a>, <a href="#hevea_program22">7.1</a>, <a href="#hevea_program31">A.2</a>
</li><li class="li-indexenv"><span class="c005">PFSTools</span>, <a href="#hevea_program48">A.4</a>
</li><li class="li-indexenv"><span class="c005">PTmender </span>(PanoTools), <a href="#hevea_program36">A.2</a>
</li><li class="li-indexenv"><span class="c005">PTOptimizer </span>(PanoTools), <a href="#hevea_program35">A.2</a>
</li><li class="li-indexenv"><span class="c005">tiffcp </span>(LibTIFF), <a href="#hevea_program15">4.5.2</a>
</li><li class="li-indexenv"><span class="c005">tiffinfo
</span>(libtiff), <a href="#hevea_program21">7.1</a>
</li><li class="li-indexenv"><span class="c005">tiffinfo </span>(LibTIFF), <a href="#hevea_program17">4.5.2</a>
</li><li class="li-indexenv"><span class="c005">tiffinfo </span>(libtiff), <a href="#hevea_program49">A.5</a>
</li><li class="li-indexenv"><span class="c005">tiffsplit </span>(LibTIFF), <a href="#hevea_program16">4.5.2</a>
</li><li class="li-indexenv"><span class="c005">tificc </span>(LittleCMS), <a href="#hevea_program52">A.6</a>
</li><li class="li-indexenv"><span class="c005">ufraw-batch</span>, <a href="#hevea_program29">A.1</a>
</li><li class="li-indexenv"><span class="c005">ufraw</span>, <a href="#hevea_program1">3.1</a>, <a href="#hevea_program28">A.1</a>
</li></ul></td></tr>
</table><p>If a program belongs to a larger package, it has its association mentioned in parenthesis.
</p><!--TOC chapter id="sec:general-index" Option Index-->
<h1 class="chapter" id="sec:general-index">Option Index</h1><!--SEC END --><p></p><table class="c002 cellpading0"><tr><td class="c027"><ul class="indexenv"><li class="li-indexenv">
<span class="c005">--blend-colorspace</span>, <a href="#hevea_option16"><U>4.2.2</U></a>
</li><li class="li-indexenv"><span class="c005">--ciecam</span>, <a href="#hevea_option17">4.2.2</a>
</li><li class="li-indexenv"><span class="c005">--compression</span>, <a href="#hevea_option9"><U>4.2.1</U></a>
</li><li class="li-indexenv"><span class="c005">--contrast-edge-scale</span>, <a href="#hevea_option40"><U>4.2.5</U></a>
</li><li class="li-indexenv"><span class="c005">--contrast-min-curvature</span>, <a href="#hevea_option41"><U>4.2.5</U></a>
</li><li class="li-indexenv"><span class="c005">--contrast-weight</span>, <a href="#hevea_option26"><U>4.2.3</U></a>
</li><li class="li-indexenv"><span class="c005">--contrast-window-size</span>, <a href="#hevea_option42"><U>4.2.5</U></a>
</li><li class="li-indexenv"><span class="c005">--depth</span>, <a href="#hevea_option20"><U>4.2.2</U></a>
</li><li class="li-indexenv"><span class="c005">--entropy-cutoff</span>, <a href="#hevea_option43"><U>4.2.5</U></a>
</li><li class="li-indexenv"><span class="c005">--entropy-weight</span>, <a href="#hevea_option27"><U>4.2.3</U></a>
</li><li class="li-indexenv"><span class="c005">--entropy-window-size</span>, <a href="#hevea_option44"><U>4.2.5</U></a>
</li><li class="li-indexenv"><span class="c005">--exposure-cutoff</span>, <a href="#hevea_option45"><U>4.2.5</U></a>, <a href="#hevea_option62">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">--exposure-optimum</span>, <a href="#hevea_option28"><U>4.2.3</U></a>, <a href="#hevea_option57">5.2</a>, <a href="#hevea_option59">5.2.1</a>, <a href="#hevea_option64">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">--exposure-weight-function</span>, <a href="#hevea_option46"><U>4.2.5</U></a>, <a href="#hevea_option61">5.2.1</a>, <a href="#hevea_option63">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">--exposure-weight</span>, <a href="#hevea_option29"><U>4.2.3</U></a>
</li><li class="li-indexenv"><span class="c005">--exposure-width</span>, <a href="#hevea_option30"><U>4.2.3</U></a>, <a href="#hevea_option60">5.2.1</a>, <a href="#hevea_option65">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">--fallback-profile</span>, <a href="#hevea_option34"><U>4.2.4</U></a>
</li><li class="li-indexenv"><span class="c005">--gray-projector</span>, <a href="#hevea_option47"><U>4.2.5</U></a>, <a href="#hevea_option58">5.2</a>
</li><li class="li-indexenv"><span class="c005">--hard-mask</span>, <a href="#hevea_option31"><U>4.2.3</U></a>, <a href="#hevea_option56">5.1.2</a>, <a href="#hevea_option67">8.6.6</a>
</li><li class="li-indexenv"><span class="c005">--help</span>, <a href="#hevea_option48"><U>4.2.6</U></a>
</li><li class="li-indexenv"><span class="c005">--layer-selector</span>, <a href="#hevea_option35"><U>4.2.4</U></a>
</li><li class="li-indexenv"><span class="c005">--levels</span>, <a href="#hevea_option10"><U>4.2.1</U></a>
</li><li class="li-indexenv"><span class="c005">--load-masks</span>, <a href="#hevea_option2">3.2</a>, <a href="#hevea_option36"><U>4.2.4</U></a>
</li><li class="li-indexenv"><span class="c005">--no-ciecam</span>, <a href="#hevea_option19">4.2.2</a>
</li></ul></td><td class="c027"><ul class="indexenv"><li class="li-indexenv"><span class="c005">--no-parameter</span>, <a href="#hevea_option38"><U>4.2.4</U></a>
</li><li class="li-indexenv"><span class="c005">--output</span>, <a href="#hevea_option1">3.2</a>, <a href="#hevea_option12"><U>4.2.1</U></a>
</li><li class="li-indexenv"><span class="c005">--parameter</span>, <a href="#hevea_option37"><U>4.2.4</U></a>
</li><li class="li-indexenv"><span class="c005">--saturation-weight</span>, <a href="#hevea_option32"><U>4.2.3</U></a>
</li><li class="li-indexenv"><span class="c005">--save-masks</span>, <a href="#hevea_option0">3.2</a>, <a href="#hevea_option39"><U>4.2.4</U></a>
</li><li class="li-indexenv"><span class="c005">--show-globbing-algorithms</span>, <a href="#hevea_option50"><U>4.2.6</U></a>
</li><li class="li-indexenv"><span class="c005">--show-image-formats</span>, <a href="#hevea_option6">3.3.1</a>, <a href="#hevea_option51"><U>4.2.6</U></a>
</li><li class="li-indexenv"><span class="c005">--show-signature</span>, <a href="#hevea_option7">3.3.1</a>, <a href="#hevea_option52"><U>4.2.6</U></a>
</li><li class="li-indexenv"><span class="c005">--show-software-components</span>, <a href="#hevea_option8">3.3.1</a>, <a href="#hevea_option53"><U>4.2.6</U></a>, <a href="#hevea_option66">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">--soft-mask</span>, <a href="#hevea_option33"><U>4.2.3</U></a>
</li><li class="li-indexenv"><span class="c005">--verbose</span>, <a href="#hevea_option5">3.3.1</a>, <a href="#hevea_option14"><U>4.2.1</U></a>
</li><li class="li-indexenv"><span class="c005">--version</span>, <a href="#hevea_option3">3.3.1</a>, <a href="#hevea_option4">3.3.1</a>, <a href="#hevea_option54"><U>4.2.6</U></a>
</li><li class="li-indexenv"><span class="c005">--wrap</span>, <a href="#hevea_option24"><U>4.2.2</U></a>
</li><li class="li-indexenv"><span class="c005">-c</span> (long: <span class="c005">--ciecam</span>), <a href="#hevea_option18">4.2.2</a>
</li><li class="li-indexenv"><span class="c005">-d</span> (long: <span class="c005">--depth</span>), <a href="#hevea_option21">4.2.2</a>
</li><li class="li-indexenv"><span class="c005">-f</span>, <a href="#hevea_option22"><U>4.2.2</U></a>
</li><li class="li-indexenv"><span class="c005">-g</span>, <a href="#hevea_option23"><U>4.2.2</U></a>
</li><li class="li-indexenv"><span class="c005">-h</span> (long: <span class="c005">--help</span>), <a href="#hevea_option49">4.2.6</a>
</li><li class="li-indexenv"><span class="c005">-l</span> (long: <span class="c005">--levels</span>), <a href="#hevea_option11">4.2.1</a>
</li><li class="li-indexenv"><span class="c005">-o</span> (long: <span class="c005">--output</span>), <a href="#hevea_option13">4.2.1</a>
</li><li class="li-indexenv"><span class="c005">-V</span> (long: <span class="c005">--version</span>), <a href="#hevea_option55">4.2.6</a>
</li><li class="li-indexenv"><span class="c005">-v</span> (long: <span class="c005">--verbose</span>), <a href="#hevea_option15">4.2.1</a>
</li><li class="li-indexenv"><span class="c005">-w</span> (long: <span class="c005">--wrap</span>), <a href="#hevea_option25">4.2.2</a>
</li></ul></td></tr>
</table><!--TOC chapter id="sec105" General Index-->
<h1 class="chapter" id="sec105">General Index</h1><!--SEC END --><p></p><table class="c002 cellpading0"><tr><td class="c027"><ul class="indexenv"><li class="li-indexenv">
360<sup>&#X2218;</sup><ul class="indexenv"><li class="li-indexenv">
horizontal panorama, <span class="c011">see</span> panorama, 360<sup>&#X2218;</sup>
</li><li class="li-indexenv">vertical panorama, <span class="c011">see</span> panorama, 360<sup>&#X2218;</sup>
</li></ul>
<br>
<br>
</li><li class="li-indexenv"># (response file comment), <a href="#hevea_general341">4.4.1</a>
</li><li class="li-indexenv">@ (response file prefix), <a href="#hevea_general335">4.4</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">Adelson, Edward H.</span>, <a href="#hevea_general14">1</a>
</li><li class="li-indexenv">active criteria, <span class="c011">see</span> criteria, active
</li><li class="li-indexenv">advanced focus stacking, <span class="c011">see</span> focus stacking, advanced
<ul class="indexenv"><li class="li-indexenv">
recognizing faint edges, <a href="#hevea_general592">8.6.5</a>
</li><li class="li-indexenv">suppressing noise, <a href="#hevea_general591">8.6.5</a>
</li></ul>
</li><li class="li-indexenv">advanced options, <a href="#hevea_general150">4.2.2</a>
</li><li class="li-indexenv">affine transformation, <span class="c011">see</span> transformation, affine
</li><li class="li-indexenv">algorithm, <span class="c011">see</span> globbing algorithm
<ul class="indexenv"><li class="li-indexenv">
globbing, <a href="#hevea_general316">4.2.6</a>
</li></ul>
</li><li class="li-indexenv">algorithms<ul class="indexenv"><li class="li-indexenv">
globbing, <a href="#hevea_general361">4.4.3</a>
</li></ul>
</li><li class="li-indexenv">alignment<ul class="indexenv"><li class="li-indexenv">
photometric, <a href="#hevea_general43">3.1</a>
</li></ul>
</li><li class="li-indexenv">alpha, <a href="#hevea_general541">7.1</a>
</li><li class="li-indexenv">alpha channel<ul class="indexenv"><li class="li-indexenv">
associated, <a href="#hevea_general182">4.2.2</a>
</li></ul>
</li><li class="li-indexenv"><span class="c005">anti-value</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">anti-value</span>
</li><li class="li-indexenv">aperture<ul class="indexenv"><li class="li-indexenv">
sweet spot, <a href="#hevea_general574">8.6.1</a>
</li></ul>
</li><li class="li-indexenv">applications of <span class="c008">Enfuse</span>, <a href="#hevea_general547">8</a>
</li><li class="li-indexenv">arithmetic <span class="c016">JPEG</span> compression, <span class="c011">see</span> compression
</li><li class="li-indexenv">associated alpha channel, <span class="c011">see</span> alpha channel, associated
</li><li class="li-indexenv">authors, <a href="#hevea_general640">C</a>
</li><li class="li-indexenv">average<ul class="indexenv"><li class="li-indexenv">
disabling, <a href="#hevea_general381">5.1.2</a>
</li><li class="li-indexenv">weighted, <a href="#hevea_general379">5.1.1</a>
</li></ul>
</li><li class="li-indexenv"><span class="c005">average</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">average</span>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">BigTIFF</span>, <a href="#hevea_general31">2</a>
</li><li class="li-indexenv"><span class="c016">Born, Max</span>, <a href="#hevea_general188">4.2.2</a>
</li><li class="li-indexenv"><span class="c016">Brasseur, Eric</span>, <a href="#hevea_general489">6.1</a>
</li><li class="li-indexenv"><span class="c016">Burt, Peter J.</span>, <a href="#hevea_general13">1</a>
</li><li class="li-indexenv"><span class="c016">Burt-Adelson</span>, <a href="#hevea_general15">1</a>
</li><li class="li-indexenv">basic focus stacking, <span class="c011">see</span> focus stacking, basic
</li><li class="li-indexenv">binary mask, <span class="c011">see</span> mask, binary
</li><li class="li-indexenv">binary version, <span class="c011">see</span> software, version
</li><li class="li-indexenv">bit depth, <span class="c011">see</span> bits per channel
</li><li class="li-indexenv">bits per channel, <a href="#hevea_general73">3.3.1</a>, <a href="#hevea_general169">4.2.2</a>
</li><li class="li-indexenv">black-and-white image, <span class="c011">see</span> image, black-and-white
</li><li class="li-indexenv">black-point, <a href="#hevea_general505">6.3</a>
</li><li class="li-indexenv">blend colorspace, <span class="c011">see</span> colorspace, blend
</li><li class="li-indexenv">blending color space, <span class="c011">see</span> colorspace, for blending and fusing
</li><li class="li-indexenv">blending exposures, <a href="#hevea_general558">8.3.2</a>
</li><li class="li-indexenv">blending pixels, <span class="c011">see</span> pixels, blending
</li><li class="li-indexenv">bracketing<ul class="indexenv"><li class="li-indexenv">
<span class="c016">HDR</span>, <a href="#hevea_general631">A.7</a>
</li></ul>
</li><li class="li-indexenv">branches of <span class="c008">Enfuse</span>/<span class="c008">Enblend</span><ul class="indexenv"><li class="li-indexenv">
development, <a href="#hevea_general56">3.3.1</a>
</li></ul>
</li><li class="li-indexenv">bug<ul class="indexenv"><li class="li-indexenv">
database at LaunchPad, <a href="#hevea_general635">B</a>
</li><li class="li-indexenv">reports, <a href="#hevea_general633">B</a>
<ul class="indexenv"><li class="li-indexenv">
how to, <a href="#hevea_general638">B.2</a>
</li><li class="li-indexenv">identification of bugs, <a href="#hevea_general637">B.1</a>
</li><li class="li-indexenv">sending patches, <a href="#hevea_general639">B.3</a>
</li></ul>
</li></ul>
</li><li class="li-indexenv">builder, <a href="#hevea_general79">3.3.1</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">Carter, Samantha</span>, <a href="#hevea_general373">4.5.1</a>
</li><li class="li-indexenv"><span class="c016">CIECAM02</span> colorspace, <span class="c011">see</span> colorspace, <span class="c016">CIECAM02</span>, <span class="c011">see</span> colorspace, <span class="c016">CIECAM02</span>
</li><li class="li-indexenv"><span class="c016">CIEL*a*b*</span> colorspace, <span class="c011">see</span> colorspace, <span class="c016">CIEL*a*b*</span>
</li><li class="li-indexenv"><span class="c016">CIEL*u*v*</span> colorspace, <span class="c011">see</span> colorspace, <span class="c016">CIEL*u*v*</span>, <span class="c011">see</span> colorspace, <span class="c016">CIEL*u*v*</span>
</li><li class="li-indexenv"><span class="c005">CILK_NWORKERS</span>, <span class="c011">see</span> environment variable, <span class="c005">CILK_NWORKERS</span>
</li><li class="li-indexenv"><span class="c016">CoC</span>, <span class="c011">see</span> circle-of-confusion
</li><li class="li-indexenv">channel<ul class="indexenv"><li class="li-indexenv">
alpha, <a href="#hevea_general28">1</a>, <a href="#hevea_general46">3.1</a>, <a href="#hevea_general75">3.3.1</a>, <a href="#hevea_general543">7.1</a>
</li><li class="li-indexenv">depth, <a href="#hevea_general171">4.2.2</a>
</li><li class="li-indexenv">width, <span class="c011">see</span> channel, depth
</li></ul>
</li><li class="li-indexenv"><span class="c005">channel-mixer</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">channel-mixer</span>
</li><li class="li-indexenv">circle-of-confusion, <a href="#hevea_general571">8.6.1</a>
</li><li class="li-indexenv">code, <br>
<span class="c011">see also</span> return code, <a href="#hevea_general93">3.3.2</a>
</li><li class="li-indexenv">code repository, <span class="c011">see</span> public repository
</li><li class="li-indexenv">coding guidelines, <a href="#hevea_general437">5.2.3</a>
</li><li class="li-indexenv">color appearance model, <a href="#hevea_general154">4.2.2</a>
</li><li class="li-indexenv">color cube<ul class="indexenv"><li class="li-indexenv">
<span class="c016">RGB</span>, <a href="#hevea_general161">4.2.2</a>, <a href="#hevea_general511">6.3</a>, <a href="#hevea_general517">6.4</a>
</li><li class="li-indexenv"><span class="c016">sRGB</span>, <a href="#hevea_general513">6.3</a>
</li><li class="li-indexenv"><span class="c016">RGB</span>, <a href="#hevea_general158">4.2.2</a>
</li></ul>
</li><li class="li-indexenv">color profile, <a href="#hevea_general476">6</a>, <a href="#hevea_general504">6.3</a>
</li><li class="li-indexenv">color profiles<ul class="indexenv"><li class="li-indexenv">
math, <a href="#hevea_general485">6.1</a>
</li></ul>
</li><li class="li-indexenv">colorspace, <a href="#hevea_general475">6</a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c016">CIECAM02</span>, <a href="#hevea_general167">4.2.2</a>, <a href="#hevea_general525">6.4</a>
</li><li class="li-indexenv"><span class="c016">CIEL*a*b*</span>, <a href="#hevea_general163">4.2.2</a>
</li><li class="li-indexenv"><span class="c016">CIEL*u*v*</span>, <a href="#hevea_general165">4.2.2</a>, <a href="#hevea_general523">6.4</a>
</li><li class="li-indexenv"><span class="c016">HSL</span>, <a href="#hevea_general441">5.3</a>
</li><li class="li-indexenv"><span class="c016">L*a*b*</span>, <a href="#hevea_general519">6.4</a>
</li><li class="li-indexenv">blend, <a href="#hevea_general152">4.2.2</a>
</li><li class="li-indexenv"><span class="c016">CIELUV</span>, <a href="#hevea_general157">4.2.2</a>
</li><li class="li-indexenv">for blending and fusing, <a href="#hevea_general515">6.4</a>
</li><li class="li-indexenv">practical considerations, <a href="#hevea_general531">6.5</a>
</li></ul>
</li><li class="li-indexenv">command-line, <a href="#hevea_general116">4</a>
</li><li class="li-indexenv">common options, <a href="#hevea_general124">4.2.1</a>
</li><li class="li-indexenv">compiled-in features, <span class="c011">see</span> features
</li><li class="li-indexenv">compiler, <a href="#hevea_general83">3.3.1</a>
</li><li class="li-indexenv">compression, <a href="#hevea_general127">4.2.1</a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c016">JPEG</span>, <a href="#hevea_general128">4.2.1</a>
</li><li class="li-indexenv"><span class="c016">JPEG</span> of <span class="c016">TIFF</span>, <a href="#hevea_general135">4.2.1</a>
</li><li class="li-indexenv"><span class="c016">LZW</span>, <a href="#hevea_general136">4.2.1</a>
</li><li class="li-indexenv">arithmetic <span class="c016">JPEG</span>, <a href="#hevea_general131">4.2.1</a>
</li><li class="li-indexenv">deflate, <a href="#hevea_general133">4.2.1</a>
</li><li class="li-indexenv">packbits, <a href="#hevea_general138">4.2.1</a>
</li></ul>
</li><li class="li-indexenv">console messages, <a href="#hevea_general88">3.3.2</a>
</li><li class="li-indexenv">contrast<ul class="indexenv"><li class="li-indexenv">
local enhancement, <a href="#hevea_general258">4.2.5</a>
</li><li class="li-indexenv">minimum curvature, <a href="#hevea_general261">4.2.5</a>
</li><li class="li-indexenv">window size, <a href="#hevea_general262">4.2.5</a>
</li></ul>
</li><li class="li-indexenv">contrast enhancement<ul class="indexenv"><li class="li-indexenv">
local, <a href="#hevea_general589">8.6.5</a>
</li></ul>
</li><li class="li-indexenv">contrast weight, <span class="c011">see</span> weight, local contrast
</li><li class="li-indexenv">contrast weighting, <span class="c011">see</span> weighting, local contrast
</li><li class="li-indexenv">contrast weighting using <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span>, <span class="c011">see</span> weighting, contrast using <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span>
</li><li class="li-indexenv">contrast weighting using a blend of methods, <span class="c011">see</span> weighting, contrast using a blend of methods
</li><li class="li-indexenv">contrast weighting using standard deviation, <span class="c011">see</span> weighting, contrast using standard deviation
</li><li class="li-indexenv">conventions<ul class="indexenv"><li class="li-indexenv">
typographic, <span class="c011">see</span> notation
</li></ul>
</li><li class="li-indexenv">conversion<ul class="indexenv"><li class="li-indexenv">
<span class="c016">RGB</span>-<span class="c016">L*a*b*</span>, <span class="c011">see</span> <span class="c016">RGB</span>-<span class="c016">L*a*b*</span> conversion
</li><li class="li-indexenv">raw, <a href="#hevea_general38">3.1</a>
</li></ul>
</li><li class="li-indexenv">criteria<ul class="indexenv"><li class="li-indexenv">
active, <a href="#hevea_general385">5.1.3</a>
</li><li class="li-indexenv">overpowering one another, <a href="#hevea_general389">5.1.3</a>
</li></ul>
</li><li class="li-indexenv">cutoff<ul class="indexenv"><li class="li-indexenv">
exposure, <span class="c011">see</span> exposure, cutoff
</li></ul>
</li><li class="li-indexenv">cutoff entropy, <span class="c011">see</span> entropy, cutoff
<br>
<br>
</li><li class="li-indexenv"><span class="c016">D50</span> white-point, <span class="c011">see</span> white-point, <span class="c016">D50</span>, <span class="c011">see</span> white-point, <span class="c016">D50</span>
</li><li class="li-indexenv"><span class="c016">DoF</span>, <span class="c011">see</span> depth-of-field, <span class="c011">see</span> depth-of-field
</li><li class="li-indexenv"><span class="c005">DYLD_FALLBACK_LIBRARY_PATH</span>, <span class="c011">see</span> environment variable, <span class="c005">DYLD_FALLBACK_LIBRARY_PATH</span>
</li><li class="li-indexenv"><span class="c005">DYLD_LIBRARY_PATH</span>, <span class="c011">see</span> environment variable, <span class="c005">DYLD_LIBRARY_PATH</span>
</li><li class="li-indexenv">dark frame, <a href="#hevea_general598">8.6.6</a>
</li><li class="li-indexenv">decision tree<ul class="indexenv"><li class="li-indexenv">
focus stacking, <a href="#hevea_general593">8.6.5</a>
</li></ul>
</li><li class="li-indexenv">default layer selection, <a href="#hevea_general362">4.4.4</a>
</li><li class="li-indexenv">default output filename, <span class="c011">see</span> filename, output, default
</li><li class="li-indexenv">default weights, <span class="c011">see</span> weights, default
</li><li class="li-indexenv">deflate compression, <span class="c011">see</span> compression
</li><li class="li-indexenv">delimiters, <br>
<span class="c011">see also</span> options, delimiters, <a href="#hevea_general330">4.3</a>
</li><li class="li-indexenv">depth-of-field, <a href="#hevea_general11">1</a>, <a href="#hevea_general568">8.6</a>, <a href="#hevea_general573">8.6.1</a>
</li><li class="li-indexenv">depth-of-focus increase, <a href="#hevea_general567">8.6</a>
</li><li class="li-indexenv">detailed configuration, <a href="#hevea_general51">3.3.1</a>
</li><li class="li-indexenv">development branch, <span class="c011">see</span> branches, development, <span class="c011">see</span> branches, development
</li><li class="li-indexenv">digital blending, <a href="#hevea_general557">8.3.2</a>
</li><li class="li-indexenv">disabling average, <span class="c011">see</span> average, disabling
</li><li class="li-indexenv">dlopen<ul class="indexenv"><li class="li-indexenv">
Linux, <a href="#hevea_general424">5.2.3</a>
</li><li class="li-indexenv">OS&#XA0;X, <a href="#hevea_general433">5.2.3</a>
</li></ul>
</li><li class="li-indexenv">double precision float (<span class="c016">IEEE754</span>), <span class="c011">see</span> <span class="c016">IEEE754</span>, double precision float
</li><li class="li-indexenv">dual-<span class="c016">ISO</span>, <a href="#hevea_general630">A.7</a>
</li><li class="li-indexenv">dynamic library, <a href="#hevea_general274">4.2.5</a>, <a href="#hevea_general420">5.2.3</a>
</li><li class="li-indexenv">dynamic linking, <span class="c011">see</span> linking, dynamic
</li><li class="li-indexenv">dynamic linking support, <a href="#hevea_general436">5.2.3</a>
</li><li class="li-indexenv">dynamic loading, <span class="c011">see</span> loading, dynamic
</li><li class="li-indexenv">dynamic range increase, <a href="#hevea_general554">8.3</a>, <a href="#hevea_general562">8.4</a>
</li><li class="li-indexenv">dynamic-library environment, <a href="#hevea_general323">4.2.6</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">EXIF</span>, <a href="#hevea_general627">A.6</a>
</li><li class="li-indexenv"><span class="c016">EXR</span>, <a href="#hevea_general615">A.4</a>
</li><li class="li-indexenv"><span class="c016">EXR</span> image, <span class="c011">see</span> image, <span class="c016">EXR</span>
</li><li class="li-indexenv">edge detection<ul class="indexenv"><li class="li-indexenv">
<span class="c016">Laplacian</span>, <a href="#hevea_general587">8.6.5</a>
</li></ul>
</li><li class="li-indexenv">entropy, <span class="c011">see</span> weighting, local entropy
<ul class="indexenv"><li class="li-indexenv">
cutoff, <a href="#hevea_general264">4.2.5</a>
</li><li class="li-indexenv">definition, <a href="#hevea_general473">5.5</a>
</li><li class="li-indexenv">window size, <a href="#hevea_general266">4.2.5</a>
</li></ul>
</li><li class="li-indexenv">entropy weight, <span class="c011">see</span> weight, entropy
</li><li class="li-indexenv">entropy weighting, <span class="c011">see</span> weighting, local entropy
</li><li class="li-indexenv">environment, <br>
<span class="c011">see also</span> environment variable, <a href="#hevea_general103">3.3.3</a>
</li><li class="li-indexenv">environment variable, <a href="#hevea_general101">3.3.3</a>, <a href="#hevea_general104"><span class="c013">3.3.3</span></a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c005">CILK_NWORKERS</span>, <a href="#hevea_general105">3.3.3</a>
</li><li class="li-indexenv"><span class="c005">DYLD_FALLBACK_LIBRARY_PATH</span>, <a href="#hevea_general429">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">DYLD_LIBRARY_PATH</span>, <a href="#hevea_general427">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">LD_LIBRARY_PATH</span>, <a href="#hevea_general422">5.2.3</a>, <a href="#hevea_general425">5.2.3</a>
</li><li class="li-indexenv"><span class="c005">OMP_DYNAMIC</span>, <a href="#hevea_general107">3.3.3</a>
</li><li class="li-indexenv"><span class="c005">OMP_NUM_THREADS</span>, <a href="#hevea_general110">3.3.3</a>
</li><li class="li-indexenv"><span class="c005">TMPDIR</span>, <a href="#hevea_general113">3.3.3</a>
</li></ul>
</li><li class="li-indexenv">estimators, <a href="#hevea_general460">5.4.1</a>
</li><li class="li-indexenv">expectation value, <a href="#hevea_general453">5.4.1</a>
</li><li class="li-indexenv">expert focus stacking tips, <span class="c011">see</span> tips, focus stacking experts
</li><li class="li-indexenv">expert fusion options, <a href="#hevea_general254">4.2.5</a>
</li><li class="li-indexenv">expert options, <a href="#hevea_general214">4.2.4</a>
</li><li class="li-indexenv">exposure<ul class="indexenv"><li class="li-indexenv">
cutoff, <a href="#hevea_general268">4.2.5</a>
</li><li class="li-indexenv">optimum, <a href="#hevea_general201">4.2.3</a>
</li><li class="li-indexenv">weight, <a href="#hevea_general203">4.2.3</a>
</li><li class="li-indexenv">width, <a href="#hevea_general205">4.2.3</a>
</li></ul>
</li><li class="li-indexenv">exposure fusion, <span class="c011">see</span> fusion, exposure
</li><li class="li-indexenv">exposure series, <span class="c011">see</span> series, exposure
<ul class="indexenv"><li class="li-indexenv">
common misconceptions, <a href="#hevea_general556">8.3.2</a>
</li><li class="li-indexenv">tips for beginners, <a href="#hevea_general555">8.3.1</a>
</li></ul>
</li><li class="li-indexenv">exposure weight<ul class="indexenv"><li class="li-indexenv">
function, <span class="c011">see</span> weight, function, exposure
</li><li class="li-indexenv">linear transform, <a href="#hevea_general276">4.2.5</a>
</li></ul>
</li><li class="li-indexenv">exposure weight function, <a href="#hevea_general291"><span class="c013">4.2.5</span></a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c016">FWHM</span>, <a href="#hevea_general278">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">bi-square</span>, <a href="#hevea_general410">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">bisquare</span>, <a href="#hevea_general409">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">full-sine</span>, <a href="#hevea_general408">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">fullsine</span>, <a href="#hevea_general407">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">gauss</span>, <a href="#hevea_general398">5.2.1</a>, <a href="#hevea_general400">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">half-sine</span>, <a href="#hevea_general406">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">halfsine</span>, <a href="#hevea_general405">5.2.1</a>
</li><li class="li-indexenv"><span class="c005">lorentz</span>, <a href="#hevea_general402">5.2.1</a>
</li><li class="li-indexenv"><span class="c016">Gaussian</span>, <a href="#hevea_general399">5.2.1</a>, <a href="#hevea_general401">5.2.1</a>
</li><li class="li-indexenv"><span class="c016">Lorentz</span> curve, <a href="#hevea_general403">5.2.1</a>
</li><li class="li-indexenv"><span class="c016">Lorentzian</span>, <a href="#hevea_general404">5.2.1</a>
</li><li class="li-indexenv">bi-square, <a href="#hevea_general290">4.2.5</a>
</li><li class="li-indexenv">bisquare, <a href="#hevea_general289">4.2.5</a>
</li><li class="li-indexenv">full width half maximum, <a href="#hevea_general277">4.2.5</a>
</li><li class="li-indexenv">full-sine, <a href="#hevea_general288">4.2.5</a>
</li><li class="li-indexenv">fullsine, <a href="#hevea_general287">4.2.5</a>
</li><li class="li-indexenv">gauss, <a href="#hevea_general281">4.2.5</a>
</li><li class="li-indexenv">gaussian, <a href="#hevea_general282">4.2.5</a>
</li><li class="li-indexenv">half-sine, <a href="#hevea_general286">4.2.5</a>
</li><li class="li-indexenv">halfsine, <a href="#hevea_general285">4.2.5</a>
</li><li class="li-indexenv">lorentz, <a href="#hevea_general283">4.2.5</a>
</li><li class="li-indexenv">lorentzian, <a href="#hevea_general284">4.2.5</a>
</li></ul>
</li><li class="li-indexenv">exposure weight functions, <a href="#hevea_general411">5.2.1</a>
</li><li class="li-indexenv">exposure weighting, <span class="c011">see</span> weighting, exposure, <span class="c011">see</span> weighting, exposure
<ul class="indexenv"><li class="li-indexenv">
functions, <a href="#hevea_general377">5</a>
</li></ul>
</li><li class="li-indexenv">external mask, <a href="#hevea_general47">3.2</a>
</li><li class="li-indexenv">extra features, <span class="c011">see</span> features
</li><li class="li-indexenv">extra samples, <a href="#hevea_general540">7.1</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">FDL</span>, <span class="c011">see</span> <span class="c016">GNU</span> Free Documentation License
</li><li class="li-indexenv"><span class="c016">FWHM</span>, <a href="#hevea_general207">4.2.3</a>, <span class="c011">see</span> full width half maximum
</li><li class="li-indexenv">fallback profile, <span class="c011">see</span> profile, fallback
</li><li class="li-indexenv">features, <a href="#hevea_general62">3.3.1</a>
</li><li class="li-indexenv">file<ul class="indexenv"><li class="li-indexenv">
Mach-O, <a href="#hevea_general431">5.2.3</a>
</li><li class="li-indexenv">multi-page, <a href="#hevea_general365"><U>4.5</U></a>
</li><li class="li-indexenv">response, <a href="#hevea_general119">4</a>, <a href="#hevea_general334">4.4</a>
</li></ul>
</li><li class="li-indexenv">filename<ul class="indexenv"><li class="li-indexenv">
literal, <a href="#hevea_general117">4</a>
</li><li class="li-indexenv">output, <a href="#hevea_general143">4.2.1</a>
<ul class="indexenv"><li class="li-indexenv">
default, <a href="#hevea_general146">4.2.1</a>
</li></ul>
</li></ul>
</li><li class="li-indexenv">filename template, <span class="c011">see</span> mask, filename template, <span class="c011">see</span> mask, filename template
</li><li class="li-indexenv">first moment, <span class="c011">see</span> moment, first
</li><li class="li-indexenv">flash exposure series, <span class="c011">see</span> series, flash exposure
</li><li class="li-indexenv">floating-point <span class="c016">TIFF</span> image, <span class="c011">see</span> image, floating-point <span class="c016">TIFF</span>
</li><li class="li-indexenv">floating-point <span class="c016">TIFF</span> mask, <span class="c011">see</span> mask, floating-point <span class="c016">TIFF</span>
</li><li class="li-indexenv">floating-point <span class="c016">VIFF</span> image, <span class="c011">see</span> image, floating-point <span class="c016">VIFF</span>
</li><li class="li-indexenv">floating-point image, <span class="c011">see</span> image, floating-point
</li><li class="li-indexenv">focus stacking<ul class="indexenv"><li class="li-indexenv">
advanced, <a href="#hevea_general584">8.6.5</a>
</li><li class="li-indexenv">basic, <a href="#hevea_general582">8.6.4</a>
</li></ul>
</li><li class="li-indexenv">focus stacking decision tree, <span class="c011">see</span> decision tree, focus stacking
</li><li class="li-indexenv">focus stacks, <a href="#hevea_general566">8.6</a>
<ul class="indexenv"><li class="li-indexenv">
fusing, <a href="#hevea_general581">8.6.3</a>
</li><li class="li-indexenv">preparation, <a href="#hevea_general576">8.6.2</a>
</li><li class="li-indexenv">why to create them?, <a href="#hevea_general570">8.6.1</a>
</li></ul>
</li><li class="li-indexenv">format<ul class="indexenv"><li class="li-indexenv">
image, <a href="#hevea_general318">4.2.6</a>
</li></ul>
</li><li class="li-indexenv">format of response file, <span class="c011">see</span> response file format
</li><li class="li-indexenv">full width half maximum, <a href="#hevea_general279">4.2.5</a>
</li><li class="li-indexenv">fusing<ul class="indexenv"><li class="li-indexenv">
local-contrast-based, <a href="#hevea_general580">8.6.3</a>
</li><li class="li-indexenv">single criterion, <a href="#hevea_general383">5.1.3</a>
</li></ul>
</li><li class="li-indexenv">fusing pixels, <span class="c011">see</span> pixels, fusing
</li><li class="li-indexenv">fusion<ul class="indexenv"><li class="li-indexenv">
exposure, <a href="#hevea_general7">1</a>
</li></ul>
</li><li class="li-indexenv">fusion options, <a href="#hevea_general194">4.2.3</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">Ganos Lal</span>, <span class="c011">see</span> <span class="c016">Morgan le Fay</span>
</li><li class="li-indexenv"><span class="c016">GNU</span> <span class="c016">FDL</span>, <span class="c011">see</span> <span class="c016">GNU</span> Free Documentation License
</li><li class="li-indexenv"><span class="c016">GNU</span> Free Documentation License, <a href="#hevea_general641">D</a>
</li><li class="li-indexenv">glob, <a href="#hevea_general356">4.4.3</a>
</li><li class="li-indexenv">globbing algorithm, <a href="#hevea_general350">4.4.3</a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c005">literal</span>, <a href="#hevea_general352">4.4.3</a>, <a href="#hevea_general354">4.4.3</a>
</li><li class="li-indexenv"><span class="c005">none</span>, <a href="#hevea_general357">4.4.3</a>
</li><li class="li-indexenv"><span class="c005">sh</span>, <a href="#hevea_general359">4.4.3</a>
</li><li class="li-indexenv"><span class="c005">shell</span>, <a href="#hevea_general358">4.4.3</a>
</li><li class="li-indexenv"><span class="c005">wildcard</span>, <a href="#hevea_general353">4.4.3</a>, <a href="#hevea_general355">4.4.3</a>
</li></ul>
</li><li class="li-indexenv">globbing algorithms, <span class="c011">see</span> algorithm, globbing, <a href="#hevea_general360">4.4.3</a>
</li><li class="li-indexenv">grammar<ul class="indexenv"><li class="li-indexenv">
response file, <span class="c011">see</span> response file, grammar
</li><li class="li-indexenv">syntactic comment, <a href="#hevea_general349">4.4.2</a>
</li></ul>
</li><li class="li-indexenv">gray projector, <a href="#hevea_general292">4.2.5</a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c005">anti-value</span>, <a href="#hevea_general294">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">average</span>, <a href="#hevea_general296">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">channel-mixer</span>, <a href="#hevea_general298">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">l-star</span>, <a href="#hevea_general300">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">lightness</span>, <a href="#hevea_general304">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">luminance</span>, <a href="#hevea_general306">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">pl-star</span>, <a href="#hevea_general308">4.2.5</a>
</li><li class="li-indexenv"><span class="c005">value</span>, <a href="#hevea_general311">4.2.5</a>
</li></ul>
</li><li class="li-indexenv">grayscale projector, <span class="c011">see</span> projector, grayscale
<br>
<br>
</li><li class="li-indexenv"><span class="c016">HDR</span>, <span class="c011">see</span> high dynamic range, <a href="#hevea_general616">A.4</a>
</li><li class="li-indexenv"><span class="c016">HDR</span>-bracketing, <span class="c011">see</span> bracketing, <span class="c016">HDR</span>
</li><li class="li-indexenv"><span class="c016">HSL</span> colorspace, <span class="c011">see</span> colorspace, <span class="c016">HSL</span>
</li><li class="li-indexenv">half precision float (<span class="c016">OpenEXR</span>), <span class="c011">see</span> <span class="c016">OpenEXR</span>, half precision float
</li><li class="li-indexenv">hard mask, <span class="c011">see</span> mask, hard
</li><li class="li-indexenv">header files, <a href="#hevea_general324">4.2.6</a>
</li><li class="li-indexenv">help, <a href="#hevea_general315">4.2.6</a>
</li><li class="li-indexenv">helpful libraries, <a href="#hevea_general618">A.5</a>
</li><li class="li-indexenv">helpful programs, <a href="#hevea_general607">A</a>, <br>
<span class="c011">see also</span> Program/Application Index, <a href="#hevea_general644">D</a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c016">HDR</span>, <a href="#hevea_general613">A.4</a>
</li><li class="li-indexenv">camera firmware, <a href="#hevea_general629">A.7</a>
</li><li class="li-indexenv">High Dynamic Range, <a href="#hevea_general612">A.4</a>
</li><li class="li-indexenv">image alignment, <a href="#hevea_general609">A.2</a>
</li><li class="li-indexenv">image manipulation, <a href="#hevea_general611">A.3</a>
</li><li class="li-indexenv">image rendering, <a href="#hevea_general610">A.2</a>
</li><li class="li-indexenv">libraries, <a href="#hevea_general617">A.5</a>
</li><li class="li-indexenv">meta-data handling, <a href="#hevea_general626">A.6</a>
</li><li class="li-indexenv">raw image conversion, <a href="#hevea_general608">A.1</a>
</li></ul>
</li><li class="li-indexenv">high dynamic range, <a href="#hevea_general9">1</a>
</li><li class="li-indexenv">hot pixels, <a href="#hevea_general600">8.6.6</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">ICC</span>, <a href="#hevea_general628">A.6</a>
</li><li class="li-indexenv"><span class="c016">ICC</span> profile, <span class="c011">see</span> profile, <span class="c016">ICC</span>, <span class="c011">see</span> profile, <span class="c016">ICC</span>
</li><li class="li-indexenv"><span class="c016">ICC</span> profile black-point, <span class="c011">see</span> black-point
</li><li class="li-indexenv"><span class="c016">ICC</span> profile white-point, <span class="c011">see</span> white-point
</li><li class="li-indexenv"><span class="c016">ICC</span> profile, <span class="c011">see</span> profile, <span class="c016">ICC</span>
</li><li class="li-indexenv"><span class="c016">IEEE754</span><ul class="indexenv"><li class="li-indexenv">
double precision float, <a href="#hevea_general175">4.2.2</a>
</li><li class="li-indexenv">single precision float, <a href="#hevea_general173">4.2.2</a>
</li></ul>
</li><li class="li-indexenv">image<ul class="indexenv"><li class="li-indexenv">
<span class="c016">EXR</span>, <a href="#hevea_general494">6.2</a>
</li><li class="li-indexenv">black-and-white, <a href="#hevea_general509">6.3</a>
</li><li class="li-indexenv">directory, <a href="#hevea_general368"><U>4.5</U></a>
</li><li class="li-indexenv">floating-point, <a href="#hevea_general491">6.2</a>
</li><li class="li-indexenv">floating-point <span class="c016">TIFF</span>, <a href="#hevea_general496">6.2</a>
</li><li class="li-indexenv">floating-point <span class="c016">VIFF</span>, <a href="#hevea_general498">6.2</a>
</li><li class="li-indexenv">frame, <a href="#hevea_general375">4.5.2</a>
</li></ul>
</li><li class="li-indexenv">image formats, <a href="#hevea_general66">3.3.1</a>, <a href="#hevea_general72">3.3.1</a>, <span class="c011">see</span> format, image
<ul class="indexenv"><li class="li-indexenv">
<span class="c016">JPEG</span>, <a href="#hevea_general68">3.3.1</a>
</li><li class="li-indexenv"><span class="c016">OpenEXR</span>, <a href="#hevea_general71">3.3.1</a>
</li><li class="li-indexenv"><span class="c016">PNG</span>, <a href="#hevea_general69">3.3.1</a>
</li><li class="li-indexenv"><span class="c016">TIFF</span>, <a href="#hevea_general70">3.3.1</a>
</li></ul>
</li><li class="li-indexenv">image processing order, <span class="c011">see</span> order of image processing
</li><li class="li-indexenv">image requirements, <span class="c011">see</span> requirements, image
</li><li class="li-indexenv">images<ul class="indexenv"><li class="li-indexenv">
fusable, <a href="#hevea_general548">8.1</a>
</li></ul>
</li></ul></td><td class="c027"><ul class="indexenv"><li class="li-indexenv">information<ul class="indexenv"><li class="li-indexenv">
on software components, <a href="#hevea_general321">4.2.6</a>
</li></ul>
</li><li class="li-indexenv">information options, <a href="#hevea_general313">4.2.6</a>
</li><li class="li-indexenv">input mask, <span class="c011">see</span> mask, input files
</li><li class="li-indexenv">interaction with <span class="c008">Enfuse</span>, <a href="#hevea_general50">3.3</a>
</li><li class="li-indexenv">invocation, <a href="#hevea_general115">4</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">Jackson,
Daniel</span>, <a href="#hevea_general604">8.6.6</a>
</li><li class="li-indexenv"><span class="c016">Jackson, Daniel</span>, <a href="#hevea_general142">4.2.1</a>, <a href="#hevea_general230">4.2.4</a>
</li><li class="li-indexenv"><span class="c016">JFIF</span>, <span class="c011">see</span> <span class="c016">JPEG</span>
</li><li class="li-indexenv"><span class="c016">JPEG</span>, <a href="#hevea_general620">A.5</a>
</li><li class="li-indexenv"><span class="c016">JPEG</span> compression, <span class="c011">see</span> compression
</li><li class="li-indexenv"><span class="c016">JPEG</span> quality level, <span class="c011">see</span> compression
<br>
<br>
</li><li class="li-indexenv"><span class="c016">von&#XA0;K&#XE1;rm&#XE1;n, Theodore</span>, <a href="#hevea_general189">4.2.2</a>
</li><li class="li-indexenv"><span class="c016">Kautz, Jan</span>, <a href="#hevea_general5">1</a>
</li><li class="li-indexenv">known limitations, <a href="#hevea_general30">2</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">L*a*b*</span> colorspace, <span class="c011">see</span> colorspace, <span class="c016">L*a*b*</span>
</li><li class="li-indexenv"><span class="c016">Laplacian</span> edge detection, <span class="c011">see</span> edge detection, <span class="c016">Laplacian</span>
</li><li class="li-indexenv"><span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span>, <a href="#hevea_general256">4.2.5</a>, <a href="#hevea_general463">5.4.2</a>
</li><li class="li-indexenv">LaunchPad<ul class="indexenv"><li class="li-indexenv">
bug database, <span class="c011">see</span> bug, database at LaunchPad
</li></ul>
</li><li class="li-indexenv"><span class="c016">LCE</span>, <span class="c011">see</span> local contrast enhancement
</li><li class="li-indexenv"><span class="c005">LD_LIBRARY_PATH</span>, <span class="c011">see</span> environment variable, <span class="c005">LD_LIBRARY_PATH</span>, <span class="c011">see</span> environment variable, <span class="c005">LD_LIBRARY_PATH</span>
</li><li class="li-indexenv">LibJPEG, <a href="#hevea_general619">A.5</a>
</li><li class="li-indexenv">LibPNG, <a href="#hevea_general622">A.5</a>
</li><li class="li-indexenv">LibTiff, <a href="#hevea_general624">A.5</a>
</li><li class="li-indexenv"><span class="c016">Lindbloom, Bruce</span>, <a href="#hevea_general490">6.1</a>
</li><li class="li-indexenv">LoadLibrary (Windows), <a href="#hevea_general434">5.2.3</a>
</li><li class="li-indexenv"><span class="c016">LoG</span>, <span class="c011">see</span> <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span>
</li><li class="li-indexenv"><span class="c016">LoG</span>, <span class="c011">see</span> <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span>
</li><li class="li-indexenv"><span class="c016">LZW</span> compression, <span class="c011">see</span> compression
</li><li class="li-indexenv"><span class="c005">l-star</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">l-star</span>
</li><li class="li-indexenv">layer<ul class="indexenv"><li class="li-indexenv">
image, <a href="#hevea_general369"><U>4.5</U></a>
</li><li class="li-indexenv">selection, <a href="#hevea_general364">4.5</a>
</li></ul>
</li><li class="li-indexenv">layer selection, <a href="#hevea_general220">4.2.4</a>
<ul class="indexenv"><li class="li-indexenv">
all layers, <a href="#hevea_general221">4.2.4</a>
</li><li class="li-indexenv">default, <a href="#hevea_general363">4.4.4</a>
</li><li class="li-indexenv">first layer, <a href="#hevea_general222">4.2.4</a>
</li><li class="li-indexenv">largest-layer, <a href="#hevea_general224">4.2.4</a>
</li><li class="li-indexenv">last layer, <a href="#hevea_general223">4.2.4</a>
</li><li class="li-indexenv">no layer, <a href="#hevea_general225">4.2.4</a>
</li></ul>
</li><li class="li-indexenv">layer selection syntax, <a href="#hevea_general370">4.5.1</a>
</li><li class="li-indexenv">lens distortion<ul class="indexenv"><li class="li-indexenv">
correction of, <a href="#hevea_general42">3.1</a>
</li></ul>
</li><li class="li-indexenv">level<ul class="indexenv"><li class="li-indexenv">
verbosity, <a href="#hevea_general148">4.2.1</a>
</li></ul>
</li><li class="li-indexenv">levels<ul class="indexenv"><li class="li-indexenv">
pyramid, <a href="#hevea_general140">4.2.1</a>
</li></ul>
</li><li class="li-indexenv">libraries, <a href="#hevea_general84">3.3.1</a>
</li><li class="li-indexenv">library<ul class="indexenv"><li class="li-indexenv">
dynamic, <span class="c011">see</span> dynamic library, <span class="c011">see</span> dynamic library
</li></ul>
</li><li class="li-indexenv">light probe, <a href="#hevea_general559">8.3.2</a>
</li><li class="li-indexenv"><span class="c005">lightness</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">lightness</span>
</li><li class="li-indexenv">linking<ul class="indexenv"><li class="li-indexenv">
dynamic, <a href="#hevea_general414">5.2.3</a>
</li></ul>
</li><li class="li-indexenv">literal filename, <span class="c011">see</span> filename, literal
</li><li class="li-indexenv">load mask, <span class="c011">see</span> mask, loading
</li><li class="li-indexenv">loading<ul class="indexenv"><li class="li-indexenv">
dynamic, <a href="#hevea_general416">5.2.3</a>
</li></ul>
</li><li class="li-indexenv">local analysis window, <span class="c011">see</span> window, local-analysis
</li><li class="li-indexenv">local contrast, <span class="c011">see</span> weighting, local contrast
</li><li class="li-indexenv">local contrast enhancement, <span class="c011">see</span> contrast, local enhancement, <span class="c011">see</span> contrast enhancement, local
</li><li class="li-indexenv">local contrast problem, <a href="#hevea_general586">8.6.5</a>
</li><li class="li-indexenv">local contrast weight, <span class="c011">see</span> weight, local contrast
</li><li class="li-indexenv">local contrast weighting, <span class="c011">see</span> weighting, local contrast
</li><li class="li-indexenv">local entropy, <span class="c011">see</span> weighting, local entropy
</li><li class="li-indexenv">local entropy weighting, <span class="c011">see</span> weighting, local entropy, <a href="#hevea_general469">5.5</a>
</li><li class="li-indexenv">local-contrast-based fusing, <a href="#hevea_general579">8.6.3</a>
</li><li class="li-indexenv">log-transform, <span class="c011">see</span> transform, log
</li><li class="li-indexenv">luminance, <a href="#hevea_general484">6</a>
</li><li class="li-indexenv"><span class="c005">luminance</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">luminance</span>
</li><li class="li-indexenv">luminance interval, <a href="#hevea_general486">6.1</a>
<ul class="indexenv"><li class="li-indexenv">
normalized, <a href="#hevea_general395">5.2</a>, <a href="#hevea_general487">6.1</a>, <a href="#hevea_general488">6.1</a>
</li><li class="li-indexenv">trivial, <a href="#hevea_general160">4.2.2</a>, <a href="#hevea_general218">4.2.4</a>
</li></ul>
<br>
<br>
</li><li class="li-indexenv">Math-O file, <span class="c011">see</span> file, Mach-O
</li><li class="li-indexenv"><span class="c016">Mertens, Tom</span>, <a href="#hevea_general4">1</a>
</li><li class="li-indexenv"><span class="c016">Morgan le Fay</span>, <a href="#hevea_general605">8.6.6</a>
</li><li class="li-indexenv">mask, <a href="#hevea_general532">7</a>, <a href="#hevea_general542">7.1</a>
<ul class="indexenv"><li class="li-indexenv">
binary, <a href="#hevea_general534">7</a>
</li><li class="li-indexenv">external, <a href="#hevea_general48">3.2</a>
</li><li class="li-indexenv">filename template, <a href="#hevea_general228">4.2.4</a>, <a href="#hevea_general234">4.2.4</a>
</li><li class="li-indexenv">floating-point <span class="c016">TIFF</span>, <a href="#hevea_general238">4.2.4</a>
</li><li class="li-indexenv">hard, <a href="#hevea_general208">4.2.3</a>
</li><li class="li-indexenv">input files, <a href="#hevea_general537">7.1</a>
</li><li class="li-indexenv">loading, <a href="#hevea_general226">4.2.4</a>
</li><li class="li-indexenv">save, <a href="#hevea_general232">4.2.4</a>
</li><li class="li-indexenv">soft, <a href="#hevea_general212">4.2.3</a>
</li><li class="li-indexenv">template character, <a href="#hevea_general253"><span class="c013">4.2.4</span></a>
<ul class="indexenv"><li class="li-indexenv">
&#X2018;<span class="c005">%</span>&#X2019;, <a href="#hevea_general240">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">B</span>&#X2019;, <a href="#hevea_general248">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">b</span>&#X2019;, <a href="#hevea_general247">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">D</span>&#X2019;, <a href="#hevea_general246">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">d</span>&#X2019;, <a href="#hevea_general245">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">E</span>&#X2019;, <a href="#hevea_general252">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">e</span>&#X2019;, <a href="#hevea_general251">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">F</span>&#X2019;, <a href="#hevea_general250">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">f</span>&#X2019;, <a href="#hevea_general249">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">i</span>&#X2019;, <a href="#hevea_general241">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">n</span>&#X2019;, <a href="#hevea_general242">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">P</span>&#X2019;, <a href="#hevea_general244">4.2.4</a>
</li><li class="li-indexenv">&#X2018;<span class="c005">p</span>&#X2019;, <a href="#hevea_general243">4.2.4</a>
</li></ul>
</li><li class="li-indexenv">weight, <a href="#hevea_general536">7</a>, <a href="#hevea_general545">7.2</a>
</li></ul>
</li><li class="li-indexenv">matte, <a href="#hevea_general539">7.1</a>, <a href="#hevea_general544">7.1</a>
</li><li class="li-indexenv">message<ul class="indexenv"><li class="li-indexenv">
category, <a href="#hevea_general90">3.3.2</a>
<ul class="indexenv"><li class="li-indexenv">
error, <a href="#hevea_general91">3.3.2</a>
</li><li class="li-indexenv">info, <a href="#hevea_general95">3.3.2</a>
</li><li class="li-indexenv">note, <a href="#hevea_general96">3.3.2</a>
</li><li class="li-indexenv">timing, <a href="#hevea_general97">3.3.2</a>
</li><li class="li-indexenv">warning, <a href="#hevea_general94">3.3.2</a>
</li></ul>
</li><li class="li-indexenv">console, <a href="#hevea_general89">3.3.2</a>
</li><li class="li-indexenv">debug, <a href="#hevea_general98">3.3.2</a>
</li><li class="li-indexenv">foreign sources, <a href="#hevea_general99">3.3.2</a>
</li><li class="li-indexenv">&#X201C;should never happen&#X201D;, <a href="#hevea_general100">3.3.2</a>
</li></ul>
</li><li class="li-indexenv">mode of operation (<span class="c016">SDev</span>, <span class="c016">LoG</span>, &#X2026;), <a href="#hevea_general468">5.4.4</a>
</li><li class="li-indexenv">moment<ul class="indexenv"><li class="li-indexenv">
first, <a href="#hevea_general454">5.4.1</a>
</li><li class="li-indexenv">second, <a href="#hevea_general457">5.4.1</a>
</li></ul>
</li><li class="li-indexenv">multi-page file, <span class="c011">see</span> file, multi-page, <br>
<span class="c011">see also</span> layer, <a href="#hevea_general367">4.5</a>
<ul class="indexenv"><li class="li-indexenv">
tools, <a href="#hevea_general374">4.5.2</a>
</li></ul>
</li><li class="li-indexenv">multi-resolution spline, <a href="#hevea_general16">1</a>
<br>
<br>
</li><li class="li-indexenv">name of builder, <a href="#hevea_general78">3.3.1</a>
</li><li class="li-indexenv">natural sharp-unsharp transition, <a href="#hevea_general602">8.6.6</a>
</li><li class="li-indexenv">noise reduction, <a href="#hevea_general551">8.2</a>
</li><li class="li-indexenv">normalized luminance interval, <span class="c011">see</span> luminance interval, normalized
</li><li class="li-indexenv">notation, <a href="#hevea_general0">Frontmatter A</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">O&#X2019;Neill, Jack</span>, <a href="#hevea_general231">4.2.4</a>
</li><li class="li-indexenv"><span class="c005">OMP_DYNAMIC</span>, <span class="c011">see</span> environment variable, <span class="c005">OMP_DYNAMIC</span>
</li><li class="li-indexenv"><span class="c005">OMP_NUM_THREADS</span>, <span class="c011">see</span> environment variable, <span class="c005">OMP_NUM_THREADS</span>
</li><li class="li-indexenv"><span class="c016">OpenEXR</span>, <a href="#hevea_general614">A.4</a>
<ul class="indexenv"><li class="li-indexenv">
data format, <a href="#hevea_general177">4.2.2</a>
</li><li class="li-indexenv">half precision float, <a href="#hevea_general178">4.2.2</a>
</li></ul>
</li><li class="li-indexenv"><span class="c016">OpenMP</span>, <a href="#hevea_general87">3.3.1</a>, <a href="#hevea_general109">3.3.3</a>, <a href="#hevea_general112">3.3.3</a>
</li><li class="li-indexenv">object<ul class="indexenv"><li class="li-indexenv">
shared, <span class="c011">see</span> shared object, <span class="c011">see</span> shared object
</li></ul>
</li><li class="li-indexenv">only save mask, <span class="c011">see</span> save mask only
</li><li class="li-indexenv">optimum exposure, <span class="c011">see</span> exposure, optimum
</li><li class="li-indexenv">option delimiters, <span class="c011">see</span> options, delimiters
</li><li class="li-indexenv">options, <a href="#hevea_general123">4.2</a>
<ul class="indexenv"><li class="li-indexenv">
advanced, <a href="#hevea_general151">4.2.2</a>
</li><li class="li-indexenv">common, <a href="#hevea_general125">4.2.1</a>
</li><li class="li-indexenv">delimiters, <a href="#hevea_general328">4.3</a>
<ul class="indexenv"><li class="li-indexenv">
filename arguments, <a href="#hevea_general332">4.3.2</a>
</li><li class="li-indexenv">numeric arguments, <a href="#hevea_general331">4.3.1</a>
</li></ul>
</li><li class="li-indexenv">expert, <a href="#hevea_general215">4.2.4</a>
</li><li class="li-indexenv">fusion, <a href="#hevea_general195">4.2.3</a>
</li><li class="li-indexenv">fusion for experts, <a href="#hevea_general255">4.2.5</a>
</li><li class="li-indexenv">information, <a href="#hevea_general314">4.2.6</a>
</li></ul>
</li><li class="li-indexenv">order<ul class="indexenv"><li class="li-indexenv">
of image processing, <a href="#hevea_general337">4.4</a>
</li></ul>
</li><li class="li-indexenv">output<ul class="indexenv"><li class="li-indexenv">
file compression, <a href="#hevea_general126">4.2.1</a>
</li></ul>
</li><li class="li-indexenv">output filename, <span class="c011">see</span> filename, output
<ul class="indexenv"><li class="li-indexenv">
default, <span class="c011">see</span> filename, output, default
</li></ul>
</li><li class="li-indexenv">output image<ul class="indexenv"><li class="li-indexenv">
set size, <a href="#hevea_general181">4.2.2</a>
</li></ul>
</li><li class="li-indexenv">overpowering criteria, <span class="c011">see</span> criteria, overpowering
</li><li class="li-indexenv">overview, <a href="#hevea_general3">1</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">PNG</span>, <a href="#hevea_general623">A.5</a>
</li><li class="li-indexenv">packbits compression, <span class="c011">see</span> compression
</li><li class="li-indexenv">panorama<ul class="indexenv"><li class="li-indexenv">
360<sup>&#X2218;</sup><ul class="indexenv"><li class="li-indexenv">
horizontal, <a href="#hevea_general190">4.2.2</a>
</li><li class="li-indexenv">vertical, <a href="#hevea_general192">4.2.2</a>
</li></ul>
</li></ul>
</li><li class="li-indexenv">parallax error, <a href="#hevea_general45">3.1</a>
</li><li class="li-indexenv">perceptual rendering intent, <span class="c011">see</span> rendering intent
</li><li class="li-indexenv">performance considerations, <a href="#hevea_general438">5.2.3</a>
</li><li class="li-indexenv">photographic workflow, <a href="#hevea_general32">3</a>
</li><li class="li-indexenv">photometric alignment, <span class="c011">see</span> alignment, photometric
</li><li class="li-indexenv">pixels<ul class="indexenv"><li class="li-indexenv">
blending, <a href="#hevea_general479">6</a>
</li><li class="li-indexenv">fusing, <a href="#hevea_general481">6</a>
</li><li class="li-indexenv">hot, <a href="#hevea_general601">8.6.6</a>
</li></ul>
</li><li class="li-indexenv"><span class="c005">pl-star</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">pl-star</span>
</li><li class="li-indexenv">polarization series, <span class="c011">see</span> series, polarization
</li><li class="li-indexenv">probability function, <a href="#hevea_general451">5.4.1</a>
</li><li class="li-indexenv">problem reports, <span class="c011">see</span> bug reports
</li><li class="li-indexenv">profile<ul class="indexenv"><li class="li-indexenv">
fallback, <a href="#hevea_general216">4.2.4</a>
</li><li class="li-indexenv"><span class="c016">ICC</span>, <a href="#hevea_general76">3.3.1</a>, <a href="#hevea_general155">4.2.2</a>, <a href="#hevea_general477">6</a>
</li></ul>
</li><li class="li-indexenv">projector<ul class="indexenv"><li class="li-indexenv">
grayscale, <a href="#hevea_general393">5.2</a>
</li></ul>
</li><li class="li-indexenv">projector to grayscale, <span class="c011">see</span> gray projector
</li><li class="li-indexenv">public repository, <a href="#hevea_general59">3.3.1</a>
</li><li class="li-indexenv">pyramid levels, <span class="c011">see</span> levels, pyramid
<br>
<br>
</li><li class="li-indexenv">query<ul class="indexenv"><li class="li-indexenv">
compiler, <a href="#hevea_general85">3.3.1</a>
</li><li class="li-indexenv">features, <a href="#hevea_general63">3.3.1</a>
</li><li class="li-indexenv">image formats, <a href="#hevea_general67">3.3.1</a>
</li><li class="li-indexenv">libraries, <a href="#hevea_general86">3.3.1</a>
</li><li class="li-indexenv">name of builder, <a href="#hevea_general80">3.3.1</a>
</li></ul>
</li><li class="li-indexenv">query version, <span class="c011">see</span> version, query
<br>
<br>
</li><li class="li-indexenv"><span class="c016">Van Reeth, Frank</span>, <a href="#hevea_general6">1</a>
</li><li class="li-indexenv"><span class="c016">RGB</span> color cube, <span class="c011">see</span> color cube, <span class="c016">RGB</span>, <span class="c011">see</span> color cube, <span class="c016">RGB</span>, <span class="c011">see</span> color cube, <span class="c016">RGB</span>
</li><li class="li-indexenv"><span class="c016">RGB&#X2019;</span>-<span class="c016">L*a*b*</span> conversion, <a href="#hevea_general310">4.2.5</a>
</li><li class="li-indexenv"><span class="c016">RGB</span>-cube, <a href="#hevea_general219">4.2.4</a>
</li><li class="li-indexenv"><span class="c016">RGB</span>-<span class="c016">L*a*b*</span> conversion, <a href="#hevea_general302">4.2.5</a>
</li><li class="li-indexenv">random variable, <a href="#hevea_general452">5.4.1</a>
</li><li class="li-indexenv">raw conversion, <span class="c011">see</span> conversion, raw
</li><li class="li-indexenv">rendering intent<ul class="indexenv"><li class="li-indexenv">
perceptual, <a href="#hevea_general527">6.4</a>
</li></ul>
</li><li class="li-indexenv">requantization, <a href="#hevea_general172">4.2.2</a>
</li><li class="li-indexenv">requirements<ul class="indexenv"><li class="li-indexenv">
image, <a href="#hevea_general121">4.1</a>
</li></ul>
</li><li class="li-indexenv">response file, <span class="c011">see</span> file, response
<ul class="indexenv"><li class="li-indexenv">
comment (&#X2018;<span class="c005">#</span>&#X2019;), <span class="c011">see</span> &#X2018;<span class="c005">#</span>&#X2019;
</li><li class="li-indexenv">force recognition of, <a href="#hevea_general345">4.4.1</a>
</li><li class="li-indexenv">format, <a href="#hevea_general339">4.4.1</a>
</li><li class="li-indexenv">grammar, <a href="#hevea_general343">4.4.1</a>
</li><li class="li-indexenv">syntactic comment, <a href="#hevea_general346">4.4.2</a>
</li></ul>
</li><li class="li-indexenv">response file prefix<ul class="indexenv"><li class="li-indexenv">
&#X2018;<span class="c005">@</span>&#X2019;, <span class="c011">see</span> &#X2018;<span class="c005">@</span>&#X2019;
</li></ul>
</li><li class="li-indexenv">response files, <a href="#hevea_general333">4.4</a>
</li><li class="li-indexenv">return code, <a href="#hevea_general92">3.3.2</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">SNR</span>, <span class="c011">see</span> signal-to-noise ratio
</li><li class="li-indexenv">SourceForge, <a href="#hevea_general29">1</a>
</li><li class="li-indexenv">saturation enhancement, <a href="#hevea_general565">8.5</a>
</li><li class="li-indexenv">saturation weight, <a href="#hevea_general210">4.2.3</a>
</li><li class="li-indexenv">saturation weighting, <span class="c011">see</span> weighting, saturation, <span class="c011">see</span> weighting, saturation
</li><li class="li-indexenv">save mask, <span class="c011">see</span> mask, save
<ul class="indexenv"><li class="li-indexenv">
only, <a href="#hevea_general236">4.2.4</a>
</li></ul>
</li><li class="li-indexenv">scaling of parameters, <a href="#hevea_general467">5.4.4</a>
</li><li class="li-indexenv">second moment, <span class="c011">see</span> moment, second
</li><li class="li-indexenv">sensor<ul class="indexenv"><li class="li-indexenv">
use clean, <a href="#hevea_general597">8.6.6</a>
</li></ul>
</li><li class="li-indexenv">series<ul class="indexenv"><li class="li-indexenv">
exposure, <a href="#hevea_general552">8.3</a>
</li><li class="li-indexenv">flash exposure, <a href="#hevea_general560">8.4</a>
</li><li class="li-indexenv">polarization, <a href="#hevea_general563">8.5</a>
</li><li class="li-indexenv">simple, <a href="#hevea_general549">8.2</a>
</li></ul>
</li><li class="li-indexenv">shared object, <a href="#hevea_general272">4.2.5</a>, <a href="#hevea_general418">5.2.3</a>
</li><li class="li-indexenv">signal-to-noise ratio, <a href="#hevea_general577">8.6.2</a>
</li><li class="li-indexenv">signature, <a href="#hevea_general81">3.3.1</a>, <a href="#hevea_general320">4.2.6</a>
</li><li class="li-indexenv">signed binary, <span class="c011">see</span> signature
</li><li class="li-indexenv">simple series, <span class="c011">see</span> series, simple
</li><li class="li-indexenv">single criterion fusing, <span class="c011">see</span> fusing, single criterion
</li><li class="li-indexenv">single precision float (<span class="c016">IEEE754</span>), <span class="c011">see</span> <span class="c016">IEEE754</span>, single precision float
</li><li class="li-indexenv">size<ul class="indexenv"><li class="li-indexenv">
canvas, <a href="#hevea_general180">4.2.2</a>
</li></ul>
</li><li class="li-indexenv">soft mask, <span class="c011">see</span> mask, soft
</li><li class="li-indexenv">software<ul class="indexenv"><li class="li-indexenv">
components, <span class="c011">see</span> information, on software components
</li><li class="li-indexenv">version, <a href="#hevea_general325">4.2.6</a>
</li></ul>
</li><li class="li-indexenv">software version, <span class="c011">see</span> version, software
</li><li class="li-indexenv">source code repository, <span class="c011">see</span> public repository
</li><li class="li-indexenv">spline, <span class="c011">see</span> multi-resolution spline
</li><li class="li-indexenv"><span class="c016">sRGB</span>, <a href="#hevea_general162">4.2.2</a>
</li><li class="li-indexenv"><span class="c016">sRGB</span> color cube, <span class="c011">see</span> color cube, <span class="c016">sRGB</span>
</li><li class="li-indexenv">standard deviation, <a href="#hevea_general459">5.4.1</a>
</li><li class="li-indexenv">standard workflow, <span class="c011">see</span> workflow, standard
</li><li class="li-indexenv">statistical moments, <a href="#hevea_general450">5.4.1</a>
</li><li class="li-indexenv">subtraction of dark frame, <a href="#hevea_general599">8.6.6</a>
</li><li class="li-indexenv">sweet spot aperture, <span class="c011">see</span> aperture, sweet spot
</li><li class="li-indexenv">syntactic comment<ul class="indexenv"><li class="li-indexenv">
grammar, <a href="#hevea_general348">4.4.2</a>
</li><li class="li-indexenv">response file, <span class="c011">see</span> response file, syntactic comment
</li></ul>
</li><li class="li-indexenv">syntax<ul class="indexenv"><li class="li-indexenv">
layer selection, <a href="#hevea_general371">4.5.1</a>
<ul class="indexenv"><li class="li-indexenv">
grammar, <a href="#hevea_general372">4.5.1</a>
</li></ul>
</li></ul>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">TIFF</span>, <a href="#hevea_general625">A.5</a>
</li><li class="li-indexenv"><span class="c005">TMPDIR</span>, <span class="c011">see</span> environment variable, <span class="c005">TMPDIR</span>
</li><li class="li-indexenv">tips<ul class="indexenv"><li class="li-indexenv">
focus stacking experts, <a href="#hevea_general595">8.6.6</a>
</li></ul>
</li><li class="li-indexenv">transform<ul class="indexenv"><li class="li-indexenv">
floating-point images, <a href="#hevea_general493">6.2</a>
</li><li class="li-indexenv">log, <a href="#hevea_general501">6.2</a>, <a href="#hevea_general503">6.2</a>
</li></ul>
</li><li class="li-indexenv">transformation<ul class="indexenv"><li class="li-indexenv">
affine, <a href="#hevea_general40">3.1</a>
</li></ul>
</li><li class="li-indexenv">transition<ul class="indexenv"><li class="li-indexenv">
natural sharp-unsharp, <a href="#hevea_general603">8.6.6</a>
</li></ul>
</li><li class="li-indexenv">typographic conventions, <span class="c011">see</span> notation
<br>
<br>
</li><li class="li-indexenv">unassociated alpha channel, <span class="c011">see</span> alpha channel, associated
</li><li class="li-indexenv">understanding masks, <a href="#hevea_general533">7</a>
<br>
<br>
</li><li class="li-indexenv"><span class="c016">VIFF</span> floating-point image, <span class="c011">see</span> image, floating-point <span class="c016">VIFF</span>
</li><li class="li-indexenv"><span class="c016">VR</span>, <span class="c011">see</span> virtual reality
</li><li class="li-indexenv"><span class="c005">value</span> gray projector, <span class="c011">see</span> gray projector, <span class="c005">value</span>
</li><li class="li-indexenv">variable, <span class="c011">see</span> environment variable
</li><li class="li-indexenv">variance, <a href="#hevea_general456">5.4.1</a>
</li><li class="li-indexenv">verbosity level, <span class="c011">see</span> level, verbosity
</li><li class="li-indexenv">version, <span class="c011">see</span> software, version
<ul class="indexenv"><li class="li-indexenv">
query, <a href="#hevea_general54">3.3.1</a>
</li><li class="li-indexenv">software, <a href="#hevea_general52">3.3.1</a>
</li></ul>
</li><li class="li-indexenv">virtual reality, <a href="#hevea_general186">4.2.2</a>
<br>
<br>
</li><li class="li-indexenv">weight<ul class="indexenv"><li class="li-indexenv">
entropy, <a href="#hevea_general199">4.2.3</a>
</li><li class="li-indexenv">exposure, <span class="c011">see</span> exposure, weight
</li><li class="li-indexenv">function<ul class="indexenv"><li class="li-indexenv">
exposure, <a href="#hevea_general270">4.2.5</a>
</li></ul>
</li><li class="li-indexenv">local contrast, <a href="#hevea_general196">4.2.3</a>
</li><li class="li-indexenv">mask, <span class="c011">see</span> mask, weight
</li><li class="li-indexenv">saturation, <span class="c011">see</span> saturation weight
</li></ul>
</li><li class="li-indexenv">weighted average, <span class="c011">see</span> average, weighted
</li><li class="li-indexenv">weighting<ul class="indexenv"><li class="li-indexenv">
contrast using <span class="c016">Laplacian</span>-of-<span class="c016">Gaussian</span>, <a href="#hevea_general461">5.4.2</a>
</li><li class="li-indexenv">contrast using a blend of methods, <a href="#hevea_general465">5.4.3</a>
</li><li class="li-indexenv">contrast using standard deviation, <a href="#hevea_general446">5.4.1</a>
</li><li class="li-indexenv">entropy, <a href="#hevea_general443">5.3</a>
</li><li class="li-indexenv">exposure, <a href="#hevea_general18">1</a>, <a href="#hevea_general391">5.2</a>
<ul class="indexenv"><li class="li-indexenv">
built-in, <a href="#hevea_general397">5.2.1</a>
</li><li class="li-indexenv">prerequisites, <a href="#hevea_general435">5.2.3</a>
</li><li class="li-indexenv">user-defined, <a href="#hevea_general412">5.2.2</a>
<ul class="indexenv"><li class="li-indexenv">
dynamically-linked, <a href="#hevea_general413">5.2.3</a>
</li></ul>
</li></ul>
</li><li class="li-indexenv">general concept of, <a href="#hevea_general378">5.1</a>
</li><li class="li-indexenv">local contrast, <a href="#hevea_general22">1</a>, <a href="#hevea_general444">5.4</a>
</li><li class="li-indexenv">local entropy, <a href="#hevea_general25">1</a>, <a href="#hevea_general470">5.5</a>
<ul class="indexenv"><li class="li-indexenv">
window size, <a href="#hevea_general474">5.5</a>
</li></ul>
</li><li class="li-indexenv">saturation, <a href="#hevea_general20">1</a>, <a href="#hevea_general439">5.3</a>
</li></ul>
</li><li class="li-indexenv">weighting factor, <a href="#hevea_general483">6</a>
</li><li class="li-indexenv">weighting functions, <a href="#hevea_general376">5</a>
</li><li class="li-indexenv">weights<ul class="indexenv"><li class="li-indexenv">
default, <a href="#hevea_general387">5.1.3</a>
</li></ul>
</li><li class="li-indexenv">white-point, <a href="#hevea_general507">6.3</a>
<ul class="indexenv"><li class="li-indexenv">
<span class="c016">D50</span>, <a href="#hevea_general521">6.4</a>, <a href="#hevea_general529">6.4</a>
</li></ul>
</li><li class="li-indexenv">width of exposure weight curve, <span class="c011">see</span> exposure, width
</li><li class="li-indexenv">window<ul class="indexenv"><li class="li-indexenv">
local-analysis, <a href="#hevea_general448">5.4.1</a>
</li></ul>
</li><li class="li-indexenv">window size<ul class="indexenv"><li class="li-indexenv">
contrast, <span class="c011">see</span> contrast, window size
</li><li class="li-indexenv">entropy, <span class="c011">see</span> entropy, window size
</li></ul>
</li><li class="li-indexenv">workflow, <span class="c011">see</span> photographic workflow
<ul class="indexenv"><li class="li-indexenv">
<span class="c008">Enblend</span>, <a href="#hevea_general36">3.1</a>
</li><li class="li-indexenv"><span class="c008">Enfuse</span>, <a href="#hevea_general37">3.1</a>
</li><li class="li-indexenv">external mask, <a href="#hevea_general49">3.2</a>
</li><li class="li-indexenv">standard, <a href="#hevea_general34">3.1</a>
</li></ul>
</li><li class="li-indexenv">wrap around, <a href="#hevea_general185">4.2.2</a>
</li></ul></td></tr>
</table><!--CUT END -->
<!--BEGIN STICKYNOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note1" href="#text1">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Original author</div>
</dd><dt class="dt-thefootnotes"><a id="note2" href="#text2">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Date reliably determined via source-code management system.</div>
</dd></dl>
<!--END NOTES-->
<!--HTMLFOOT-->
<!--ENDHTML-->
</body>
</html>
